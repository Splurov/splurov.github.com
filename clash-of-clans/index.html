<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=950"/>
    <title>Clash Calc — Troops and Spells Cost Calculator/Time Planner for Clash of Clans</title>
    <meta name="description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle."/>
    <style>html,body{background:#fefefe;color:#222}body{font-family:'PT Sans',Arial,sans-serif;font-size:18px;line-height:1.5;margin:20px 40px}a{white-space:nowrap}a:link{color:#4100f1}a:link,a:visited{text-decoration:none}a:visited{color:#63008c}a:hover,a:active{text-decoration:underline}h1{font-size:1.55em;margin:0 0 .42em}h2{font-size:1.22em;margin:.81em 0 .18em}p{margin:0 0 .66em}.content{min-width:260px;max-width:520px}.photo{margin:8px 0 20px 20px;float:right;border-radius:10px}@media all and (max-width:560px){.photo{float:none;display:block;margin:0 auto 20px}}a.title{color:#222;text-decoration:none}.footer{margin-top:30px;font-size:14px;color:#999}.footer a:link,.footer a:visited{text-decoration:underline;color:#999}.footer a:hover,.footer a:active{text-decoration:none}.hidden{display:none}</style>
    <style>body{margin:13px 17px;line-height:1.4;font-size:16px;-webkit-text-size-adjust:100%}kbd{font-family:inherit;background:#f0f0f0;border:1px solid #ddd;border-radius:5px;padding:0 4px}input,select,textarea{font-family:inherit;font-size:inherit;vertical-align:middle}.field-long{width:100%}.near-field{vertical-align:middle}h1{font-size:22px;margin:0 0 3px}h2{font-size:20px;margin:13px 0 8px}h2+table{margin-top:1px}h3{font-size:14px;margin:17px 0 2px}p{margin:0 0 10px}table{border-spacing:0}table td,table th{vertical-align:top;padding:0}.number{text-align:right}.wikia-link:link,.wikia-link:visited{color:inherit;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAA/1BMVEX///8AAABAQEANDQ1TU1M/Pz8MDAxHR0cAAABAQEBhYWFOTk4AAABMTEwYGBhhYWFHR0dWVlYAAABLS0sYGBhOTk5VVVVUVFQ+Pj4AAAAAAABpaWloaGhmZmZiYmJnZ2f+/v6jo6Pc3Nxvb29eXl5cXFxkZGRlZWW6urptbW2pqam1tbXW1tb4+Pi2trZqamp8fHxfX1+0tLTg4OC4uLizs7P9/f1ubm5/f39wcHBbW1vd3d1ra2uoqKj5+fl+fn7Pz8+RkZGtra3t7e13d3eCgoKwsLB7e3uSkpKvr6/Y2NjZ2dl1dXXb29uqqqqkpKTi4uLk5ORjY2N4eHiLi4spHuS/AAAAG3RSTlMADasU0KsVsROo+cQPvUD3s9kMvD/B1dKoCw76qK6PAAAA6klEQVR4Xk3L1XaDQABFUQIkdfeO4m5x91Rd/v9bOkMHynnc615JpKjQESFUQQABj/xj48q4c9ss94E4Be7vjZc0z4UlSoeXwI84toEj1f463d6yN6sCZbnO2znY7T/RAjGGPW/gEXQfMllFOQ4zrdXSF3g2Yva88bsu5BjT6WSc6szCvp0sHxOOAdW+vvlXT4+OTxIDQo5dH63nlI5m6Ew5v1BVlWGHRk0ymIcpRtc30m1DUXKk0yZ5WcOFV69JvBy52njyalSR69t79FFZxlT02SvQMn/iDisIYg2UaJmZyMRyidZQZBX4C/BhL9uWDiH6AAAAAElFTkSuQmCC) no-repeat 100% .25em;background-size:10px 10px;padding-right:15px}.data{-webkit-transform:translateZ(0);-webkit-font-smoothing:subpixel-antialiased}.data th,.data td{padding-left:7px;padding-right:7px;white-space:nowrap;border-bottom:1px solid #ddd;border-right:1px solid #ddd}.data th{text-align:left;padding-bottom:1px;line-height:20px}.data td{padding-top:2px;padding-bottom:2px;vertical-align:middle}.data td>input{text-align:right}.data tfoot tr:last-child td{border-bottom:0}.data th:last-child,.data td:last-child{border-right:0}.data th:first-child,.data td:first-child{padding-left:0}.data-secondary{font-size:13px}.list-content{margin-bottom:10px}.list-content_small{font-size:14px}.list-content ul{padding:0;margin:0;list-style:none}.list-content li{padding-left:12px;position:relative}.list-content li:before{content:'•';position:absolute;left:0}.list-content p{margin:0 0 1px}.list-content__date{color:#777}.cost-elixir{background-position:100% 50%;background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-size:14px 16px;padding-right:19px}.cost-dark-elixir{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAD80lEQVR42q2XS0hUYRiGc0bHGW9z8T7jjI6O10wFNTGpwETaSTFkgkLSKpLCIBiCGggKgmBaRq4El1KbNl02Ii0qioIWLVpUuFBaFBKUk56v9z34i/xzRg6OBx7O/Xv/9/u+/58zh0TkQMDmBH4QBT3gFDgM8nc/l6tICRgGSfAYvAar4C8wwBo4nbMgtiC4DF6Bn0CysAVm9iuoHF0CH4HYYMvhcFzblyC2o+AJSAMBhh1RCN63JYgtb3tfDK6CFRsCupgUFRU9Y2ZsOcQWAnNgU3NlC6fTKT6f73tpaWmbHYcR8BRIDhhwuFleXj6mC+ppPAbeAskVCIrX673H2JYOXS5XV15e3qdchRRut1sqKyuf19XVeTIEKyoqavPz819q9cqZ6urqFVXH3el0ocgP4Y4nB0pZWdkGmueCLngObNhpdQWyYXaix+ORQCAgxcXFYjXgwsJCiUQi8zh27G7/D1YCDFBSUsI6cKRsAp6TnesDAwMyOTkp4+Pj0tDQkBEDfSE1NTVvuLgrwRtZHLHDpLOzU/r6+qS5uVlQZ4Up1tvbK4lEQpaWlmR5eVmmp6eloKAgYz5WVVV9CwaDEYoFwPts7jCHpKenx3TR3t4ueMmktrZWwuGwDA8PSyqVkrW1NVlfX5dkMslMZMSJRqO/hoaG+ig4mq12HBm6S+rr6yUWi7EOEgqFuKeYeX1wcFBmZ2dlcXHRZGJiglNBj0XBf8jUGQpez+KOLzKldMmUKFd8mVDQdD0yMiJTU1MSj8elra2NDZURj7VtbW29SMHbVoLsQDaF3++nGJ0pdxQzHTc1NUljY6O0tLRQmANgRqw61dh+foaCd9VFrZVZC7a7EqQ7jpQiFCQU5yDoXk0NOtSzZSCdbLorFLyjCfKF3YLsRuWOLpQoxXisBJkNloECeraM/v5+ZsJ0eMuqfmxtjpZBKMjOpEOsiUqY8Jj3OE1Yb3PO6fEYB4JpPDdGwbMgraeULjlaLEmqYZSYgue8zrVSpZOdrQtyYJyvXFgqKegFy8BqhVBpZVCuFkwtHRGe0z3vs1mYFculsKury+ju7k7srKUYVRw3/2RJLbuVQdX0oAiPCVPO+0pMh89T8AUXGCVIl24wb9Gtqujqh5QC3NM54cLN+5aLNt/p6Oj4gdSfpI7+axHTFnBdlDVlEKIJWa5S7GQDC0FSaRCrT8F32UQZnDVhMH2u6WJwxXm64MOmC+qiR8BLIPv45TdQSzbWb6wqc8hEUI+f7YutHCTAqlVQDeWeaWaTfMF8Pc8/N1pcW9+lJ8AC+Aq29qhvGnPwMyb/I7jq3Sum3c/8MBgFN0EKPCBIXwpCCTTTcexr7MT6D9eNFIrhqHsGAAAAAElFTkSuQmCC);background-size:14px 16px}.cost-dark-elixir,.cost-gold{background-position:100% 50%;background-repeat:no-repeat;padding-right:19px}.cost-gold{background-image:url(data:image/png;base64,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);background-size:15px 16px}.button,.button:link,.button:visited{color:#444;cursor:pointer;display:inline-block;padding:3px 7px;border:1px solid #999;border-radius:5px;background-color:#fcfcfc;background-image:-webkit-linear-gradient(#fcfcfc,#ececec);background-image:-o-linear-gradient(#fcfcfc,#ececec);background-image:linear-gradient(#fcfcfc,#ececec);line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:400}.button:hover{background-image:-webkit-linear-gradient(#fcfcfc,#e0e0e0);background-image:-o-linear-gradient(#fcfcfc,#e0e0e0);background-image:linear-gradient(#fcfcfc,#e0e0e0);text-decoration:none}.button:active{color:#444;background:#e3e3e3;text-decoration:none}.button_after{margin-left:7px}.button_middle{vertical-align:middle}.button_social,.button_social:link,.button_social:visited{border-color:#99b;padding-top:4px;padding-bottom:4px;background-color:#fcfcff;background-image:-webkit-linear-gradient(#fcfcff,#ececff);background-image:-o-linear-gradient(#fcfcff,#ececff);background-image:linear-gradient(#fcfcff,#ececff);font-size:14px}.button_social:hover{background-image:-webkit-linear-gradient(#fcfcff,#e0e0ff);background-image:-o-linear-gradient(#fcfcff,#e0e0ff);background-image:linear-gradient(#fcfcff,#e0e0ff)}.button_social:active{background:#e3e3ff}.icon-twitter{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaCAMAAADhRa4NAAAAM1BMVEX///8Aq+0An98AquoArO4Aq+4ArO0Aq+sAp+cAq+4Aq+0Aq+0ArO4AquwArO4AqewArO4ca5ejAAAAEHRSTlMAgBAw78+fQCC/j3DfYK9QmmwCjwAAALBJREFUeF6V0NuOwzAIBNABG9/TzP9/7WqTKMWtW6nnddAgwELZRLILNMDTxH9xB/Z6RGLqc+PFIusRVJrrePDJghQAZ9+lcNIBYJDko+DQ6TVfmjIACJ0Nh8zLSD0nOu6uNZxiit8HjB8YTsIPEk46uLbjEiJXIm7aViPi/78QFbfAhQ5n45uKSaicDcWLYHRiwKxIpGMFNxWRZpw0/bq+ZrwormG0gBXNXUS2rPjZHwABG0b9SIF7AAAAAElFTkSuQmCC);background-size:16px 13px;padding-left:19px}.icon-twitter,.icon-facebook{background-position:0 50%;background-repeat:no-repeat}.icon-facebook{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAn1BMVEU7WZj///9DYZ1IZaBJZqGwvdd4jrpCYJ09W5mquNRUcKZngLDv8vdEYp2rudRlfrBJZ6H4+vxAXZtAXptTb6VHZJ/09vlYc6jL1OVMaaKRosZ5j7q2wdnn7PNogLFDYJxGY57y9Pk+XJpRbKTz9flthLRdd6tBXpvH0eOvvNaYqMl9kbv+/v75+vyvvdZVcKbt8PaVpsjp7fTn6/O1wdjusJcKAAAAjUlEQVR4Xu3QxwrDMAyAYcnOTvfee+/1/s9WiVJoCZYg9Nj/JKzvIkMcgpDxYQxiFpRqOUE0byfdtRM0Bi2kDi6QTvGVAzQvKIMrKqDD4N7rB4EDDBmMhDMLDCYaKOYEszK1YLCkYZUFFfxso4GtBnYa2GeBKVFHBicazr/9hz8wMvDAt/XvblXq/eg9nvadC9GU/sKFAAAAAElFTkSuQmCC);background-size:16px 16px;padding-left:21px}.limit-exceeded{color:#d00}.fixed-content{max-width:800px}.result{font-weight:700}.tooltip{cursor:help}.block-indented{margin-top:30px}.inline-message{font-size:14px;background:#cfc;border:1px solid #8f8;border-radius:5px;padding:3px 7px;line-height:1;vertical-align:middle;font-weight:400}.inline-message_closeable{cursor:pointer}.inline-message_after{margin-left:15px}.inline-message_negative{background:#fdd;border:1px solid #f88}.saved-list{font-size:14px}.saved-list__item{display:inline-block;margin:0 13px 13px 0;border:1px solid #ddd;border-radius:10px;padding:6px 7px 10px;vertical-align:top;color:#444;line-height:1.35}.saved-list__item-title{font-weight:700;color:#222;margin-top:3px;margin-bottom:8px}.saved-list__actions{margin-top:8px}.saved-list__table td{padding-right:8px}.saved-list__item-result{font-size:12px;color:#999;font-weight:700}.footer{border-top:1px solid #ddd;padding-top:12px}</style>
    <script>"Microsoft Internet Explorer"==navigator.appName&&function(e,t,a,r){e.src="/clash-of-clans/i/favicon-v2.ico",a=t.getElementsByTagName("script")[0],r=a.parentNode.insertBefore(t.createElement("link"),a),r.rel="shortcut icon",r.href=e.src}(new Image,document);</script>
    <link rel="icon" href="/clash-of-clans/i/favicon-v2.png"/>

    <link rel="apple-touch-icon-precomposed" href="/clash-of-clans/i/app-icons/57x57.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/clash-of-clans/i/app-icons/72x72.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/clash-of-clans/i/app-icons/114x114.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/clash-of-clans/i/app-icons/120x120.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/clash-of-clans/i/app-icons/144x144.png"/>
    <meta name="apple-mobile-web-app-title" content="Clash Calc"/>

    <meta property="fb:admins" content="splurov"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ClashCalc"/>
    <meta name="twitter:creator" content="@Splurov"/>
    <meta name="twitter:title" content="Clash Calc — Troops and Spells Cost Calculator/Time Planner for Clash of Clans"/>
    <meta name="twitter:description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle."/>

    <meta property="og:url" content="http://mkln.ru/clash-of-clans/" />
    <meta property="og:title" content="Clash Calc — Troops and Spells Cost Calculator/Time Planner for Clash of Clans" />
    <meta property="og:description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle." />
</head>
<body>

<h1>Clash Calc — Troops and Spells Cost Calculator/Time Planner for Clash of Clans</h1>

<div class="fixed-content">
    <p>Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle.</p>
    <p>
        <a href="https://twitter.com/intent/follow?original_referer=http%3A%2F%2Fmkln.ru%2Fclash-of-clans%2F&amp;screen_name=ClashCalc"
           target="_blank"
           class="button button_social"><span class="icon-twitter">Follow @ClashCalc on Twitter</span></a>
    </p>
</div>


<p>
    <span id="view-shared" class="inline-message inline-message_closeable" style="display: none;" title="Click to hide">
        You are viewing shared composition (you can find previous one in the saved compositions)
    </span>
</p>

<h2 id="barracks-anchor">
    <a href="http://clashofclans.wikia.com/wiki/Barracks" class="wikia-link" target="_blank">Barracks</a>
    <span class="inline-message inline-message_negative inline-message_after"
          style="display: none;"
          id="units-barracks-exceeded">Too many units</span>
</h2>
<table id="units" class="data">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th>
                Quantity <span class="data-secondary tooltip" title="Army Camps Free Capacity" id="units-quantity"></span>
                <br/><span class="button data-secondary js-reset" data-reset-type="units" data-scope="quantity">Reset</span>
            </th>
            <th><span class="cost-elixir">Total</span></th>
            <th>
                Subtract
                <br/><span class="button data-secondary js-reset" data-reset-type="units" data-scope="subtract">Reset</span>
            </th>
            <th>
                <select id="barracks-levels-1" tabindex="1">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10" selected="selected">10</option>
                </select> <span class="near-field">lvl</span><br/>
                <span id="units-barrack-header-1"></span>
            </th>
            <th>
                <select id="barracks-levels-2" tabindex="5">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10" selected="selected">10</option>
                </select> <span class="near-field">lvl</span><br />
                <span id="units-barrack-header-2"></span>
            </th>
            <th>
                <select id="barracks-levels-3" tabindex="10">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10" selected="selected">10</option>
                </select> <span class="near-field">lvl</span><br/>
                <span id="units-barrack-header-3"></span>
            </th>
            <th>
                <select id="barracks-levels-4" tabindex="15">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10" selected="selected">10</option>
                </select> <span class="near-field">lvl</span><br/>
                <span id="units-barrack-header-4"></span>
            </th>
        </tr>
    </thead>
    <tbody id="units-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2" class="data-secondary number">
                <label for="army-camps"><a href="http://clashofclans.wikia.com/wiki/Army_Camp"
                                           class="wikia-link"
                                           target="_blank">Army Camps</a> Capacity:</label></td>
            <td>
                <span id="units-space" class="result near-field"></span>
                <select id="army-camps" data-object-type="all" tabindex="19">
                    <option value="20">20</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="55">55</option>
                    <option value="60">60</option>
                    <option value="65">65</option>
                    <option value="70">70</option>
                    <option value="75">75</option>
                    <option value="80">80</option>
                    <option value="85">85</option>
                    <option value="90">90</option>
                    <option value="95">95</option>
                    <option value="100">100</option>
                    <option value="105">105</option>
                    <option value="110">110</option>
                    <option value="115">115</option>
                    <option value="120">120</option>
                    <option value="125">125</option>
                    <option value="130">130</option>
                    <option value="135">135</option>
                    <option value="140">140</option>
                    <option value="145">145</option>
                    <option value="150">150</option>
                    <option value="155">155</option>
                    <option value="160">160</option>
                    <option value="165">165</option>
                    <option value="170">170</option>
                    <option value="175">175</option>
                    <option value="180">180</option>
                    <option value="185">185</option>
                    <option value="190">190</option>
                    <option value="195">195</option>
                    <option value="200">200</option>
                    <option value="205">205</option>
                    <option value="210">210</option>
                    <option value="215">215</option>
                    <option value="220">220</option>
                    <option value="225">225</option>
                    <option value="230">230</option>
                    <option value="235">235</option>
                    <option value="240" selected="selected">240</option>
                </select>
            </td>
            <td id="units-cost" class="number result"></td>
            <td id="units-subtracted-cost" class="data-secondary"></td>
            <td id="units-time-barrack-1" class="number"></td>
            <td id="units-time-barrack-2" class="number"></td>
            <td id="units-time-barrack-3" class="number"></td>
            <td id="units-time-barrack-4" class="number"></td>
        </tr>
    </tfoot>
</table>

<h2>
    <a href="http://clashofclans.wikia.com/wiki/Dark_Barracks" class="wikia-link" target="_blank">Dark Barracks</a>
    <span class="inline-message inline-message_negative inline-message_after"
          style="display: none;"
          id="dark-barracks-exceeded">Too many units</span>
</h2>
<table id="dark" class="data">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th>
                Quantity <span class="data-secondary tooltip" title="Army Camps Free Capacity" id="dark-quantity"></span>
                <br/><span class="button data-secondary js-reset" data-reset-type="dark" data-scope="quantity">Reset</span>
            </th>
            <th><span class="cost-dark-elixir">Total</span></th>
            <th>
                Subtract
                <br/><span class="button data-secondary js-reset" data-reset-type="dark" data-scope="subtract">Reset</span>
            </th>
            <th>
                <select id="dark-barracks-levels-1" tabindex="20">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5" selected="selected">5</option>
                </select> <span class="near-field">lvl</span><br/>
                <span id="dark-barrack-header-1"></span>
            </th>
            <th>
                <select id="dark-barracks-levels-2" tabindex="25">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5" selected="selected">5</option>
                </select> <span class="near-field">lvl</span><br/>
                <span id="dark-barrack-header-2"></span>
            </th>
        </tr>
    </thead>
    <tbody id="dark-body">
    </tbody>
    <tfoot>
        <tr>
            <td></td>
            <td></td>
            <td id="dark-space" class="result"></td>
            <td id="dark-cost" class="number result"></td>
            <td id="dark-subtracted-cost" class="data-secondary"></td>
            <td id="dark-time-barrack-1" class="number"></td>
            <td id="dark-time-barrack-2" class="number"></td>
        </tr>
    </tfoot>
</table>

<h2><a href="http://clashofclans.wikia.com/wiki/Spell_Factory" class="wikia-link" target="_blank">Spell Factory</a></h2>
<table id="spells" class="data">
    <thead>
        <tr>
            <th>Spell</th>
            <th>Level</th>
            <th>Quantity <span class="data-secondary tooltip" title="Spell Factory Free Capacity" id="spells-quantity"></span></th>
            <th><span class="cost-gold">Total</span></th>
            <th>
                <select id="spell-factory-level" tabindex="35">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5" selected="selected">5</option>
                </select> <span class="near-field">lvl</span>
            </th>
        </tr>
    </thead>
    <tbody id="spells-body">
    </tbody>
    <tfoot>
        <tr>
            <td></td>
            <td></td>
            <td class="result" id="spells-space"></td>
            <td id="spells-cost" class="number result"></td>
            <td class="result number" id="spells-time"></td>
        </tr>
    </tfoot>
</table>

<div id="share-content">
    <h2 class="block-indented">Share Composition</h2>
    <p class="fixed-content">
        <input id="share-permalink" class="field-long" tabindex="1901"/>
    </p>
    <p>
        <a href="" target="_blank" id="share-twitter" class="button button_social" tabindex="1903">
            <span class="icon-twitter">Share Composition on Twitter</span>
        </a>
        <a href="" target="_blank" id="share-facebook" class="button button_after button_social" tabindex="1904">
            <span class="icon-facebook">Share Composition on Facebook</span>
        </a>
    </p>
    <p class="fixed-content block-indented">
        <textarea id="share-text" class="field-long" tabindex="1902" rows="2"></textarea>
    </p>
</div>

<h2 class="block-indented">Saved Compositions</h2>
<p>Values from the “Subtract” columns not saved.</p>
<p>
    <span id="save" class="button" tabindex="2000">Save Composition</span>

    <span id="already-saved" class="inline-message inline-message_after inline-message_closeable" style="display: none;" title="Click to hide">
        Already in the saved compositions
    </span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<script>/**
* @preserve Copyright 2012 Twitter, Inc.
* @license http://www.apache.org/licenses/LICENSE-2.0.txt
*/
var Hogan={};(function(a,b){function i(a){return String(a===null||a===undefined?"":a)}function j(a){return a=i(a),h.test(a)?a.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&#39;").replace(g,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(a,b,c){return""},v:j,t:i,render:function(b,c,d){return this.ri([b],c||{},d)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&typeof e=="string"&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d)){c(a,b,this);return}for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&a.length===0?!1:(typeof a=="function"&&(a=this.ls(a,b,c,d,e,f,g)),h=a===""||!!a,!d&&h&&b&&b.push(typeof a=="object"?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if(a==="."&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&typeof f=="object"&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(!d&&typeof f=="function"&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;for(var h=b.length-1;h>=0;h--){f=b[h];if(f&&typeof f=="object"&&a in f){e=f[a],g=!0;break}}return g?(!d&&typeof e=="function"&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=d==null?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);i=a.call(h);if(typeof i=="function"){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,c){var d=b[b.length-1],e=a.call(d);if(typeof e=="function"){e=i(e.call(d));if(this.c&&~e.indexOf("{{"))return this.c.compile(e,this.options).render(d,c)}return i(e)}};var c=/&/g,d=/</g,e=/>/g,f=/\'/g,g=/\"/g,h=/[&<>\"\']/,k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(a){function h(a){a.n.substr(a.n.length-1)==="}"&&(a.n=a.n.substring(0,a.n.length-1))}function i(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function j(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function k(a,b,c,d){var e=[],f=null,g=null;while(a.length>0){g=a.shift();if(g.tag=="#"||g.tag=="^"||l(g,d))c.push(g),g.nodes=k(a,g.tag,c,d),e.push(g);else{if(g.tag=="/"){if(c.length===0)throw new Error("Closing tag without opener: /"+g.n);f=c.pop();if(g.n!=f.n&&!m(g.n,f.n,d))throw new Error("Nesting error: "+f.n+" vs. "+g.n);return f.end=g.i,e}e.push(g)}}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return e}function l(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].o==a.n)return a.tag="#",!0}function m(a,b,c){for(var d=0,e=c.length;d<e;d++)if(c[d].c==a&&c[d].o==b)return!0}function n(a){return a.replace(f,"\\\\").replace(c,'\\"').replace(d,"\\n").replace(e,"\\r")}function o(a){return~a.indexOf(".")?"d":"f"}function p(a){var b="";for(var c=0,d=a.length;c<d;c++){var e=a[c].tag;e=="#"?b+=q(a[c].nodes,a[c].n,o(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):e=="^"?b+=r(a[c].nodes,a[c].n,o(a[c].n)):e=="<"||e==">"?b+=s(a[c]):e=="{"||e=="&"?b+=t(a[c].n,o(a[c].n)):e=="\n"?b+=v('"\\n"'+(a.length-1==c?"":" + i")):e=="_v"?b+=u(a[c].n,o(a[c].n)):e===undefined&&(b+=v('"'+n(a[c])+'"'))}return b}function q(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+n(b)+'",c,p,1),'+"c,p,0,"+d+","+e+',"'+f+'")){'+"_.rs(c,p,"+"function(c,p,_){"+p(a)+"});c.pop();}"}function r(a,b,c){return"if(!_.s(_."+c+'("'+n(b)+'",c,p,1),c,p,1,0,0,"")){'+p(a)+"};"}function s(a){return'_.b(_.rp("'+n(a.n)+'",c,p,"'+(a.indent||"")+'"));'}function t(a,b){return"_.b(_.t(_."+b+'("'+n(a)+'",c,p,0)));'}function u(a,b){return"_.b(_.v(_."+b+'("'+n(a)+'",c,p,0)));'}function v(a){return"_.b("+a+");"}var b=/\S/,c=/\"/g,d=/\n/g,e=/\r/g,f=/\\/g,g={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(c,d){function w(){p.length>0&&(q.push(new String(p)),p="")}function x(){var a=!0;for(var c=t;c<q.length;c++){a=q[c].tag&&g[q[c].tag]<g._v||!q[c].tag&&q[c].match(b)===null;if(!a)return!1}return a}function y(a,b){w();if(a&&x())for(var c=t,d;c<q.length;c++)q[c].tag||((d=q[c+1])&&d.tag==">"&&(d.indent=q[c].toString()),q.splice(c,1));else b||q.push({tag:"\n"});r=!1,t=q.length}function z(a,b){var c="="+v,d=a.indexOf(c,b),e=i(a.substring(a.indexOf("=",b)+1,d)).split(" ");return u=e[0],v=e[1],d+c.length-1}var e=c.length,f=0,k=1,l=2,m=f,n=null,o=null,p="",q=[],r=!1,s=0,t=0,u="{{",v="}}";d&&(d=d.split(" "),u=d[0],v=d[1]);for(s=0;s<e;s++)m==f?j(u,c,s)?(--s,w(),m=k):c.charAt(s)=="\n"?y(r):p+=c.charAt(s):m==k?(s+=u.length-1,o=g[c.charAt(s+1)],n=o?c.charAt(s+1):"_v",n=="="?(s=z(c,s),m=f):(o&&s++,m=l),r=s):j(v,c,s)?(q.push({tag:n,n:i(p),otag:u,ctag:v,i:n=="/"?r-v.length:s+u.length}),p="",s+=v.length-1,m=f,n=="{"&&(v=="}}"?s++:h(q[q.length-1]))):p+=c.charAt(s);return y(r,!0),q},a.generate=function(b,c,d){var e='var _=this;_.b(i=i||"");'+p(b)+"return _.fl();";return d.asString?"function(c,p,i){"+e+";}":new a.Template(new Function("c","p","i",e),c,a,d)},a.parse=function(a,b,c){return c=c||{},k(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}(typeof exports!="undefined"?exports:Hogan)</script>

<script>var templates={};templates.item_row=new Hogan.Template(function(e,t,a){var n=this;return n.b(a=a||""),n.b('    <tr id="'),n.b(n.v(n.f("rowId",e,t,0))),n.b('">'),n.b("\n"+a),n.b("        <td>"),n.b("\n"+a),n.b('            <a href="'),n.b(n.v(n.f("titleLink",e,t,0))),n.b('" class="wikia-link" target="_blank">'),n.b(n.v(n.f("title",e,t,0))),n.b("</a>"),n.b("\n"+a),n.b("        </td>"),n.b("\n"+a),n.b("        <td>"),n.b("\n"+a),n.b('            <select id="'),n.b(n.v(n.f("levelId",e,t,0))),n.b('" tabindex="'),n.b(n.v(n.f("tabIndexLevel",e,t,0))),n.b('">'),n.b("\n"+a),n.s(n.f("levelContent",e,t,1),e,t,0,249,330,"{{ }}")&&(n.rs(e,t,function(e,t,a){a.b('                    <option value="'),a.b(a.v(a.f("value",e,t,0))),a.b('">'),a.b(a.v(a.f("text",e,t,0))),a.b("</option>"),a.b("\n")}),e.pop()),n.b("            </select>"),n.b("\n"+a),n.b("        </td>"),n.b("\n"+a),n.b("        <td>"),n.b("\n"+a),n.s(n.f("spells",e,t,1),e,t,0,420,686,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('                <select id="'),n.b(n.v(n.f("id",e,t,0))),n.b('" tabindex="'),n.b(n.v(n.f("tabIndexValue",e,t,0))),n.b('" data-field-type="quantity">'),n.b("\n"+a),n.s(n.f("options",e,t,1),e,t,0,546,635,"{{ }}")&&(n.rs(e,t,function(e,t,a){a.b('                        <option value="'),a.b(a.v(a.f("value",e,t,0))),a.b('">'),a.b(a.v(a.f("text",e,t,0))),a.b("</option>"),a.b("\n")}),e.pop()),n.b("                </select>"),n.b("\n")}),e.pop()),n.s(n.f("spells",e,t,1),e,t,1,0,0,"")||(n.b('                <input type="text" pattern="[0-9]*" data-object-type="'),n.b(n.v(n.f("objectType",e,t,0))),n.b('" min="0" max="999" class="js-number" id="'),n.b(n.v(n.f("id",e,t,0))),n.b('" size="3" tabindex="'),n.b(n.v(n.f("tabIndexValue",e,t,0))),n.b('" data-field-type="quantity"/>'),n.b("\n")),n.b("        </td>"),n.b("\n"+a),n.b('        <td id="'),n.b(n.v(n.f("summaryId",e,t,0))),n.b('" class="number">'),n.b("\n"+a),n.b("        </td>"),n.b("\n"+a),n.s(n.f("subtractId",e,t,1),e,t,0,1045,1300,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("            <td>"),n.b("\n"+a),n.b('               <input type="text" pattern="[0-9]*" data-object-type="'),n.b(n.v(n.f("objectType",e,t,0))),n.b('" min="0" max="999" class="js-number" id="'),n.b(n.v(n.f("subtractId",e,t,0))),n.b('" size="3" tabindex="'),n.b(n.v(n.f("tabIndexSubtract",e,t,0))),n.b('" data-field-type="subtract"/>'),n.b("\n"+a),n.b("            </td>"),n.b("\n")}),e.pop()),n.s(n.f("barracksTimes",e,t,1),e,t,0,1342,1415,"{{ }}")&&(n.rs(e,t,function(e,t,a){a.b('            <td id="'),a.b(a.v(a.f("barrackQuantityId",e,t,0))),a.b('" class="number"></td>'),a.b("\n")}),e.pop()),n.s(n.f("spells",e,t,1),e,t,0,1453,1484,"{{ }}")&&(n.rs(e,t,function(e,t,a){a.b("            <td></td>"),a.b("\n")}),e.pop()),n.b("    </tr>"),n.fl()}),templates.saved_list_item=new Hogan.Template(function(e,t,a){var n=this;return n.b(a=a||""),n.b('<div class="saved-list__item" id="saved-list-item-'),n.b(n.v(n.f("index",e,t,0))),n.b('">'),n.b("\n"+a),n.s(n.f("hasCapacity",e,t,1),e,t,0,82,194,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('        <div class="saved-list__item-result">'),n.b("\n"+a),n.b("            "),n.b(n.v(n.f("totalCapacity",e,t,0))),n.b(" / "),n.b(n.v(n.f("armyCamps",e,t,0))),n.b("\n"+a),n.b("        </div>"),n.b("\n")}),e.pop()),n.b("\n"+a),n.s(n.f("hasUnits",e,t,1),e,t,0,229,574,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('        <table class="saved-list__table">'),n.b("\n"+a),n.s(n.f("units",e,t,1),e,t,0,294,445,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("                <tr>"),n.b("\n"+a),n.b('                    <td class="number">'),n.b(n.v(n.f("quantity",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                    <td>"),n.b(n.v(n.f("name",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                </tr>"),n.b("\n")}),e.pop()),n.b("        </table>"),n.b("\n"+a),n.b('        <div class="saved-list__item-title"><span class="cost-elixir">'),n.b(n.v(n.f("totalCost",e,t,0))),n.b("</span></div>"),n.b("\n")}),e.pop()),n.b("\n"+a),n.s(n.f("hasDark",e,t,1),e,t,0,605,958,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('        <table class="saved-list__table">'),n.b("\n"+a),n.s(n.f("dark",e,t,1),e,t,0,669,820,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("                <tr>"),n.b("\n"+a),n.b('                    <td class="number">'),n.b(n.v(n.f("quantity",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                    <td>"),n.b(n.v(n.f("name",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                </tr>"),n.b("\n")}),e.pop()),n.b("        </table>"),n.b("\n"+a),n.b('        <div class="saved-list__item-title"><span class="cost-dark-elixir">'),n.b(n.v(n.f("darkCost",e,t,0))),n.b("</span>&nbsp;</div>"),n.b("\n")}),e.pop()),n.b("\n"+a),n.s(n.f("hasSpells",e,t,1),e,t,0,990,1453,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('        <div class="saved-list__item-result">'),n.b("\n"+a),n.b("            "),n.b(n.v(n.f("spellsCapacity",e,t,0))),n.b(" / "),n.b(n.v(n.f("spellsFactoryLevel",e,t,0))),n.b("\n"+a),n.b("        </div>"),n.b("\n"+a),n.b('        <table class="saved-list__table">'),n.b("\n"+a),n.s(n.f("spells",e,t,1),e,t,0,1173,1324,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("                <tr>"),n.b("\n"+a),n.b('                    <td class="number">'),n.b(n.v(n.f("quantity",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                    <td>"),n.b(n.v(n.f("name",e,t,0))),n.b("</td>"),n.b("\n"+a),n.b("                </tr>"),n.b("\n")}),e.pop()),n.b("        </table>"),n.b("\n"+a),n.b('        <div class="saved-list__item-title"><span class="cost-gold">'),n.b(n.v(n.f("spellsCost",e,t,0))),n.b("</span></div>"),n.b("\n")}),e.pop()),n.b("\n"+a),n.b('    <div class="saved-list__actions">'),n.b("\n"+a),n.b('        <span class="button js-saved-load"'),n.b("\n"+a),n.b('              data-num="'),n.b(n.v(n.f("index",e,t,0))),n.b('"'),n.b("\n"+a),n.b('              tabindex="'),n.b(n.v(n.f("tabIndexLoad",e,t,0))),n.b('"'),n.b("\n"+a),n.b('              title="Current composition will be lost">'),n.b("\n"+a),n.b("            Load"),n.b("\n"+a),n.b("        </span>"),n.b("\n"+a),n.b('        <span class="button button_after js-saved-delete"'),n.b("\n"+a),n.b('              data-num="'),n.b(n.v(n.f("index",e,t,0))),n.b('"'),n.b("\n"+a),n.b('              tabindex="'),n.b(n.v(n.f("tabIndexDelete",e,t,0))),n.b('">'),n.b("\n"+a),n.b("            Delete"),n.b("\n"+a),n.b("        </span>"),n.b("\n"+a),n.b("    </div>"),n.b("\n"+a),n.b("</div>"),n.fl()});</script>


<script>!function(t){"use strict";var e={};t.mk=e,e.toArray=function(t){var e,n,r=[];for(e=0,n=t.length;n>e;e++)r.push(t[e]);return r},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this,r=e.toArray(arguments).slice(1);return function(){return n.apply(t,r.concat(e.toArray(arguments)))}}),e.objectIterate=function(t,e){var n;for(n in t)if(t.hasOwnProperty(n)&&e(n,t[n])===!1)break},e.objectCopy=function(t){var n=t.constructor();return e.objectIterate(t,function(t,e){n[t]=e}),n},e.numberFormat=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.convertToTitle=function(t){return t.replace("_"," ").replace(/-/g,".")},e.getWikiaLink=function(t){return"http://clashofclans.wikia.com/wiki/"+t.replace(" ","_")},e.getFormattedTime=function(t,e){var n="",r=t;if(r>3599&&(n+=Math.floor(r/3600)+"h ",r%=3600),r>59){var i=Math.floor(r/60);r%=60,e&&r>0&&i++,n+=i+"m "}else n+="0m ";return""!==n&&e||(n+=r+"s"),n},e.Dict=function(t){this.data=t,this.get=function(t,e){var n=this.data[t];return void 0===e||void 0!==n&&null!==n?n:e},this.set=function(t,e){this.data[t]=e},this.getAll=function(){return this.data}},e.MultiDict=function(t){this.entries=[],this.retrieve=function(t){return this.entries[t]||new e.Dict({})},this.update=function(t,e){this.entries[t]=e},this.insert=function(t){this.entries.push(new e.Dict(t))},this.remove=function(t){this.entries.splice(t,1)},this.getAll=function(){return this.entries.map(function(t){return t.getAll()})},this.forEach=function(t){this.entries.forEach(t)},t.forEach(this.insert.bind(this))},e.selectAll=function(e){-1!==["input","textarea"].indexOf(e.target.tagName.toLowerCase())&&t.setTimeout(function(t){t.setSelectionRange(0,t.value.length)}.bind(null,e.target),10)},e.infoMessage=function(e,n){var r=document.getElementById(e),i=function(t){t&&(t.preventDefault(),t.stopPropagation()),r.style.display="none"};return r.addEventListener("click",i,!1),r.addEventListener("touchend",i,!1),{show:function(){r.style.display="inline-block",n&&t.setTimeout(function(){r.style.display="none"},2e3)},hide:i}}}(window);</script>
<script>!function(e,t,a){"use strict";a.calc={},a.calc.types={units:{Barbarian:[20,[25,40,60,80,100,150],1,1],Archer:[25,[50,80,120,160,200,300],1,2],Goblin:[30,[25,40,60,80,100],1,3],Giant:[120,[500,1e3,1500,2e3,2500,3e3],5,4],Wall_Breaker:[120,[1e3,1500,2e3,2500,3e3,3500],2,5],Balloon:[600,[2e3,2500,3e3,3500,4e3,4500],5,6],Wizard:[600,[1500,2e3,2500,3e3,3500],4,7],Healer:[900,[5e3,6e3,8e3,1e4],14,8],Dragon:[1800,[25e3,3e4,36e3,42e3],20,9],"P-E-K-K-A-":[2700,[3e4,35e3,42e3,5e4],25,10]},dark:{Minion:[45,[6,7,8,9,10],2,1],"Hog Rider":[300,[30,35,40,45,50],5,2],Valkyrie:[900,[70,100,130,160],8,3],Golem:[2700,[450,525,600,675,750],30,4],Witch:[1200,[250,350],12,5]},spells:{Lightning:[1800,[15e3,16500,18e3,2e4,22e3,24e3],1,1],Healing:[1800,[2e4,22e3,24e3,26500,29e3,32e3],1,2],Rage:[2700,[3e4,33e3,36e3,4e4,44e3],1,3],Jump:[2700,[3e4,38e3],1,4],Freeze:[2700,[35e3,4e4,45e3],1,5]}},a.calc.saveMappingKeys=["barracks-levels-1","barracks-levels-2","barracks-levels-3","barracks-levels-4","dark-barracks-levels-1","dark-barracks-levels-2","armyCamps","spellFactoryLevel","Barbarian","Archer","Goblin","Giant","Wall_Breaker","Balloon","Wizard","Healer","Dragon","P-E-K-K-A-","Barbarian-level","Archer-level","Goblin-level","Giant-level","Wall_Breaker-level","Balloon-level","Wizard-level","Healer-level","Dragon-level","P-E-K-K-A--level","Barbarian-subtract","Archer-subtract","Goblin-subtract","Giant-subtract","Wall_Breaker-subtract","Balloon-subtract","Wizard-subtract","Healer-subtract","Dragon-subtract","P-E-K-K-A--subtract","Lightning","Healing","Rage","Jump","Lightning-level","Healing-level","Rage-level","Jump-level","Minion","Hog Rider","Valkyrie","Golem","Minion-level","Hog Rider-level","Valkyrie-level","Golem-level","Minion-subtract","Hog Rider-subtract","Valkyrie-subtract","Golem-subtract","Freeze","Freeze-level","Witch","Witch-level","Witch-subtract"],a.calc.dataObjectToArray=function(e){var t=[];return a.calc.saveMappingKeys.forEach(function(a){var r;r=e.hasOwnProperty(a)?e[a]:0,t.push(r)}),t},a.calc.dataArrayToObject=function(e){var t={};return a.calc.saveMappingKeys.forEach(function(a,r){t[a]=void 0===e[r]?0:e[r]}),t},a.calc.DataStorage=function(t){this.key=t,this.load=function(t){var r=e.localStorage.getItem(this.key);return r=r&&JSON.parse(r)||[],t?r:r=r.map(function(e){return a.calc.dataArrayToObject(e)})},this.save=function(t){var r=t.map(function(e){return a.calc.dataObjectToArray(e)});e.localStorage.setItem(this.key,JSON.stringify(r))}},a.calc.BarracksContainer=function(e,r,n){this.barracks=[],this.maxCount=e,this.queueLengths=n;var i;for(i=1;i<=this.maxCount;i++){var c=t.getElementById(r+"-"+i);this.barracks.push(c)}this.setDefaults=function(){this.barracks.forEach(function(e){var t=a.calc.savedData.get(e.getAttribute("id"));void 0!==t&&null!==t&&(e.options[t].selected=!0)})},this.updateSavedData=function(){this.barracks.forEach(function(e){a.calc.savedData.set(e.getAttribute("id"),e.selectedIndex)})},this.getMaxLevel=function(){return Math.max.apply(null,this.barracks.map(function(e){return parseInt(e.value,10)}))},this.getAllNormalized=function(){return this.barracks.map(function(e){return{level:parseInt(e.value,10),queueLength:this.queueLengths[e.value]}},this)},this.getQueue=function(){return this.barracks.map(function(e){return{num:e.getAttribute("id").slice(-1),time:0,space:0,maxSpace:this.queueLengths[e.value],units:{},level:parseInt(e.value,10)}},this)},this.getElements=function(){return this.barracks},this.getMaxCount=function(){return this.maxCount},this.getCapLevel=function(){return this.barracks[0].options[this.barracks[0].options.length-1].value},this.getActiveCount=function(){return this.barracks.filter(function(e){return e.value>0}).length}}}(window,document,window.mk);</script><script>!function(e){"use strict";e.top!==e.self&&e.top.location.replace(e.self.location.href);var t=["m","k","l","n",".","r","u"].join("");e.location.host!==t&&0!==e.location.host.indexOf("192.168.1.")&&0!==e.location.host.indexOf("localhost")&&e.location.replace("http://"+t+"/clash-of-clans/")}(window,document,window.mk);</script>
<script>!function(e,t){"use strict";if(e.localStorage&&e.localStorage.getItem("savedData")&&!e.localStorage.getItem("data")){var a=e.localStorage.getItem("savedData");a=a&&JSON.parse(a)||{},a.armyCamps&&(a.armyCamps=parseInt(a.armyCamps,10));var r=e.localStorage.getItem("savedCalculations");r=r&&JSON.parse(r)||[];var n=function(e){var t=e.barracksLevels||[];t.forEach(function(t,a){e["barracks-levels-"+(a+1)]=t}),delete e.barracksLevels;var a=e.darkBarracksLevels||[];return a.forEach(function(t,a){e["dark-barracks-levels-"+(a+1)]=t}),delete e.darkBarracksLevels,e},i=[t.calc.dataObjectToArray(n(a))];r.forEach(function(e){e.armyCamps&&(e.armyCamps=parseInt(e.armyCamps,10));var a,r,o=t.calc.dataObjectToArray(n(e)),c=JSON.stringify(o);for(a=1,r=i.length;r>a;a++){var l=JSON.stringify(i[a]);if(c===l)return}i.push(o)}),e.localStorage.setItem("data",JSON.stringify(i))}if(e.localStorage.getItem("savedData")&&(e.localStorage.removeItem("savedData"),e.localStorage.removeItem("savedCalculations")),e.localStorage.getItem("data")&&!e.localStorage.getItem("data2")){var o,c,l=JSON.parse(e.localStorage.getItem("data"));for(o=1,c=l.length;c>o;o++)t.calc.saveMappingKeys.forEach(function(e,t){-1!==e.indexOf("subtract")&&(l[o][t]=0)});for(o=1,c=l.length;c>o;o++){var s,u,g=JSON.stringify(l[o]);for(s=o+1,u=l.length;u>s;s++){var h=JSON.stringify(l[s]);g===h&&(l.splice(s,1),s--,c--,u--)}}e.localStorage.setItem("data2",JSON.stringify(l)),e.localStorage.removeItem("data")}if(e.localStorage.getItem("data2")&&!e.localStorage.getItem("data3")){var f=JSON.parse(e.localStorage.getItem("data2"));f=f.map(function(e){return e.splice(46,4),e[64]&&e.splice(64,1),e}),e.localStorage.setItem("data3",JSON.stringify(f)),e.localStorage.removeItem("data2")}}(window,window.mk);</script>
<script>!function(e,t,a){"use strict";a.calc.savedDataStorage=new a.calc.DataStorage("data3"),a.calc.savedDataAll=new a.MultiDict(a.calc.savedDataStorage.load()),a.calc.savedData=a.calc.savedDataAll.retrieve(0),a.calc.allBarracks={units:new a.calc.BarracksContainer(4,"barracks-levels",[0,20,25,30,35,40,45,50,55,60,75]),dark:new a.calc.BarracksContainer(2,"dark-barracks-levels",[0,40,50,60,70,70])},a.calc.armyCamps=t.getElementById("army-camps"),a.calc.spellFactoryLevel=t.getElementById("spell-factory-level");var r={};a.objectIterate(a.calc.types,function(e,t){r[e]=[],a.objectIterate(t,function(t,a){r[e].unshift(a.concat(t))})});var n={units:0,dark:0},l=function(e){a.calc.allBarracks[e].getAllNormalized().forEach(function(a,r){var n;n=0===parseInt(a.level,10)?"":'<span class="data-secondary tooltip" title="Maximum Queue Length">(max '+a.queueLength+")</span>",t.getElementById(e+"-barrack-header-"+(r+1)).innerHTML=n})},c=function(e,a,r){var n=e-a;0>n&&(n='<span class="limit-exceeded">'+n+"</span>"),t.getElementById(r+"-quantity").innerHTML="("+n+" free)";var l=a;a>e&&(l='<span class="limit-exceeded">'+a+"</span>"),l=l+" / "+("units"!==r?e:""),t.getElementById(r+"-space").innerHTML=l},i=function(e,t){return e.time<t.time?-1:e.time>t.time?1:e.space<t.space?-1:e.space>t.space?1:e.maxSpace<t.maxSpace?-1:e.maxSpace>t.maxSpace?1:0},s=function(e,t){return e.level<t.level?-1:e.level>t.level?1:i(e,t)},o=function(e,t,a,r,n){var l=e.filter(function(e){return e.level>=t&&e.space+a<=e.maxSpace});if(!l.length)return null;if(l.length>1){if(1===a){var c=l.filter(function(e){return e.time+r<=n});if(c.length)return c.length>1&&c.sort(s),c[0]}l.sort(i)}return l[0]},u=function(e,t,a){var r,n,l=!1;for(r=0,n=t.length;n>r;r++){var c,i=t[r],s=i[2],u=i[3],v=i[4],d=null;for(c=0;c<i[1];c++){var m=!0;if(d){var g=d.time+u,p=d.space+v;1===v&&a>=g&&p<=d.maxSpace/1.7&&(m=!1)}if(m&&(d=o(e,s,v,u,a)),null===d){l=!0;break}d.units[i[0]]?d.units[i[0]]++:d.units[i[0]]=1,d.time+=u,d.space+=v}}return!l},v=function(e,n,l){var c,i=l.length;if(e){t.getElementById(n+"-barracks-exceeded").style.display="none";var s=0,o=1;for(c=0;i>c;c++){var u,v=l[c];for(u in v.units)v.units[u]>0&&(t.getElementById("quantity-"+r[n][u][4]+"-"+v.num).textContent="×"+v.units[u]);v.time>s&&(s=v.time,o=v.num),t.getElementById(n+"-time-barrack-"+v.num).textContent=v.time?a.getFormattedTime(v.time):""}var d=t.getElementById(n+"-time-barrack-"+o);d.innerHTML='<span class="result">'+d.textContent+"</span>"}else for(t.getElementById(n+"-barracks-exceeded").style.display="",c=0;i>c;c++)t.getElementById(n+"-time-barrack-"+l[c].num).textContent=""},d=function(e,l){var i;for(i=l.capLevel;i>=1;i--)t.getElementById(e+"-building-level-"+i).style.display=i>l.levelValue?"none":"";var s,o,d=0,m=0,g=0,p=0,f=0,h=[];for(s=0,o=r[e].length;o>s;s++){var y=r[e][s];if(!(y[3]>l.levelValue)){var k=y[4],b=t.getElementById(k),I=parseInt(b.value,10)||0;0>I&&(I=0),""!==b.value&&(b.value=I);var S=k+"-level",B=t.getElementById(S),E=t.getElementById(k+"-summary"),w=B.value,x=w*I;if(E.textContent=x?a.numberFormat(x):0,d+=x,g+=y[2]*I,"spells"===e)p+=y[0]*I;else{var L;for(L=1;L<=a.calc.allBarracks[e].getMaxCount();L++)t.getElementById("quantity-"+k+"-"+L).textContent="";var A=k+"-subtract",D=t.getElementById(A),C=parseInt(D.value,10)||0;0>C&&(C=0),""!==D.value&&(D.value=C);var M=I-C;0>M&&(M=0),M>0&&(h.push([s,I-C,y[3],y[0],y[2]]),f=Math.max(f,y[0]),p+=y[0]*M),m+=w*M,a.calc.savedData.set(A,C)}a.calc.savedData.set(k,I),a.calc.savedData.set(S,B.selectedIndex)}}if(t.getElementById(e+"-cost").textContent=a.numberFormat(d),"spells"===e)c(l.space,g,e),p>0&&(t.getElementById(e+"-time").textContent=a.getFormattedTime(p,!0));else{var O=a.calc.allBarracks[e].getQueue(),N=Math.max(Math.ceil(p/a.calc.allBarracks[e].getActiveCount()),f),T=u(O,h,N);v(T,e,O),n[e]+=g;var F=t.getElementById(e+"-subtracted-cost");m===d?F.textContent="":F.innerHTML="− "+a.numberFormat(d-m)+' = <span class="result">'+a.numberFormat(m)+"</span>"}},m=null,g=null;a.calc.calculate=function(e){if(clearTimeout(m),clearTimeout(g),m=null,"all"===e||"spells"!==e){("all"===e||"barrack-units"===e)&&l("units"),("all"===e||"barrack-dark"===e)&&l("dark");var t=parseInt(a.calc.armyCamps.value,10);("all"===e||"units"===e||"barrack-units"===e)&&(n.units=0,d("units",{levelValue:a.calc.allBarracks.units.getMaxLevel(),capLevel:a.calc.allBarracks.units.getCapLevel()})),("all"===e||"dark"===e||"barrack-dark"===e)&&(n.dark=0,d("dark",{levelValue:a.calc.allBarracks.dark.getMaxLevel(),capLevel:a.calc.allBarracks.dark.getCapLevel()}));var r=n.units+n.dark;c(t,r,"units"),c(t,r,"dark"),a.calc.savedData.set("armyCamps",t),a.calc.allBarracks.units.updateSavedData(),a.calc.allBarracks.dark.updateSavedData()}("all"===e||"spells"===e)&&(d("spells",{levelValue:parseInt(a.calc.spellFactoryLevel.value,10),space:a.calc.spellFactoryLevel.value,capLevel:a.calc.spellFactoryLevel.options[a.calc.spellFactoryLevel.options.length-1].value}),a.calc.savedData.set("spellFactoryLevel",a.calc.spellFactoryLevel.selectedIndex)),a.calc.savedDataAll.update(0,a.calc.savedData),a.calc.savedDataStorage.save(a.calc.savedDataAll.getAll()),a.calc.placeShareContent()}}(window,document,window.mk);</script>
<script>!function(e,t,a){"use strict";var r=templates.saved_list_item,n=function(){var e=[];a.calc.savedDataAll.forEach(function(t,n){if(0!==n){var l={index:n,tabIndexLoad:n+3e3+1,tabIndexDelete:n+3e3+2},c=[],s=0,i=0,o=t.get("barracksLevels",[10,10,10,10]);a.objectIterate(a.calc.types.units,function(e,r){var n=parseInt(t.get(e),10)||0,l=Math.max.apply(null,o.map(function(e,t){return 0===t?e+1:e}));n>0&&r[3]<=l&&(c.push({name:a.convertToTitle(e),quantity:n}),s+=r[1][t.get(e+"-level")]*n,i+=r[2]*n)}),c.length&&(l.hasUnits={units:c,totalCost:a.numberFormat(s)});var u=t.get("darkBarracksLevels",[4,4]),v=Math.max.apply(null,u);if(v>0){var d=[],g=0;a.objectIterate(a.calc.types.dark,function(e,r){var n=parseInt(t.get(e),10)||0;n>0&&r[3]<=v&&(d.push({name:a.convertToTitle(e),quantity:n}),g+=r[1][t.get(e+"-level")]*n,i+=r[2]*n)}),d.length&&(l.hasDark={dark:d,darkCost:a.numberFormat(g)})}if(i>0&&(l.hasCapacity={totalCapacity:i,armyCamps:t.get("armyCamps")}),t.get("spellFactoryLevel")>0){var m=[],p=0,f=0;a.objectIterate(a.calc.types.spells,function(e,r){var n=parseInt(t.get(e),10)||0;n>0&&r[3]<=t.get("spellFactoryLevel")&&(m.push({name:a.convertToTitle(e),quantity:n}),p+=r[1][t.get(e+"-level")]*n,f+=r[2]*n)}),m.length&&(l.hasSpells={spells:m,spellsCost:a.numberFormat(p),spellsCapacity:f,spellsFactoryLevel:t.get("spellFactoryLevel")})}e.push(r.render(l))}});var l=t.getElementById("saved-list-content");l.innerHTML=e.join("");var c=t.getElementById("barracks-anchor"),s=function(e){e.preventDefault(),e.stopPropagation();var t=a.objectCopy(a.calc.savedDataAll.retrieve(e.target.getAttribute("data-num")).getAll());a.calc.savedData=new a.Dict(t),a.calc.setDefaults(),a.calc.calculate("all"),n(),c.scrollIntoView()};a.toArray(l.getElementsByClassName("js-saved-load")).forEach(function(e){e.addEventListener("click",s,!1),e.addEventListener("touchend",s,!1)});var i=function(e){e.preventDefault(),e.stopPropagation(),a.calc.savedDataAll.remove(e.target.getAttribute("data-num")),a.calc.savedDataStorage.save(a.calc.savedDataAll.getAll()),n()};a.toArray(l.getElementsByClassName("js-saved-delete")).forEach(function(e){e.addEventListener("click",i,!1),e.addEventListener("touchend",i,!1)})},l=a.infoMessage("already-saved",!0);a.calc.save=function(e,t){e&&(e.preventDefault(),e.stopPropagation(),e.target.blur()),l.hide();var r=a.calc.savedDataStorage.load(!0);if(r[0]){a.calc.saveMappingKeys.forEach(function(e,t){-1!==e.indexOf("subtract")&&(r[0][t]=0)});var c,s,i=JSON.stringify(r[0]);for(c=1,s=r.length;s>c;c++){var o=JSON.stringify(r[c]);if(i===o)return t!==!1&&l.show(),!1}var u=a.objectCopy(a.calc.savedData.getAll());return a.calc.savedDataAll.insert(u),a.calc.savedDataStorage.save(a.calc.savedDataAll.getAll()),n(),!0}};var c=t.getElementById("save");c.addEventListener("click",a.calc.save,!1),c.addEventListener("touchend",a.calc.save,!1),c.addEventListener("keydown",function(e){var t=e.keyCode||e.which;13===t&&a.calc.save()},!1),n()}(window,document,window.mk);</script>
<script>!function(e,t,a){"use strict";var r=function(){if(-1!==e.location.search.indexOf("?l=")){var t=a.infoMessage("view-shared"),r=e.location.search.substr(3);r=decodeURIComponent(r),a.calc.sharedLink=r,r=r.replace(/[a-z]/g,","),r=r.replace(/,(?=,)/g,",0"),r="["+r+"]",r=JSON.parse(r),r=a.calc.dataArrayToObject(r),e.history.replaceState&&e.history.replaceState({},"",e.location.protocol+"//"+e.location.host+e.location.pathname),a.calc.save(null,!1),a.calc.savedData=new a.Dict(r),t.show()}};r();var n=t.getElementById("share-twitter"),l=t.getElementById("share-facebook"),c=t.getElementById("share-permalink");c.addEventListener("click",a.selectAll,!1);var s=function(){var e="http://mkln.ru/clash-of-clans/?l=",t=a.calc.savedData.getAll();t=a.calc.dataObjectToArray(t),t=JSON.stringify(t),t=t.replace(/\b(?:null|0)\b/g,""),t=t.substr(1,t.length-2),t=t.replace(/,+$/,"");var r=97;t=t.replace(/,/g,function(){var e=String.fromCharCode(r);return 122===r?r=97:r++,e}),c.value=e+t;var s=encodeURIComponent(e+t);n.setAttribute("href","https://twitter.com/share?url="+s+"&via=ClashCalc&hashtags=ClashOfClans"),l.setAttribute("href","https://www.facebook.com/sharer/sharer.php?u="+s)},i=t.getElementById("share-text");i.addEventListener("click",a.selectAll,!1);var o={1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"},u={units:"Elixir",dark:"Dark Elixir",spells:"Gold"},v=function(){var e=a.calc.savedData.getAll(),r=[],n=[];return a.objectIterate(a.calc.types,function(l,c){var s;s="spells"===l?parseInt(a.calc.spellFactoryLevel.value,10):a.calc.allBarracks[l].getMaxLevel(),a.objectIterate(c,function(t,n){e[t]>0&&n[3]<=s&&r.push(a.convertToTitle(t)+o[e[t+"-level"]+1]+" ×"+e[t])});var i=t.getElementById(l+"-cost").textContent;"0"!==i&&n.push(i+" "+u[l])}),r.length?(i.value=r.join(", ")+" — "+n.join(", "),!0):!1},d=t.getElementById("share-content");a.calc.placeShareContent=function(){v()?(s(),d.style.display=""):d.style.display="none"}}(window,document,window.mk);</script>
<script>!function(e,t,a){"use strict";a.calc.setDefaults=function(){a.calc.allBarracks.units.setDefaults(),a.calc.allBarracks.dark.setDefaults();var e=a.calc.savedData.get("armyCamps",a.calc.armyCamps.value),l=a.calc.armyCamps.querySelector('option[value="'+e+'"]');l&&(l.selected=!0);var r=a.calc.savedData.get("spellFactoryLevel",a.calc.spellFactoryLevel.selectedIndex);a.calc.spellFactoryLevel.options[r].selected=!0;var n=function(e){a.objectIterate(a.calc.types[e],function(l){var r=l+"-level",n=t.getElementById(r);n.options[a.calc.savedData.get(r,n.selectedIndex)].selected=!0;var c=t.getElementById(l);if("spells"===e)c.options[a.calc.savedData.get(l,c.selectedIndex)].selected=!0;else{c.value=a.calc.savedData.get(l)||0;var s=l+"-subtract";t.getElementById(s).value=a.calc.savedData.get(s)||0}})};n("units"),n("spells"),n("dark")},a.objectIterate(a.calc.allBarracks,function(e,t){t.getElements().forEach(function(t){t.addEventListener("change",a.calc.calculate.bind(null,"barrack-"+e),!1)})}),a.calc.armyCamps.addEventListener("change",a.calc.calculate.bind(null,"all"),!1),a.calc.spellFactoryLevel.addEventListener("change",a.calc.calculate.bind(null,"spells"),!1);var l=templates.item_row,r=function(e,r){var n=function(e,t){return{value:e,text:t+1}},c=[];if("spells"===e){var s;for(s=0;6>s;s++)c.push({value:s,text:s})}var i=t.getElementById(e+"-body");a.objectIterate(a.calc.types[e],function(s,o){var u=a.convertToTitle(s),d={id:s,title:u,titleLink:a.getWikiaLink(u+("spells"===e?"_Spell":"")),levelId:s+"-level",levelContent:o[1].map(n),summaryId:s+"-summary",rowId:e+"-building-level-"+o[3],tabIndexLevel:r+o[3],tabIndexValue:r+1e3+o[3],objectType:e};if("spells"===e&&(d.spells={options:c}),"units"===e||"dark"===e){var v,p=[];for(v=1;v<=a.calc.allBarracks[e].getMaxCount();v++)p.push({barrackQuantityId:"quantity-"+s+"-"+v});d.barracksTimes=p,d.subtractId=s+"-subtract",d.tabIndexSubtract=r+4e3+o[3]}var m=l.render(d),g=t.createElement("div");g.innerHTML="<table>"+m+"</table>";var f=g.querySelector("tr");i.appendChild(f),t.getElementById(d.levelId).addEventListener("change",a.calc.calculate.bind(null,e),!1),t.getElementById(d.id).addEventListener("spells"===e?"change":"input",a.calc.calculate.bind(null,e),!1),("units"===e||"dark"===e)&&t.getElementById(d.subtractId).addEventListener("input",a.calc.calculate.bind(null,e),!1)})};r("units",100),r("dark",200),r("spells",300),a.calc.setDefaults(),a.calc.calculate("all")}(window,document,window.mk);</script>
<script>!function(e,t,a){"use strict";var l=function(e,t){var l=parseInt(e.value,10);e.value="+"===t?isNaN(l)?1:l+1:isNaN(l)||2>l?0:l-1,a.calc.calculate(e.getAttribute("data-object-type"))},n=null,r=null,c=function(t){t.preventDefault(),t.stopPropagation(),t.target.spinnerClicked=!0,r=e.setTimeout(function(t){t.spinnerClicked=!1,function a(){n=e.setTimeout(function(){l(t.spinnerTarget,t.textContent),a()},100)}()}.bind(null,t.target),500)},s=function(e){e.preventDefault(),e.stopPropagation(),e.target.spinnerClicked&&l(e.target.spinnerTarget,e.target.textContent),clearTimeout(r),clearInterval(n)},i=function(e,a){var l=t.createElement("span");l.className="button button_after button_middle",l.textContent="plus"===e?"+":"−",l.spinnerTarget=a,l.addEventListener("touchstart",c,!1),l.addEventListener("touchend",s,!1),l.addEventListener("mousedown",c,!1),l.addEventListener("mouseup",s,!1),a.nextSibling?a.parentNode.insertBefore(l,a.nextSibling):a.parentNode.appendChild(l)};a.toArray(t.getElementsByClassName("js-number")).forEach(function(e){e.addEventListener("focus",a.selectAll,!1),i("minus",e),i("plus",e),e.addEventListener("keydown",function(e){var t=e.keyCode||e.which;38===t?(l(e.target,"+"),e.preventDefault()):40===t&&(l(e.target,"-"),e.preventDefault())},!1)})}(window,document,window.mk);</script>
<script>!function(e,t,a){"use strict";var n=function(e){e.preventDefault(),e.stopPropagation();var n=e.target.getAttribute("data-reset-type");a.objectIterate(a.calc.types[n],function(a){var n=a,l=e.target.getAttribute("data-scope");"quantity"!==l&&(n+="-"+l),t.getElementById(n).value="0"}),a.calc.calculate(n)};a.toArray(t.getElementsByClassName("js-reset")).forEach(function(e){e.addEventListener("click",n,!1),e.addEventListener("touchend",n,!1)})}(window,document,window.mk);</script>

<script>!function(e,t,a){(t[a]=t[a]||[]).push(function(){try{t.yaCounter19642528=new Ya.Metrika({id:19642528,webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),window.mk.calc.sharedLink&&t.yaCounter19642528.reachGoal("SHARE",{l:window.mk.calc.sharedLink})}catch(e){}});var n=e.getElementsByTagName("script")[0],r=e.createElement("script"),l=function(){n.parentNode.insertBefore(r,n)};r.type="text/javascript",r.async=!0,r.src=("https:"==e.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",l,!1):l()}(document,window,"yandex_metrika_callbacks");</script>
<noscript><div><img src="//mc.yandex.ru/watch/19642528" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script>var _gaq=[["_setAccount","UA-37991363-1"],["_trackPageview"]];!function(e,t){var a=e.createElement(t),n=e.getElementsByTagName(t)[0];a.async=!0,a.src="//www.google-analytics.com/ga.js",n.parentNode.insertBefore(a,n)}(document,"script");</script>

<div class="list-content list-content_small fixed-content">
    <h3>What's New in Version 2.15 <a href="version-history.html" class="button button_after" target="_blank">Version History</a></h3>
    <ul>
        <li>Added a field with a textual representation of the current composition.</li>
        <li>“Share Composition” block does not displayed if no units or spells are selected.</li>
    </ul>
</div>

<div class="footer fixed-content">
    <p>
        If you find a bug please send an e-mail to <a href="mailto:clash-of-clans@mkln.ru">clash-of-clans@mkln.ru</a>.
    </p>
    <p>
        Please note this tool is only available at http://mkln.ru/clash-of-clans/.
        If you've seen it on other sites or in the iTunes App Store or anywhere else —
        is the result of the actions of fraudsters and thieves that have nothing to do with me
        and use my work without my permission, violating copyright.
    </p>
    <p>
        This work is licensed under a
        <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">
            Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.
    </p>
    <p>&copy; 2013 <a href="/en/">Mikhail Kalashnik</a></p>
</div>


</body>
</html>
