<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta property="fb:admins" content="splurov"/>
    <title>Clash of Clans — Troops and Spells Cost Calculator</title>
    <style>@font-face{font-family:'PT Serif';src:url('/fonts/PTF55F_W.woff') format('woff')}@font-face{font-family:'PT Serif Caption';src:url('/fonts/PTZ55F_W.woff') format('woff')}html,body{background:#fefefe;color:#222}body{font-family:'PT Serif',Georgia,serif;font-size:18px;line-height:1.5;margin:0;padding:20px 40px}a{white-space:nowrap}a:link{color:#4100f1;text-decoration:none}a:visited{color:#63008c;text-decoration:none}a:hover,a:active{text-decoration:underline}h1{font-size:28px;font-family:'PT Serif Caption',Georgia,sans-serif;font-weight:normal;margin:0 0 12px}h2{font-size:22px;font-family:'PT Serif Caption',Georgia,sans-serif;font-weight:normal;margin:18px 0 4px}p{margin:0 0 12px}.content{min-width:260px;max-width:520px}.photo{margin:8px 0 20px 20px;float:right;border-radius:10px}@media all and (max-width:560px){.photo{float:none;display:block;margin:0 auto 20px}}a.fn.url{color:#222;text-decoration:none}.footer{margin-top:30px;font-size:14px;color:#ccc}.footer a:link{text-decoration:underline;color:#ccc}.footer a:visited{text-decoration:underline;color:#ccc}.footer a:hover,.footer a:active{text-decoration:none}.hidden{display:none}</style>
    <style>body{padding:15px 30px;line-height:1.4}.field{font-family:'PT Serif',Georgia,serif;font-size:inherit}.units{border-spacing:0;margin-bottom:24px;border-left:1px solid #ddd;border-top:1px solid #ddd;margin-left:-11px;border-radius:10px}.units_common{margin-bottom:12px}.units th{text-align:left;padding:1px 10px 2px;font-weight:normal;font-size:18px;font-family:'PT Serif Caption',Georgia,serif;white-space:nowrap;border-bottom:1px solid #ddd;border-right:1px solid #ddd}.units thead tr:first-child th:first-child,.units_common tr:first-child td:first-child{border-top-left-radius:10px}.units thead tr:first-child th:last-child,.units_common tr:first-child td:last-child{border-top-right-radius:10px}.units td{padding:2px 10px 3px;font-size:17px;white-space:nowrap;border-bottom:1px solid #ddd;border-right:1px solid #ddd}.units td>input{text-align:right}.units tfoot td:first-child,.units_common tr:last-child td:first-child{border-bottom-left-radius:10px}.units tfoot td:last-child,.units_common tr:last-child td:last-child{border-bottom-right-radius:10px}.units tbody tr:hover td{background:#f9f9f9}.units-quantity{font-size:14px}.changelog{border-spacing:0;margin-bottom:12px;font-size:14px}.changelog td{padding:2px 24px 3px 0;vertical-align:top}.todo{font-size:14px}.cost-elixir{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAEs0lEQVR4XpWVW4yV1RmGn2+t9e/zHA8yM3tmyBRnwDIBCQdBkFOLLaYWCthEDAUSU0JEjNHEaEAGiqFtOqT0oil6o00aGhM1toEmBkkaEL3BQ/HUxAuEQScKzoGZPXv//7/W6iZ7J2AEQ5/kTb6b9eTNd7E+vPf/dwADdK5NL1rwVPOD9z/W8sASQFcdKG4RETH3pe9eti+/7Q/HegZOvt/317cP9u4+9WT34//Y0HzfsQayM6liuAU2Nq1ZdaT7wJNzc9NW9KSnBph6ABADkiIfXUp1m3zdLUmzkm3/fceOvXs7Nm/pyXSaqgl8EdDgIxBHva41i3J9zVRR3ISHmtb+5PXegRPb2n72cE+6y+AcoCoyhOupSzZJe3Pb4u9turttxyP9ndt+15NuySIpkAwVLPgYRIGYykyMkjRTM52LRSThvQ+/I92Xf2LPlin3Pzst06aQdEWoshWRD8GXwEeAAlHVOaAz19VLC13AZ4rr2NW6feeapuV7piRqFFAVTIC7AjhQOVA1IMF12zMghtsTdzaszd/b962dbsr/ctXq5hUHalQg+KjSCgCpCH1cbRqB9eA8ICAGsLRKu/Rxx1IAAzBbbr/tt9P3HGo0jRkRixIDGPCGChG4SaAIAA1UZCMWAHyEikJmZX+wUkSyCmBz54M7p2dn3HHFFkipFIokmADySbgtcU0sFno1bG2CR1tgehosVSK6fUdXsiXZrkSkdW7t7E0WRVIlSOksRqUhraEdaPaQpRwF9QLTDcxLwfIEzEyB+GpbR4fpyP5q3rp2va5+1Yb1Lb/Y/E08QUIcdTqHFoVYUKGHAqCBlAKjIUc5AVwGTo/DoAOTAa+RjNdn5D+n9I/rl2xc3bh68VA8gsaSVAoNKFEoB6IUBAIJB8pDwcJXIbw3CR+VwAmoLAAqFXHcnjxtjJikEY1CE/oikbfE3qGVhwQkyhEDCCAWCgL/LcKohigGEfAFcBZJxETWBSrCeYCkTlFwjpLzWAQr5QCxOPCABSLAeQgdWAvigBjsGNgrTGTHuGQvh+ZiYXBwNP6GWl3D1wwz7iNyCMY6vPcQV5pqNBJXxUUPLgZsJd6BDvhEzhVOXDx1Un9V+vLCqoalG7pSU+tG7CSj8ThJMYiCylIBDxKDKjlk0kFsr1X3Mdgi1ApHE+8cPfLvfx5Ul33hwtsj7zyPn2RKUM+Eh/PhMCNhgYlCxOREiVI54VhIPB7iSyG46No/4Aogjo9zn4+/fOHNA957p/v7+1n6xE/PLsz0LevL/rADUQzFo0zaEtoLEntcVNmhVH8l/NUUcW4SbMhYk+awPbb3pRNH/g5gAMr24bvSMzYq5JUljSvnGNGcKw6VG4/QqBPU6yQ5ZSgpRQKHeIsnJOmTBE11vMixV5/716GB/fwRACkLqUKzZPKHpu3/86K6hT8PdD0Xw8sMR8MoLDUqIKsUAZ5anaYhqGMoNWqPJk7+6bHj/b+5WowqN7qUwdOtW7cen/HimQ9nvxGdn/uuH5z/gf9iwVk/dDXzzvhP5xwvvrbw8FubZ61ff6Nr+31nOLu9Yc09u1p/3f9C177Df+seeOEvU/uff6Zr+9PrWn80H0jd7O3/AJZfQcRuS8+WAAAAAElFTkSuQmCC) no-repeat 100% 50%;padding-right:28px}.cost-dark-elixir{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAC1klEQVR42p2Uu2tTYRjGzaW5p22aJmmaS5sLMYQWEhIyGC9EkA4idAnYQTs4iAiSWRAytJQOInQQ8Q8QszgEKlQn0cE66CIILpZCWwnFSXTQ5PV5DpxwcjipST/4NafJOc/3vM/7nu+MiIwElhl4QBpcBiugBkLqPaOIOUEZ3AcvwEfwHfwCP8CdYUVVZ1fAc3AExIAuWBtKFCsMHoBDICdhNpsf08CJoljnwA7o/E/QZDKJw+F4MzEx4TMUxbIChr8HZFicTufB5ORknhpG+d0GB0BGwW63/x4fH7/eJ4plslgsN/F5DOQUouL3+9dprCdqtVovIZuvpxEkMCTIdDsej/tUlyHwdkBXifIQNpaxsTFBdnTF7/ru9Xg8h+Fw+KIqeg909eVEIhEFZKXg9XolmUzK6uqqNBoNKRaL7HzvGZfL9Qeb3aVgFLzTO6STUqkkhUJBZmdnJRgMKlSrVWk2m9Jut6Ver3Pz3jNut1tSqdQmRW+Bn7q5Yz50pRCNRiUWiylUKhXZ2NiQVqsltVpNbDabtnxZXFx8RtEt0NEK8kbmFggEBBkJwlfEE4mEZLNZxe3S0hI34f19orlc7iVFn4K/msYwG5mampKZmRnF5dzcHMuSdDpNceX/UCjEge8TZXX5fP61KtrRjgaz8fl8fJBu6JQuFcH5+XluxMz5avb1gZmXy+Udim7qy2f4LJ83sfsUpjuKU5AV8HeOmFaUvy8sLGxR9ALY0w8yR2h6epqZUphwCuie0ehLZx+Y534mkzlPURuguujcMiMK0zGbxmvGwniYvdYlv+9C9CFyt6vDfxZ8BqKBbw8FKM7B5zU3Ux1qh555fwBx/YGyDL4ZvKYsjRvw2uggYc5HKHvZ8OTHugo+ARkCdp9N+4LJuMFz2FCUYCXBGtgfcMrTMRt1jIyfIMOcXoN/Bp3+7OI62AbvwS4EdzFGr1DyI+R4DZPgNnr+H5ZrsVsLyePSAAAAAElFTkSuQmCC) no-repeat 100% 50%;padding-right:28px}.cost-gold{background:url(data:image/png;base64,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) no-repeat 100% 50%;padding-right:28px}.cost-elixir-small{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAACtUlEQVR42n2TbUhTcRSHb0FEBVaTUlBERJZsujnv3JtTiTJrQyksE/piGfal+lBR2ItGpCUZRSVIaUqEQaikFVpObDozNXXzZZub5nQynE5RM7dA9+usQCirAw9/LpyH34FzLgPgv6RukQZc35mhKAnOyXoUdCmdYZgNAJh/ChcDsyQa7sPSYWHtkFOsdXvkZvQL6ia2M5tC/ipKmXC/mrDbubboWhdkXYBikDADcSNwinUzx7cmx6wRz/tnR3TyKhu/Szup2QLIB4kBn0gMYVFuWC6OyDn1S1yVMiO6+VV6KExA3CgQ7yJmAeUEfdt+Jnrj7aiTlJWuiqodqsB3u8p18+JWQNZDKSYS7EDCAiVNAxIbvUTiHPrj2zo4HI4fQ7X+Fbf8gTlag1lWSw0GarDSO0KQnOoATjqB3XZKdcKm7FjI4qWJmHNBJ4Q9As2MRaTFkpjS1GYgk0bdMwwkUcrjOWDcC2RPUbIdX5VG3Eu4coy5E3K5wCjqwEB0ExZj9VhOHKQUC0FiGon5lPZyEThMyXIXJU/iWfLdm0xJ2K1KK6tHp6AeU+wnLCn7sKIeIskKZBDpNPIBG0lfaNRJYK8DparCYqYo9GrFWKwRHyIbMB7TjvmEPnhSjPD6RB9qIo6gA4DMDM/+PtxQn8llLgRkpljZz56PwjZK1cAh78Lsvl641UasJFNzgunXPmV6woARVb3jqOoQl6Ha2Mqvqh4Tm/Ca9wbtggaMStowreiCm1azIu2B13cQEh2WEltQnVqct7rHzG0HQ1v5Nc0W1oDGyPdo4tVCH9WAMZEGUzEafGOb4Va0QJNU9oJNYTf/djlH/OVBTbzn5f0i7Vy3UItewirSYVzUgmFJo+ut8un9YD6f4+tdc6tU64pCzrIVofkFddwn1bVEWXhh3rWo01F//gw/ABEvTc8QZ7BnAAAAAElFTkSuQmCC) no-repeat 100% 50%;padding-right:19px}.cost-dark-elixir-small{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAABoUlEQVR42n2SvUtCYRTG8/szv6+KH6hXRSERoWixwaHR2aExG2qJ/oyGwMb+hmoKhBK8c2Pg1BBEc0NbhtXTcy4ciDt44be87/m9z3nfczcArIWfQfrkmJyQjKyvE7bJJXki7+SbfJB9FZ1CmJySVwIHK4/Hc+AURaqRa/JD4MTlciEUCl2oqJJJLGexUwyHww/VajVoS9Fo1ODi3TpJYeJLLpczJclFznWDd0AgEIDP57NJp9Not9siyL6sfRmGMRZxi7ypmM1m0el0wFORSqUwGo1gWRYGg4G97/V6USwWr0SUtF+9gyTUajWUy2Wb4XCIyWSCXq+niWg2mzMRbzVNWpSUQqEAPgDq9ToajQYqlQqCwaBd4/f7pfVHEW+cIluRYk2WNWlRauRV0e125yKOyZLA7XYjFoshn8+jVCrJAfZdI5EI9PBMJrOkeCTiJpkR6B3i8bgUIJlMiiQH6p4cOO33+5s6/F2yINBkaVvb0zFxDM+tVmtHHOdPPSWfRAWVVolEwjJNc0/rVVQ5RA7JPVlwPAumzjn8M75y4n/tH9zyJ/gJ31b0AAAAAElFTkSuQmCC) no-repeat 100% 50%;padding-right:19px}.cost-gold-small{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAC8klEQVR42p1TfSzUcRz+npcUmV6YTMPREiXrlREqrcaMRipRqPujFHWEjWxcSJpNb9NWf1BUQ1oZRs1JiVNH3bXzdsq5Xzpvc879uPenW3+0ib96tuePz2fP8/n88Xk+BMAiGmGZnbLHryg3qKCQE1iVl7WTzWZHexn7Zv9qFxW3i/wihLzTbb/6k2iZ6BykgkhMSxNBUQXTvK7SlxkZGb5LzEaYlBV7sylhGE1LwjHYEQfemxS0NVzGQG8ifvZHQ6Mqx4ikhiopZoUuMudfWRsjfb9BtSByw9SPVMwrmwA9FzDUQ6cpxxSVBj43CjOjOZB+iZFyckJ2/DG729pat1Wt+wgRAf3DFwbNfegWiqCey4ZGmQnDXDowdhwzfcGoe7BLS1PH0MWNeUIIMSVxEev8xC2r6MleS8gnwqGZOw3VTDTU8pPQzrKgGQ6A9qsHMLIP7+p26buaAjAqPjp2ieXMJBnxlufG280gbPaEXBYJtTIGasUpaORGDvlA3bsROoErIPHHED/Q0FC5VT8uCdelXXELIddY5MJ0jxVaa/0xTZ2ATmXcNhsHZf9m0D3W0AhdYBjcBsgOYvizP96/9jZMjkXoUy86hpGLUSSU+uaj7eAmQsCLh4GOw9y3TVB2EqgEdtAPMAHJbmDiEMQfPCDr98evwX0TaQkrthAPZ+LQWHtgSCE/i1dPYzHcuh2KdhOouk2gF64B+hyMA9yhFLlDJmQC80fAb/Ku228MDQFAzsd63ej7EgrZaDAeX7dD/U0GBJUMDNQQg+i5KUTVKzHbYw4odmPoU4C8MN0l6O+dHa0d1+ckb3/Lb3CGtJmBzkcELwqIvjqfaHsrCMZbCeYF5hC1OOFell3mknhG7bF3zYu3aXyWZ4ruCgbEr00gbmSAX8VAyx2C6jzT2ZIEwiGEWCyb7dxou9WcMzassqv23Ic5G3/eZVtNlCZZfL+VaF6eeZj4LfsYSz8rxILF2svMTXbyjIx0diAEjGV1AP6bvwEHTGubIzKNeQAAAABJRU5ErkJggg==) no-repeat 100% 50%;padding-right:19px}.like-button{color:#222;cursor:pointer;display:inline-block;border:1px outset #777;border-radius:8px;padding:0 8px}.like-button_after{margin-left:6px}.like-button_lonely{margin-left:-8px;margin-right:16px}.number{text-align:right}.limit-exceeded{color:#d00}.intro{font-size:16px}.result{font-size:18px;font-family:'PT Serif Caption',Georgia,serif}.saved-list{font-size:14px}.saved-list__item{display:inline-block;margin:0 30px 17px -13px;border:1px solid #ddd;border-radius:10px;padding:10px 13px;vertical-align:top;color:#444;line-height:1.35}.saved-list__item-title{font-size:14px;font-family:'PT Serif Caption',Georgia,serif;color:#222;margin-bottom:3px}.saved-list__item-title_next{margin-top:8px}.saved-list__item-title span{float:right}.saved-list__item-result{margin-top:3px}.saved-list__actions{margin-top:8px}.saved-list__table{border-spacing:0}.saved-list__table td{padding-right:8px;padding-top:0;padding-bottom:0}.saved-list__table td.saved-list__level{padding-top:6px;line-height:8px}</style>
    <script>navigator.appName=="Microsoft Internet Explorer"&&(function(b,e,c,a){b.src="/clash-of-clans/i/favicon.ico";c=e.getElementsByTagName("script")[0];a=c.parentNode.insertBefore(e.createElement("link"),c);a.rel="shortcut icon";a.href=b.src})(new Image,document);</script>
    <link rel="icon" href="/clash-of-clans/i/favicon.png"/>
    <script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-37991363-1']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>
</head>
<body>

<h1>Clash of Clans — Troops and Spells Cost Calculator</h1>

<div class="intro">
    <p>Helps to plan the composition of your army and calculate the cost of the attack in order to remain in plus, after the battle.</p>

    <p>All entered data will be saved in your browser and pre-filled in next time you visit this page.</p>
</div>

<table class="units units_common">
    <tr>
        <td>
            <label for="barracks-levels-1">Barracks Levels</label>
        </td>
        <td>
            <select id="barracks-levels-1" class="field">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-2" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-3" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-4" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>
            <label for="dark-barracks-level">Dark Barracks Level</label>
        </td>
        <td>
            <select id="dark-barracks-level" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected="selected">3</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>
            <label for="army-camps">Army Camps Capacity</label>
        </td>
        <td>
            <input class="js-number field" value="220" id="army-camps" size="4"/>
        </td>
    </tr>

    <tr>
        <td>
            <label for="spell-factory-level">Spell Factory Level</label>
        </td>
        <td>
            <select id="spell-factory-level" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected="selected">4</option>
            </select>
        </td>
    </tr>
</table>

<table id="units" class="units">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th><span class="cost-elixir">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="units-quantity"></span></th>
            <th><span class="cost-elixir">Total</span></th>
            <th colspan="8">Barracks <span class="limit-exceeded units-quantity" style="display: none;" id="barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td colspan="2" id="barrack-header-1"></td>
            <td colspan="2" id="barrack-header-2"></td>
            <td colspan="2" id="barrack-header-3"></td>
            <td colspan="2" id="barrack-header-4"></td>
        </tr>
    </thead>
    <tbody id="units-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td id="units-space" class="result"></td>
            <td id="units-cost" class="number result"></td>
            <td id="units-time-barrack-1" colspan="2" class="number"></td>
            <td id="units-time-barrack-2" colspan="2" class="number"></td>
            <td id="units-time-barrack-3" colspan="2" class="number"></td>
            <td id="units-time-barrack-4" colspan="2" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="dark" class="units">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th><span class="cost-dark-elixir">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="dark-quantity"></span></th>
            <th><span class="cost-dark-elixir">Total</span></th>
        </tr>
    </thead>
    <tbody id="dark-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td class="result">
                <span id="dark-space"></span>
                —
                <span id="dark-time"></span>
            </td>
            <td id="dark-cost" class="number result"></td>
        </tr>
    </tfoot>
</table>

<table id="spells" class="units">
    <thead>
        <tr>
            <th>Spell</th>
            <th>Level</th>
            <th><span class="cost-gold">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="spells-quantity"></span></th>
            <th><span class="cost-gold">Total</span></th>
        </tr>
    </thead>
    <tbody id="spells-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td class="result">
                <span id="spells-space"></span>
                —
                <span id="spells-time"></span>
            </td>
            <td id="spells-cost" class="number result"></td>
        </tr>
    </tfoot>
</table>

<p>
    <span id="save" class="like-button like-button_lonely">Save Calculation</span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<script type="text/x-hogan-template" id="hogan-item-row-template">
    <tr id="{{rowId}}">
        <td>
            <label for="{{id}}">{{title}}</label>
        </td>
        <td>
            <select id="{{levelId}}" class="field">
                {{#levelContent}}
                    <option value="{{value}}">{{text}}</option>
                {{/levelContent}}
            </select>
        </td>
        <td id="{{costId}}" class="number">
        </td>
        <td>
            {{#spells}}
                <select id="{{id}}" class="field">
                    {{#options}}
                        <option value="{{value}}">{{text}}</option>
                    {{/options}}
                </select>
            {{/spells}}
            {{^spells}}
                <input class="js-number field" id="{{id}}" size="4"/>
            {{/spells}}
        </td>
        <td id="{{summaryId}}" class="number">
        </td>
        {{#barracksTimes}}
            <td id="{{barrackQuantityId}}" class="number"></td>
            <td id="{{barrackTimeId}}" class="number"></td>
        {{/barracksTimes}}
    </tr>
</script>

<script type="text/x-hogan-template" id="hogan-saved-list-item-template">
    <div class="saved-list__item" id="saved-list-item-{{index}}">
        {{#hasUnits}}
            <div class="saved-list__item-title"><span class="cost-elixir-small">{{totalCost}}</span>Units</div>
            <table class="saved-list__table">
                {{#units}}
                    <tr>
                        <td class="number">{{quantity}}</td>
                        <td>{{name}}</td>
                        <td class="saved-list__level">{{level}}</td>
                    </tr>
                {{/units}}
            </table>
        {{/hasUnits}}

        {{#hasDark}}
            <div class="saved-list__item-title saved-list__item-title_next"><span class="cost-dark-elixir-small">{{darkCost}}</span>&nbsp;</div>
            <table class="saved-list__table">
                {{#dark}}
                    <tr>
                        <td class="number">{{quantity}}</td>
                        <td>{{name}}</td>
                        <td class="saved-list__level">{{level}}</td>
                    </tr>
                {{/dark}}
            </table>
        {{/hasDark}}

        {{#hasCapacity}}
            <div class="saved-list__item-result">
                {{totalCapacity}}/{{armyCamps}}
            </div>
        {{/hasCapacity}}

        {{#hasSpells}}
            <div class="saved-list__item-title saved-list__item-title_next"><span class="cost-gold-small">{{spellsCost}}</span>Spells</div>
            <table class="saved-list__table">
                {{#spells}}
                    <tr>
                        <td class="number">{{quantity}}</td>
                        <td>{{name}}</td>
                        <td class="saved-list__level">{{level}}</td>
                    </tr>
                {{/spells}}
            </table>
            <div class="saved-list__item-result">
                {{spellsCapacity}}/{{spellsFactoryLevel}}
            </div>
        {{/hasSpells}}

        <div class="saved-list__actions">
            <span class="like-button like-button_lonely js-saved-load" data-num="{{index}}" title="Current calculation will be lost">Load</span>
            <span class="like-button like-button_lonely js-saved-delete" data-num="{{index}}">Delete</span>
        </div>
    </div>
</script>

<script>/**
* @preserve Copyright 2012 Twitter, Inc.
* @license http://www.apache.org/licenses/LICENSE-2.0.txt
*/
var Hogan={};(function(a,b){function i(a){return String(a===null||a===undefined?"":a)}function j(a){return a=i(a),h.test(a)?a.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&#39;").replace(g,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(a,b,c){return""},v:j,t:i,render:function(b,c,d){return this.ri([b],c||{},d)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&typeof e=="string"&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d)){c(a,b,this);return}for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&a.length===0?!1:(typeof a=="function"&&(a=this.ls(a,b,c,d,e,f,g)),h=a===""||!!a,!d&&h&&b&&b.push(typeof a=="object"?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if(a==="."&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&typeof f=="object"&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(!d&&typeof f=="function"&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;for(var h=b.length-1;h>=0;h--){f=b[h];if(f&&typeof f=="object"&&a in f){e=f[a],g=!0;break}}return g?(!d&&typeof e=="function"&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=d==null?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);i=a.call(h);if(typeof i=="function"){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,c){var d=b[b.length-1],e=a.call(d);if(typeof e=="function"){e=i(e.call(d));if(this.c&&~e.indexOf("{{"))return this.c.compile(e,this.options).render(d,c)}return i(e)}};var c=/&/g,d=/</g,e=/>/g,f=/\'/g,g=/\"/g,h=/[&<>\"\']/,k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(a){function h(a){a.n.substr(a.n.length-1)==="}"&&(a.n=a.n.substring(0,a.n.length-1))}function i(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function j(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function k(a,b,c,d){var e=[],f=null,g=null;while(a.length>0){g=a.shift();if(g.tag=="#"||g.tag=="^"||l(g,d))c.push(g),g.nodes=k(a,g.tag,c,d),e.push(g);else{if(g.tag=="/"){if(c.length===0)throw new Error("Closing tag without opener: /"+g.n);f=c.pop();if(g.n!=f.n&&!m(g.n,f.n,d))throw new Error("Nesting error: "+f.n+" vs. "+g.n);return f.end=g.i,e}e.push(g)}}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return e}function l(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].o==a.n)return a.tag="#",!0}function m(a,b,c){for(var d=0,e=c.length;d<e;d++)if(c[d].c==a&&c[d].o==b)return!0}function n(a){return a.replace(f,"\\\\").replace(c,'\\"').replace(d,"\\n").replace(e,"\\r")}function o(a){return~a.indexOf(".")?"d":"f"}function p(a){var b="";for(var c=0,d=a.length;c<d;c++){var e=a[c].tag;e=="#"?b+=q(a[c].nodes,a[c].n,o(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):e=="^"?b+=r(a[c].nodes,a[c].n,o(a[c].n)):e=="<"||e==">"?b+=s(a[c]):e=="{"||e=="&"?b+=t(a[c].n,o(a[c].n)):e=="\n"?b+=v('"\\n"'+(a.length-1==c?"":" + i")):e=="_v"?b+=u(a[c].n,o(a[c].n)):e===undefined&&(b+=v('"'+n(a[c])+'"'))}return b}function q(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+n(b)+'",c,p,1),'+"c,p,0,"+d+","+e+',"'+f+'")){'+"_.rs(c,p,"+"function(c,p,_){"+p(a)+"});c.pop();}"}function r(a,b,c){return"if(!_.s(_."+c+'("'+n(b)+'",c,p,1),c,p,1,0,0,"")){'+p(a)+"};"}function s(a){return'_.b(_.rp("'+n(a.n)+'",c,p,"'+(a.indent||"")+'"));'}function t(a,b){return"_.b(_.t(_."+b+'("'+n(a)+'",c,p,0)));'}function u(a,b){return"_.b(_.v(_."+b+'("'+n(a)+'",c,p,0)));'}function v(a){return"_.b("+a+");"}var b=/\S/,c=/\"/g,d=/\n/g,e=/\r/g,f=/\\/g,g={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(c,d){function w(){p.length>0&&(q.push(new String(p)),p="")}function x(){var a=!0;for(var c=t;c<q.length;c++){a=q[c].tag&&g[q[c].tag]<g._v||!q[c].tag&&q[c].match(b)===null;if(!a)return!1}return a}function y(a,b){w();if(a&&x())for(var c=t,d;c<q.length;c++)q[c].tag||((d=q[c+1])&&d.tag==">"&&(d.indent=q[c].toString()),q.splice(c,1));else b||q.push({tag:"\n"});r=!1,t=q.length}function z(a,b){var c="="+v,d=a.indexOf(c,b),e=i(a.substring(a.indexOf("=",b)+1,d)).split(" ");return u=e[0],v=e[1],d+c.length-1}var e=c.length,f=0,k=1,l=2,m=f,n=null,o=null,p="",q=[],r=!1,s=0,t=0,u="{{",v="}}";d&&(d=d.split(" "),u=d[0],v=d[1]);for(s=0;s<e;s++)m==f?j(u,c,s)?(--s,w(),m=k):c.charAt(s)=="\n"?y(r):p+=c.charAt(s):m==k?(s+=u.length-1,o=g[c.charAt(s+1)],n=o?c.charAt(s+1):"_v",n=="="?(s=z(c,s),m=f):(o&&s++,m=l),r=s):j(v,c,s)?(q.push({tag:n,n:i(p),otag:u,ctag:v,i:n=="/"?r-v.length:s+u.length}),p="",s+=v.length-1,m=f,n=="{"&&(v=="}}"?s++:h(q[q.length-1]))):p+=c.charAt(s);return y(r,!0),q},a.generate=function(b,c,d){var e='var _=this;_.b(i=i||"");'+p(b)+"return _.fl();";return d.asString?"function(c,p,i){"+e+";}":new a.Template(new Function("c","p","i",e),c,a,d)},a.parse=function(a,b,c){return c=c||{},k(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}(typeof exports!="undefined"?exports:Hogan)</script>
<script>(function(D,g){if(!Function.prototype.bind){Function.prototype.bind=function(Q){var O=this;var P=Array.prototype.slice.call(arguments,1);return function(){return O.apply(Q,P.concat(Array.prototype.slice.call(arguments)))}}}var k=function(P,Q){var O;for(O in P){if(P.hasOwnProperty(O)){if(Q(O,P[O])===false){break}}}};var x=function(P){var O=P.constructor();k(P,function(Q,R){O[Q]=R});return O};var M=function(O){return O.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")};var q=function(O){return O.replace("_"," ").replace(/-/g,".")};var E=function(S,O){var R="";var P=S;if(P>3599){R+=Math.floor(P/3600)+"h ";P%=3600}if(P>59){var Q=Math.floor(P/60);P%=60;if(O&&P>0){Q++}R+=Q+"m "}else{R+="0m "}if(R===""||!O){R+=P+"s"}return R};var t=function(P,O){this.key=P;this.defaultData=O;this.load=function(){var Q=D.localStorage.getItem(this.key);return(Q&&JSON.parse(Q))||this.defaultData};this.save=function(Q){D.localStorage.setItem(this.key,JSON.stringify(Q))}};var n=function(O){this.data=O;this.get=function(Q,P){var R=this.data[Q];if(P!==undefined&&R===undefined){return P}return R};this.set=function(P,Q){this.data[P]=Q};this.getAll=function(){return this.data}};var y=function(O){this.entries=[];this.retrieve=function(P){return this.entries[P]};this.insert=function(P){this.entries.push(new n(P))};this.remove=function(P){this.entries.splice(P,1)};this.getAll=function(){return this.entries.map(function(P){return P.getAll()})};this.forEach=function(P){this.entries.forEach(P)};O.forEach(this.insert.bind(this))};var z=function(){var O={};this.get=function(P){if(!O.hasOwnProperty(P)){O[P]=g.getElementById(P)}return O[P]}};var N=new z();var a=new t("savedData",{});var u=new n(a.load());var f=function(){this.barracks=[];var Q=4;var O;for(O=1;O<=Q;O++){var P=N.get("barracks-levels-"+O);this.barracks.push(P)}this.setDefaults=function(){var R=u.get("barracksLevels");if(R){this.barracks.forEach(function(T,S){T.options[R[S]].selected=true})}};this.updateSavedData=function(){u.set("barracksLevels",this.barracks.map(function(R){return R.selectedIndex}))};this.getMaxLevel=function(){return Math.max.apply(null,this.barracks.map(function(R){return parseInt(R.value,10)}))};this.getAll=function(){return this.barracks};this.getLevels=function(){return this.barracks.map(function(R){return R.value})}};var c=new f();var b=N.get("army-camps");var H=N.get("spell-factory-level");var s=N.get("dark-barracks-level");var I={Barbarian:[20,[25,40,60,80,100,150],1,1],Archer:[25,[50,80,120,160,200,300],1,2],Goblin:[30,[25,40,60,80,100],1,3],Giant:[120,[500,1000,1500,2000,2500,3000],5,4],Wall_Breaker:[120,[1000,1500,2000,2500,3000],2,5],Balloon:[600,[2000,2500,3000,3500,4000,4500],5,6],Wizard:[600,[1500,2000,2500,3000,3500],4,7],Healer:[1200,[7000,10000,13000],20,8],Dragon:[1800,[25000,30000,36000],20,9],"P-E-K-K-A-":[2700,[30000,35000,42000],25,10]};var l=N.get("units");var m={Lightning:[3600,[15000,16500,18000,20000,22000],1,1],Healing:[5400,[20000,22000,24000,26500,29000],1,2],Rage:[7200,[30000,33000,36000,40000,44000],1,3],Jump:[5400,[30000,38000],1,4]};var C=N.get("spells");var J=[0,20,25,30,35,40,45,50,55,60,75];var r=[40,50,60];var v={Minion:[45,[6,7,8,9,10],2,1],"Hog Rider":[300,[30,35,40,45,50],6,2],Valkyrie:[900,[100,120,140,160],8,3]};var G=N.get("dark");var d=0;var L=function(R,O,P){var Q=R-O;if(Q<0){Q='<span class="limit-exceeded">'+Q+"</span>"}N.get(P+"-quantity").innerHTML="("+Q+")";if(O>R){O='<span class="limit-exceeded">'+O+"</span>"}O=O+" / "+R;N.get(P+"-space").innerHTML=O};var e=function(W,P,ag){ag.table.style.display=(ag.levelValue===0?"none":"");var ac;for(ac=ag.capLevel;ac>=1;ac--){N.get(P+"-building-level-"+ac).style.display=(ac>ag.levelValue?"none":"")}var ad=0;var T=0;var Q=0;var S=[];k(W,function(ai,ap){if(ap[3]>ag.levelValue){return}var at=N.get(ai);var am=parseInt(at.value,10)||0;if(am<0){am=0}if(at.value!==""){at.value=am}var aq=ai+"-level";var ar=N.get(aq);var ak=N.get(ai+"-cost");var ao=N.get(ai+"-summary");var al=ar.value;var aj=(al*am);ak.innerHTML=M(al);ao.innerHTML=(aj?M(aj):0);ad+=aj;T+=(ap[2]*am);if(P==="spells"||P==="dark"){Q+=(ap[0]*am)}else{var an;for(an=1;an<=4;an++){N.get("quantity-"+ai+"-"+an).innerHTML="";N.get("time-"+ai+"-"+an).innerHTML=""}if(am>0){S.push({name:ai,quantity:am,time:ap[0],level:ap[3],space:ap[2]})}}u.set(ai,am);u.set(aq,ar.selectedIndex)});if(P==="units"){var R=c.getLevels();R.forEach(function(ai,aj){var ak;if(parseInt(ai,10)===0){ak=""}else{ak=ai+' lvl <span class="units-quantity" title="Maximum Unit Queue Length">('+J[ai]+")</span>"}N.get("barrack-header-"+(aj+1)).innerHTML=ak});var Y={};c.getAll().forEach(function(ai){Y[ai.getAttribute("id")]={time:0,space:0,maxSpace:J[ai.value],units:{},level:ai.value}});S.sort(function(aj,ai){if(aj.time<ai.time){return 1}if(aj.time>ai.time){return -1}if(aj.quantity>ai.quantity){return -1}if(aj.quantity<ai.quantity){return 1}return 0});var X=function(ai,am,aj){var an=null;var al;var ak=[];for(al in ai){var ao=ai[al];if(ao.level<am){continue}if((ao.space+aj)>ao.maxSpace){continue}ak.push(ao)}if(ak.length>1){ak.sort(function(aq,ap){if(aq.time<ap.time){return -1}if(aq.time>ap.time){return 1}if(aq.space<ap.space){return -1}if(aq.space>ap.space){return 1}return 0});an=ak[0]}else{if(ak.length){an=ak[0]}}return an};var ab;var ah;var V=false;for(ab=0,ah=S.length;ab<ah;ab++){var U=S[ab];var Z;for(Z=0;Z<U.quantity;Z++){var ae=X(Y,U.level,U.space);if(ae===null){V=true;break}if(!ae.units[U.name]){ae.units[U.name]={time:0,quantity:0}}ae.units[U.name].time+=U.time;ae.units[U.name].quantity+=1;ae.time+=U.time;ae.space+=U.space}}if(V){N.get("barracks-exceeded").style.display="";k(Y,function(ai){var aj=ai.slice(-1);N.get("units-time-barrack-"+aj).innerHTML=""})}else{N.get("barracks-exceeded").style.display="none";var af=0;var aa=1;k(Y,function(aj,ai){var ak=aj.slice(-1);k(ai.units,function(al,am){if(am.time>0){N.get("time-"+al+"-"+ak).innerHTML=E(am.time);N.get("quantity-"+al+"-"+ak).innerHTML="×"+am.quantity}});if(ai.time>af){af=ai.time;aa=ak}N.get("units-time-barrack-"+ak).innerHTML=(ai.time?E(ai.time):"")});var O=N.get("units-time-barrack-"+aa);O.innerHTML='<span class="result">'+O.innerHTML+"</span>"}}N.get(P+"-cost").innerHTML=M(ad);if(P==="spells"){L(ag.space,T,P)}else{d+=T}if(P==="spells"||P==="dark"){N.get(P+"-time").innerHTML=E(Q,(P==="spells"))}};var p=function(){d=0;e(I,"units",{table:l,levelValue:c.getMaxLevel(),space:b.value,capLevel:10});e(m,"spells",{table:C,levelValue:parseInt(H.value,10),space:H.value,capLevel:4});e(v,"dark",{table:G,levelValue:parseInt(s.value,10),space:b.value,capLevel:3});L(b.value,d,"units");L(b.value,d,"dark");c.updateSavedData();u.set("armyCamps",b.value);u.set("spellFactoryLevel",H.selectedIndex);u.set("darkBarracksLevel",s.selectedIndex);a.save(u.getAll())};var B=function(){c.setDefaults();b.value=u.get("armyCamps",b.value);H.options[u.get("spellFactoryLevel",H.selectedIndex)].selected=true;s.options[u.get("darkBarracksLevel",s.selectedIndex)].selected=true;var O=function(P,Q){k(P,function(S){var T=S+"-level";var R=N.get(T);R.options[u.get(T,R.selectedIndex)].selected=true;var U=N.get(S);if(Q==="spells"){U.options[u.get(S,U.selectedIndex)].selected=true}else{U.value=u.get(S)||0}})};O(I,"units");O(m,"spells");O(v,"dark")};c.getAll().forEach(function(O){O.addEventListener("change",p,false)});b.addEventListener("input",p,false);H.addEventListener("change",p,false);s.addEventListener("change",p,false);var w=function(P){var R=function(){var S=parseInt(P.value,10);if(isNaN(S)){P.value=1}else{P.value=S+1}p()};var Q=function(){var S=parseInt(P.value,10);if(isNaN(S)||S<2){P.value=0}else{P.value=S-1}p()};var O=function(U){var T=g.createElement("span");T.className="like-button like-button_after";T.innerHTML=(U==="plus"?"+":"−");T.addEventListener("click",(U==="plus"?R:Q),false);var S=null;var V=null;T.addEventListener("mousedown",function(){V=D.setTimeout(function(){S=D.setInterval((U==="plus"?R:Q),100)},500)});T.addEventListener("mouseup",function(){clearTimeout(V);clearInterval(S)});P.parentNode.appendChild(T)};O("plus");O("minus")};var i=Hogan.compile(g.getElementById("hogan-item-row-template").innerHTML);var o=function(O,S){var R=function(V,U){return{value:V,text:(U+1)}};var T=[];if(S==="spells"){var Q;for(Q=0;Q<5;Q++){T.push({value:Q,text:Q})}}var P=N.get(S+"-body");k(O,function(W,ab){var aa={id:W,title:q(W),levelId:W+"-level",levelContent:ab[1].map(R),costId:W+"-cost",summaryId:W+"-summary",rowId:S+"-building-level-"+ab[3]};if(S==="spells"){aa.spells={options:T}}if(S==="units"){var Y;var Z=[];for(Y=1;Y<=4;Y++){Z.push({barrackQuantityId:"quantity-"+W+"-"+Y,barrackTimeId:"time-"+W+"-"+Y})}aa.barracksTimes=Z}var U=i.render(aa);var V=g.createElement("div");V.innerHTML="<table>"+U+"</table>";var X=V.querySelector("tr");P.appendChild(X);N.get(aa.levelId).addEventListener("change",p,false);N.get(aa.id).addEventListener((S==="spells"?"change":"input"),p,false)})};o(I,"units");o(v,"dark");o(m,"spells");var K=function(O){if(O.target.tagName.toLowerCase()==="input"){setTimeout(function(P){P.setSelectionRange(0,9999)}.bind(null,O.target),10)}};Array.prototype.slice.call(g.getElementsByClassName("js-number")).forEach(function(O){O.addEventListener("focus",K,false);w(O)});B();p();var j=new t("savedCalculations",[]);var A=new y(j.load());var h=Hogan.compile(g.getElementById("hogan-saved-list-item-template").innerHTML);var F=function(){var P=[];A.forEach(function(S,W){var U={index:W};var T=[];var R=0;var X=0;var Z=S.get("barracksLevels",[10,10,10,10]);k(I,function(ac,af){var ae=parseInt(S.get(ac),10)||0;var ad=Math.max.apply(null,Z.map(function(ah,ag){return(ag===0?ah+1:ah)}));if(ae>0&&af[3]<=ad){T.push({name:q(ac),level:(new Array(S.get(ac+"-level")+2)).join("*"),quantity:ae});R+=af[1][S.get(ac+"-level")]*ae;X+=af[2]*ae}});if(T.length){U.hasUnits={units:T,totalCost:M(R),}}if(S.get("darkBarracksLevel")>0){var Q=[];var aa=0;k(v,function(ac,ae){var ad=parseInt(S.get(ac),10)||0;if(ad>0&&ae[3]<=S.get("darkBarracksLevel")){Q.push({name:q(ac),level:(new Array(S.get(ac+"-level")+2)).join("*"),quantity:ad});aa+=ae[1][S.get(ac+"-level")]*ad;X+=ae[2]*ad}});if(Q.length){U.hasDark={dark:Q,darkCost:M(aa)}}}if(X>0){U.hasCapacity={totalCapacity:X,armyCamps:S.get("armyCamps")}}if(S.get("spellFactoryLevel")>0){var V=[];var ab=0;var Y=0;k(m,function(ad,ae){var ac=parseInt(S.get(ad),10)||0;if(ac>0&&ae[3]<=S.get("spellFactoryLevel")){V.push({name:q(ad),level:(new Array(S.get(ad+"-level")+2)).join("*"),quantity:ac});ab+=ae[1][S.get(ad+"-level")]*ac;Y+=ae[2]*ac}});if(V.length){U.hasSpells={spells:V,spellsCost:M(ab),spellsCapacity:Y,spellsFactoryLevel:S.get("spellFactoryLevel")}}}P.push(h.render(U))});var O=N.get("saved-list-content");O.innerHTML=P.join("");Array.prototype.slice.call(O.getElementsByClassName("js-saved-load")).forEach(function(Q){Q.addEventListener("click",function(){u=new n(x(A.retrieve(Q.getAttribute("data-num")).getAll()));B();p();F()},false)});Array.prototype.slice.call(O.getElementsByClassName("js-saved-delete")).forEach(function(Q){Q.addEventListener("click",function(){A.remove(Q.getAttribute("data-num"));j.save(A.getAll());F()},false)})};N.get("save").addEventListener("click",function(){A.insert(x(u.getAll()));j.save(A.getAll());F()},false);F()}(window,document));</script>

<!-- Yandex.Metrika counter -->
<script>(function(g,a,i){(a[i]=a[i]||[]).push(function(){try{a.yaCounter19642528=new Ya.Metrika({id:19642528,webvisor:true,clickmap:true,trackLinks:true,accurateTrackBounce:true})}catch(c){}});var h=g.getElementsByTagName("script")[0],b=g.createElement("script"),e=function(){h.parentNode.insertBefore(b,h)};b.type="text/javascript";b.async=true;b.src=(g.location.protocol=="https:"?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js";if(a.opera=="[object Opera]"){g.addEventListener("DOMContentLoaded",e,false)}else{e()}})(document,window,"yandex_metrika_callbacks");</script>
<noscript><div><img src="//mc.yandex.ru/watch/19642528" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<h2>Comments</h2>
<p>Feel free to post bugs and feature suggestions.</p>

<div class="fb-comments" data-href="http://mkln.ru/clash-of-clans/" data-width="470" data-num-posts="10"></div>

<h2>Changelog</h2>
<table class="changelog">
    <tr>
        <td>2.1</td>
        <td>13 March, 2013</td>
        <td>
            Dark Barracks troops calculation.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0.2</td>
        <td>12 March, 2013</td>
        <td>
            3.54 updates:<br/>
            Wall Breaker capacity increased from 1 to 2;<br/>
            P.E.K.K.A. training time reduced from 1 hour to 45 minutes;<br/>
            P.E.K.K.A. and Dragon costs reduced.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0.1</td>
        <td>5 March, 2013</td>
        <td>
            Fixed a bug in which the units were distributed in barracks without accounting maximum barracks queue;<br/>
            Fixed bug with negative number of units.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0</td>
        <td>28 February, 2013</td>
        <td>
            Added distribution of troops between barracks for optimal training speed;<br/>
            The previous values of the maximum level and number of barracks, unfortunately, have not saved;<br/>
            Production Time removed from saved calculations list;<br/>
            Simplified tables layouts.
        </td>
    </tr>
    <tr>
        <td>1.5</td>
        <td>26 February, 2013</td>
        <td>
            Reduced indents and font sizes;<br/>
            The list of saved calculations is always shown;<br/>
            Redesigned saved calculations layout.<br/>
        </td>
    </tr>
    <tr>
        <td>1.4</td>
        <td>17 February, 2013</td>
        <td>
            Added saving of calculations.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.2</td>
        <td>10 February, 2013</td>
        <td>
            Added description of the calculator;<br/>
            Default values changed to maximum allowed in game.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.1</td>
        <td>9 February, 2013</td>
        <td>
            Added auto-select of text in fields for simplify edit in iOS;<br/>
            Fixed NaN in results and null in fields bug.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3</td>
        <td>8 February, 2013</td>
        <td>
            The title is replaced by the more similar to the contents of the page;<br/>
            Added description for auto-save feature;<br/>
            Added army camps capacity — allows to show free capacity;<br/>
            Added maximum barracks level — allows show/hide unavailable units;<br/>
            Added spells calculation.<br/>
        </td>
    </tr>
    <tr>
        <td>1.2</td>
        <td>6 February, 2013</td>
        <td>
            Added plus/minus buttons;<br/>
            Fixed IE 9+ support;<br/>
            Changed favicon to app store game icon;<br/>
            Added elixir icon to costs;<br/>
            Added intermediate results of the calculations to the units table.<br/>
        </td>
    </tr>
    <tr>
        <td>1.1</td>
        <td>5 February, 2013</td>
        <td>
            Added sixth level for Barbarian, Archer, Giant and Balloon;<br/>
            Fixed Healer 1st level cost;<br/>
            Number of barracks field replaced by the select.<br/>
        </td>
    </tr>
    <tr>
        <td>1.0</td>
        <td>4 February, 2013</td>
        <td>Initial release.</td>
    </tr>
</table>

<h2>To-do</h2>
<div class="todo">
    <p>Army camps capacity increment/decrement in five points.</p>
    <p>Production time in saved calculations.</p>
    <p>Sometimes I don't use all my troops, so would be nice if I could have an option to write down the troops I saved and let it automatically adjust the required numbers to what I've predefined. (From <a href="http://forum.supercell.net/showthread.php/17238-Troops-and-Spells-Cost-Calculator?p=219572&amp;viewfull=1#post219572">Supercell forums</a>.)</p>
    <p>(?) Gem costs.</p>
    <p>(?) Clan Castle troops.</p>
</div>

<div class="footer">
    Developed by <a href="/en/">Mikhail Kalashnik</a>
</div>

</body>
</html>
