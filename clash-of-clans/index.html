<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Clash of Clans — Troops and Spells Cost Calculator/Time Planner</title>
    <meta name="description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle."/>
    <style>html,body{background:#fefefe;color:#222}body{font-family:'PT Sans','Helvetica Neue',Arial,sans-serif;font-size:18px;line-height:1.5;margin:20px 40px}a{white-space:nowrap}a:link{color:#4100f1}a:link,a:visited{text-decoration:none}a:visited{color:#63008c}a:hover,a:active{text-decoration:underline}h1{font-size:28px;margin:0 0 12px}h2{font-size:22px;margin:18px 0 4px}p{margin:0 0 12px}.content{min-width:260px;max-width:520px}.photo{margin:8px 0 20px 20px;float:right;border-radius:10px}@media all and (max-width:560px){.photo{float:none;display:block;margin:0 auto 20px}}a.title{color:#222;text-decoration:none}.footer{margin-top:30px;font-size:14px;color:#ccc}.footer a:link,.footer a:visited{text-decoration:underline;color:#ccc}.footer a:hover,.footer a:active{text-decoration:none}.hidden{display:none}</style>
    <style>body{margin:15px 30px;line-height:1.4}kbd{background:#f0f0f0;border:1px solid #ddd;border-radius:5px;padding:0 4px}kbd,.field{font-family:inherit}.field{font-size:inherit}.units{border-spacing:0;margin-bottom:24px;border-left:1px solid #ddd;border-top:1px solid #ddd;margin-left:-11px;border-radius:10px;font-size:16px}.units_common{margin-bottom:12px}.units th{text-align:left;padding:1px 10px 2px;white-space:nowrap;border-bottom:1px solid #ddd;border-right:1px solid #ddd}.units thead tr:first-child th:first-child,.units_common tr:first-child td:first-child{border-top-left-radius:10px}.units thead tr:first-child th:last-child,.units_common tr:first-child td:last-child{border-top-right-radius:10px}.units td{padding:2px 10px 3px;white-space:nowrap;border-bottom:1px solid #ddd;border-right:1px solid #ddd}.units td>input{text-align:right}.units tfoot td:first-child,.units_common tr:last-child td:first-child{border-bottom-left-radius:10px}.units tfoot td:last-child,.units_common tr:last-child td:last-child{border-bottom-right-radius:10px}.units tbody tr:hover td{background:#f9f9f9}.units-quantity,.changelog{font-size:14px}.changelog{border-spacing:0;margin-bottom:12px}.changelog td{padding:2px 24px 3px 0;vertical-align:top}.todo{font-size:14px}.cost-elixir{background-position:100% 50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAHQUlEQVR4Xq2Wa2wcVxmG33PmvhevvWu89tqOY7u5OMZ16oQkDU0ISUWsJo3SllAognIJhQrEVSBaIQWQ8qMgCghoVH4gVAlK1aYIiYqLQCJUaUlFQbSlsoLjpCnKPfi615k5h1c7R4mTSA2iXenR983I2kfv+T7PLN7Cj0XacvD796S3rP54bnzbBzLbhwHYb6UkU7SLWz/WunPfgZ4vPP3LG/Yf+dPyA2f+NvxE7ejq36rfLPvh2bH0ivFLgjdhL72/Zfsd6zIr79nQsmp4MLU0V7ALsKwAkClAOM1glg7bA+Xe8GaEmT2FXR+6O7flU2uygzcu9TuTr5AuqyQsqnJJmJIeeuwO9/8Srg2G1324bfyBW9s37Bzyl9gQGoAiEaCFkYhEqiO2Aik7J/udntJigXwDhzA1/cn8PZ/7Zvd9T+8t7dw9FPTaTQk0YSvI1R/KoIG0nUN/a+8IgMz/ItQ96Ol+aMlXv3d/953fGc+v7Q44IyYhHgmIC8BcQxKLSCPVsKSLrlznkFvI9lx3hiWUlnyj7/5H7mrfuiNnW808sFoTGQRRgA7NkSJJKijUijQAxMRFp1Usrc+uWvHsxSMT1yY0Q3hP9uaNDw185eDu9s2UUSBzEHYHa5q0UJwjrLzPa+KbGTalBtFM3J8etEpBfqMZEayrk21y19+4t/i+n25pXbO6xXLh2EEyL23mhhgQknhGZJv7atHodSIULlJuJ16W/6wcwvNPYQ7RlQlT6NrTtf3hd+RGhkNV1gINQNUA1C/LoEwPIhKEJMIIYdIS3keYwYj/9lXZqtt39ZG6X+/44r5bW9+5raEqcKQQ4tIBWCaJMDOK6K2TWjJHxetYs5LLVnMqdawMBzo6U70brhDem79r9+3ZbR9VzAWqHOEmArN9JlSSUjdIlYIFiiqAoDAlAY8sdiIG4ln0yYKzo2/zu0FfUxgg6N6R3/Zgq9PuzvAPUpydNMPX2gYcB8gS2yy1jklEFEUAxgJgdw7Y1Qb0uYBalBINZGUGQ6p3CECuKfxI4Y571+XWjE5HZTjShS1cVg+W8CFcSpaSZaTbAm8STTlrQJZbwKYMcFsWuJN1I6slFiVlEwXoVb3FtuG2LIXIr28de2+H24W6asCnyJMBXCuN5gwdClxNQcw+ooR9mqKMZGr2BdY2UgRQIp02kGbVxkigYgxklua2lm7usEftlWuX+YPD5biBumZ8eJCQ0NTFdImqgjwXAr5OltUxAEnKagycbQCTbpLm9TpQAyBt4ppRRsgEuXS67Pfafeme0SV+nzujqtCCEgA1HTFQFZAWNA3ORep9AeFYRqiSRYl5fYHCowvADK/pwt8rQINii0Lpm22dh2/5tqirvPQtL9tiZ6CaiyARao2IwoaKELPXktfNY1WXH5WaSErtECiTYzS9MA88S/EJis2bBJogJgxgScQSgQ0hbCEkpJCMIQVFaGgFV2jErJJCbZ5WNjFvIWM1s1ogVVK26DFPJBWbtwZBA8qPEUktbQWhdXMcdnMza/E8hZRpAgEBiogCodzSZgMFawz2BqVgttJAsSonKa0IlXQZC1FN2eV4oV6O5ijLCJ+bWY7LqOsYIVXMB7YUK9DGPmR1IC0JEcM8XVhDUiMqvvIodZi4PRdH9bFwYvrY6/J4/bVXpipTYYsMdIoJNRzMRdxYFSHUCpEmKiRRM0QsWJsNiczm1rVJGBt7ZPoG/XXogsbL1WOvTr46+Zw9UZ3640vViSM35dbc4gsbWS7QhcZ5eNxSS1jwiRNKuNLMTJs5AbBCMISACLVJBZPMzFE3iMTx9Gt47vQ/fgHgvAWgXovC+ZvSK3a1ex02ILjhNfwnmoedzNB8l04qk4kG+xogmExEMUQyTCMKk6pZozpUMYWf60N/+PYzjzwAoEohcLxxcmrA6xxYnx0bFbC1JaTg/yXKqgKLSqmleTNRFGlCM9EUmDSQFCyWaVWBCNrwfHHqwvdPPPaZk6f+PbH4BRxN1CdfGXS63zWcXt4JIeBaLmZ4rPOqRqUigFCUxOTSUsRUEUoU0RRFjF6PKnDsLKY65/WjFw9+6+DhXz925S8zw6izfN2Xe/ceGG/fOVYG+MSawZlwGtVoASkh0ep4yEgPgRDwBGfL6lIpkSyM4sy00ih4RZzrivCj8hM/2//iDz6NacxeKzQMuMWRB3s++92tuS3bArsVF6KKvhDNidlotpnAF5JSB2niCQ0LupnSYZcSns4HHWIyf6b8eO1Xj+//y4F9qODUtb89r6Xwpbd98BO3t9/2+ZHsaFHB5hKVMccjbuiGFlS4kPAkK4TIW2m0OXksuGUc0i8c+/Hsk1975qXfP2mea7i+0LDZHtl8d2nXfYNB/y3dbndvm9sufduDZZ5vWscI4zrORefD4/HJqcPOX//88OmfPBqeDl98w1/X16OEoHdTfstQAen1Ja8rn7MKAlCYDqf1CZw6O6cWDj91/nf/AnAG1/n8F5ibEdUKUt6kAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:14px 16px;padding-right:19px}.cost-dark-elixir{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAD80lEQVR42q2XS0hUYRiGc0bHGW9z8T7jjI6O10wFNTGpwETaSTFkgkLSKpLCIBiCGggKgmBaRq4El1KbNl02Ii0qioIWLVpUuFBaFBKUk56v9z34i/xzRg6OBx7O/Xv/9/u+/58zh0TkQMDmBH4QBT3gFDgM8nc/l6tICRgGSfAYvAar4C8wwBo4nbMgtiC4DF6Bn0CysAVm9iuoHF0CH4HYYMvhcFzblyC2o+AJSAMBhh1RCN63JYgtb3tfDK6CFRsCupgUFRU9Y2ZsOcQWAnNgU3NlC6fTKT6f73tpaWmbHYcR8BRIDhhwuFleXj6mC+ppPAbeAskVCIrX673H2JYOXS5XV15e3qdchRRut1sqKyuf19XVeTIEKyoqavPz819q9cqZ6urqFVXH3el0ocgP4Y4nB0pZWdkGmueCLngObNhpdQWyYXaix+ORQCAgxcXFYjXgwsJCiUQi8zh27G7/D1YCDFBSUsI6cKRsAp6TnesDAwMyOTkp4+Pj0tDQkBEDfSE1NTVvuLgrwRtZHLHDpLOzU/r6+qS5uVlQZ4Up1tvbK4lEQpaWlmR5eVmmp6eloKAgYz5WVVV9CwaDEYoFwPts7jCHpKenx3TR3t4ueMmktrZWwuGwDA8PSyqVkrW1NVlfX5dkMslMZMSJRqO/hoaG+ig4mq12HBm6S+rr6yUWi7EOEgqFuKeYeX1wcFBmZ2dlcXHRZGJiglNBj0XBf8jUGQpez+KOLzKldMmUKFd8mVDQdD0yMiJTU1MSj8elra2NDZURj7VtbW29SMHbVoLsQDaF3++nGJ0pdxQzHTc1NUljY6O0tLRQmANgRqw61dh+foaCd9VFrZVZC7a7EqQ7jpQiFCQU5yDoXk0NOtSzZSCdbLorFLyjCfKF3YLsRuWOLpQoxXisBJkNloECeraM/v5+ZsJ0eMuqfmxtjpZBKMjOpEOsiUqY8Jj3OE1Yb3PO6fEYB4JpPDdGwbMgraeULjlaLEmqYZSYgue8zrVSpZOdrQtyYJyvXFgqKegFy8BqhVBpZVCuFkwtHRGe0z3vs1mYFculsKury+ju7k7srKUYVRw3/2RJLbuVQdX0oAiPCVPO+0pMh89T8AUXGCVIl24wb9Gtqujqh5QC3NM54cLN+5aLNt/p6Oj4gdSfpI7+axHTFnBdlDVlEKIJWa5S7GQDC0FSaRCrT8F32UQZnDVhMH2u6WJwxXm64MOmC+qiR8BLIPv45TdQSzbWb6wqc8hEUI+f7YutHCTAqlVQDeWeaWaTfMF8Pc8/N1pcW9+lJ8AC+Aq29qhvGnPwMyb/I7jq3Sum3c/8MBgFN0EKPCBIXwpCCTTTcexr7MT6D9eNFIrhqHsGAAAAAElFTkSuQmCC);background-size:14px 16px}.cost-dark-elixir,.cost-gold{background-position:100% 50%;background-repeat:no-repeat;padding-right:19px}.cost-gold{background-image:url(data:image/png;base64,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);background-size:15px 16px}.like-button{color:#222;cursor:pointer;display:inline-block;border:1px outset #777;border-radius:8px;padding:0 8px}.like-button_after{margin-left:6px}.like-button_lonely{margin-left:-8px;margin-right:16px}.number{text-align:right}.limit-exceeded{color:#d00}.intro{font-size:16px}.result{font-weight:700}.saved-list{font-size:14px}.saved-list__item{display:inline-block;margin:0 30px 17px -13px;border:1px solid #ddd;border-radius:10px;padding:10px 13px;vertical-align:top;color:#444;line-height:1.35}.saved-list__item-title{font-weight:700;color:#222;margin-bottom:3px}.saved-list__item-title_next{margin-top:8px}.saved-list__item-title span{float:right}.saved-list__item-result{margin-top:3px}.saved-list__actions{margin-top:8px}.saved-list__table{border-spacing:0}.saved-list__table td{padding-right:8px;padding-top:0;padding-bottom:0}.saved-list__table .saved-list__level{padding-top:6px;line-height:8px}</style>
    <script>"Microsoft Internet Explorer"==navigator.appName&&function(e,n,r,t){e.src="/clash-of-clans/i/favicon-v2.ico",r=n.getElementsByTagName("script")[0],t=r.parentNode.insertBefore(n.createElement("link"),r),t.rel="shortcut icon",t.href=e.src}(new Image,document);</script>
    <link rel="icon" href="/clash-of-clans/i/favicon-v2.png"/>
    <link rel="apple-touch-icon-precomposed" href="/clash-of-clans/i/app-icons/57x57.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/clash-of-clans/i/app-icons/72x72.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/clash-of-clans/i/app-icons/114x114.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/clash-of-clans/i/app-icons/144x144.png"/>
    <meta name="apple-mobile-web-app-title" content="CoC Calc" />
    <meta property="fb:admins" content="splurov"/>
</head>
<body>

<h1>Clash of Clans — Troops and Spells Cost Calculator/Time Planner</h1>

<div class="intro">
    <p>Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle.</p>

    <p>All entered data will be saved in your browser and pre-filled in next time you visit this page.</p>
</div>

<table class="units units_common">
    <tr>
        <td>
            <label for="barracks-levels-1">Barracks Levels</label>
        </td>
        <td>
            <select id="barracks-levels-1" class="field" tabindex="1">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-2" class="field" tabindex="5">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-3" class="field" tabindex="10">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-4" class="field" tabindex="15">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>
            <label for="dark-barracks-levels-1">Dark Barracks Level</label>
        </td>
        <td>
            <select id="dark-barracks-levels-1" class="field" tabindex="20">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected="selected">3</option>
            </select>
            <select id="dark-barracks-levels-2" class="field" tabindex="25">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected="selected">3</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>
            <label for="army-camps">Army Camps Capacity</label>
        </td>
        <td>
            <input class="js-number field" data-multiplier="5" value="220" id="army-camps" size="4" tabindex="30"/>
        </td>
    </tr>

    <tr>
        <td>
            <label for="spell-factory-level">Spell Factory Level</label>
        </td>
        <td>
            <select id="spell-factory-level" class="field" tabindex="35">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected="selected">4</option>
            </select>
        </td>
    </tr>
</table>

<table id="units" class="units">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th><span class="cost-elixir">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="units-quantity"></span></th>
            <th><span class="cost-elixir">Total</span></th>
            <th colspan="4">Barracks <span class="limit-exceeded units-quantity" style="display: none;" id="units-barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td id="units-barrack-header-1"></td>
            <td id="units-barrack-header-2"></td>
            <td id="units-barrack-header-3"></td>
            <td id="units-barrack-header-4"></td>
        </tr>
    </thead>
    <tbody id="units-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td id="units-space" class="result"></td>
            <td id="units-cost" class="number result"></td>
            <td id="units-time-barrack-1" class="number"></td>
            <td id="units-time-barrack-2" class="number"></td>
            <td id="units-time-barrack-3" class="number"></td>
            <td id="units-time-barrack-4" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="dark" class="units">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th><span class="cost-dark-elixir">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="dark-quantity"></span></th>
            <th><span class="cost-dark-elixir">Total</span></th>
            <th colspan="2">Dark Barracks <span class="limit-exceeded units-quantity" style="display: none;" id="dark-barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td id="dark-barrack-header-1"></td>
            <td id="dark-barrack-header-2"></td>
        </tr>
    </thead>
    <tbody id="dark-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td id="dark-space" class="result"></td>
            <td id="dark-cost" class="number result"></td>
            <td id="dark-time-barrack-1" class="number"></td>
            <td id="dark-time-barrack-2" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="spells" class="units">
    <thead>
        <tr>
            <th>Spell</th>
            <th>Level</th>
            <th><span class="cost-gold">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="spells-quantity"></span></th>
            <th><span class="cost-gold">Total</span></th>
        </tr>
    </thead>
    <tbody id="spells-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td class="result">
                <span id="spells-space"></span>
                —
                <span id="spells-time"></span>
            </td>
            <td id="spells-cost" class="number result"></td>
        </tr>
    </tfoot>
</table>

<p>
    <span id="save" class="like-button like-button_lonely" tabindex="2000">Save Calculation</span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<script>/**
* @preserve Copyright 2012 Twitter, Inc.
* @license http://www.apache.org/licenses/LICENSE-2.0.txt
*/
var Hogan={};(function(a,b){function i(a){return String(a===null||a===undefined?"":a)}function j(a){return a=i(a),h.test(a)?a.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&#39;").replace(g,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(a,b,c){return""},v:j,t:i,render:function(b,c,d){return this.ri([b],c||{},d)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&typeof e=="string"&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d)){c(a,b,this);return}for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&a.length===0?!1:(typeof a=="function"&&(a=this.ls(a,b,c,d,e,f,g)),h=a===""||!!a,!d&&h&&b&&b.push(typeof a=="object"?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if(a==="."&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&typeof f=="object"&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(!d&&typeof f=="function"&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;for(var h=b.length-1;h>=0;h--){f=b[h];if(f&&typeof f=="object"&&a in f){e=f[a],g=!0;break}}return g?(!d&&typeof e=="function"&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=d==null?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);i=a.call(h);if(typeof i=="function"){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,c){var d=b[b.length-1],e=a.call(d);if(typeof e=="function"){e=i(e.call(d));if(this.c&&~e.indexOf("{{"))return this.c.compile(e,this.options).render(d,c)}return i(e)}};var c=/&/g,d=/</g,e=/>/g,f=/\'/g,g=/\"/g,h=/[&<>\"\']/,k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(a){function h(a){a.n.substr(a.n.length-1)==="}"&&(a.n=a.n.substring(0,a.n.length-1))}function i(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function j(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function k(a,b,c,d){var e=[],f=null,g=null;while(a.length>0){g=a.shift();if(g.tag=="#"||g.tag=="^"||l(g,d))c.push(g),g.nodes=k(a,g.tag,c,d),e.push(g);else{if(g.tag=="/"){if(c.length===0)throw new Error("Closing tag without opener: /"+g.n);f=c.pop();if(g.n!=f.n&&!m(g.n,f.n,d))throw new Error("Nesting error: "+f.n+" vs. "+g.n);return f.end=g.i,e}e.push(g)}}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return e}function l(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].o==a.n)return a.tag="#",!0}function m(a,b,c){for(var d=0,e=c.length;d<e;d++)if(c[d].c==a&&c[d].o==b)return!0}function n(a){return a.replace(f,"\\\\").replace(c,'\\"').replace(d,"\\n").replace(e,"\\r")}function o(a){return~a.indexOf(".")?"d":"f"}function p(a){var b="";for(var c=0,d=a.length;c<d;c++){var e=a[c].tag;e=="#"?b+=q(a[c].nodes,a[c].n,o(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):e=="^"?b+=r(a[c].nodes,a[c].n,o(a[c].n)):e=="<"||e==">"?b+=s(a[c]):e=="{"||e=="&"?b+=t(a[c].n,o(a[c].n)):e=="\n"?b+=v('"\\n"'+(a.length-1==c?"":" + i")):e=="_v"?b+=u(a[c].n,o(a[c].n)):e===undefined&&(b+=v('"'+n(a[c])+'"'))}return b}function q(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+n(b)+'",c,p,1),'+"c,p,0,"+d+","+e+',"'+f+'")){'+"_.rs(c,p,"+"function(c,p,_){"+p(a)+"});c.pop();}"}function r(a,b,c){return"if(!_.s(_."+c+'("'+n(b)+'",c,p,1),c,p,1,0,0,"")){'+p(a)+"};"}function s(a){return'_.b(_.rp("'+n(a.n)+'",c,p,"'+(a.indent||"")+'"));'}function t(a,b){return"_.b(_.t(_."+b+'("'+n(a)+'",c,p,0)));'}function u(a,b){return"_.b(_.v(_."+b+'("'+n(a)+'",c,p,0)));'}function v(a){return"_.b("+a+");"}var b=/\S/,c=/\"/g,d=/\n/g,e=/\r/g,f=/\\/g,g={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(c,d){function w(){p.length>0&&(q.push(new String(p)),p="")}function x(){var a=!0;for(var c=t;c<q.length;c++){a=q[c].tag&&g[q[c].tag]<g._v||!q[c].tag&&q[c].match(b)===null;if(!a)return!1}return a}function y(a,b){w();if(a&&x())for(var c=t,d;c<q.length;c++)q[c].tag||((d=q[c+1])&&d.tag==">"&&(d.indent=q[c].toString()),q.splice(c,1));else b||q.push({tag:"\n"});r=!1,t=q.length}function z(a,b){var c="="+v,d=a.indexOf(c,b),e=i(a.substring(a.indexOf("=",b)+1,d)).split(" ");return u=e[0],v=e[1],d+c.length-1}var e=c.length,f=0,k=1,l=2,m=f,n=null,o=null,p="",q=[],r=!1,s=0,t=0,u="{{",v="}}";d&&(d=d.split(" "),u=d[0],v=d[1]);for(s=0;s<e;s++)m==f?j(u,c,s)?(--s,w(),m=k):c.charAt(s)=="\n"?y(r):p+=c.charAt(s):m==k?(s+=u.length-1,o=g[c.charAt(s+1)],n=o?c.charAt(s+1):"_v",n=="="?(s=z(c,s),m=f):(o&&s++,m=l),r=s):j(v,c,s)?(q.push({tag:n,n:i(p),otag:u,ctag:v,i:n=="/"?r-v.length:s+u.length}),p="",s+=v.length-1,m=f,n=="{"&&(v=="}}"?s++:h(q[q.length-1]))):p+=c.charAt(s);return y(r,!0),q},a.generate=function(b,c,d){var e='var _=this;_.b(i=i||"");'+p(b)+"return _.fl();";return d.asString?"function(c,p,i){"+e+";}":new a.Template(new Function("c","p","i",e),c,a,d)},a.parse=function(a,b,c){return c=c||{},k(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}(typeof exports!="undefined"?exports:Hogan)</script>

<script>var templates={};templates.item_row=new Hogan.Template(function(b,t,s){var e=this;return e.b(s=s||""),e.b('<tr id="'),e.b(e.v(e.f("rowId",b,t,0))),e.b('">'),e.b("\n"+s),e.b("        <td>"),e.b("\n"+s),e.b('            <label for="'),e.b(e.v(e.f("id",b,t,0))),e.b('">'),e.b(e.v(e.f("title",b,t,0))),e.b("</label>"),e.b("\n"+s),e.b("        </td>"),e.b("\n"+s),e.b("        <td>"),e.b("\n"+s),e.b('            <select id="'),e.b(e.v(e.f("levelId",b,t,0))),e.b('" class="field" tabindex="'),e.b(e.v(e.f("tabIndexLevel",b,t,0))),e.b('">'),e.b("\n"+s),e.s(e.f("levelContent",b,t,1),b,t,0,224,305,"{{ }}")&&(e.rs(b,t,function(b,t,s){s.b('                    <option value="'),s.b(s.v(s.f("value",b,t,0))),s.b('">'),s.b(s.v(s.f("text",b,t,0))),s.b("</option>"),s.b("\n")}),b.pop()),e.b("            </select>"),e.b("\n"+s),e.b("        </td>"),e.b("\n"+s),e.b('        <td id="'),e.b(e.v(e.f("costId",b,t,0))),e.b('" class="number">'),e.b("\n"+s),e.b("        </td>"),e.b("\n"+s),e.b("        <td>"),e.b("\n"+s),e.s(e.f("spells",b,t,1),b,t,0,453,706,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b('                <select id="'),e.b(e.v(e.f("id",b,t,0))),e.b('" class="field" tabindex="'),e.b(e.v(e.f("tabIndexValue",b,t,0))),e.b('">'),e.b("\n"+s),e.s(e.f("options",b,t,1),b,t,0,566,655,"{{ }}")&&(e.rs(b,t,function(b,t,s){s.b('                        <option value="'),s.b(s.v(s.f("value",b,t,0))),s.b('">'),s.b(s.v(s.f("text",b,t,0))),s.b("</option>"),s.b("\n")}),b.pop()),e.b("                </select>"),e.b("\n")}),b.pop()),e.s(e.f("spells",b,t,1),b,t,1,0,0,"")||(e.b('                <input class="js-number field" id="'),e.b(e.v(e.f("id",b,t,0))),e.b('" size="4"tabindex="'),e.b(e.v(e.f("tabIndexValue",b,t,0))),e.b('"/>'),e.b("\n")),e.b("        </td>"),e.b("\n"+s),e.b('        <td id="'),e.b(e.v(e.f("summaryId",b,t,0))),e.b('" class="number">'),e.b("\n"+s),e.b("        </td>"),e.b("\n"+s),e.s(e.f("barracksTimes",b,t,1),b,t,0,965,1038,"{{ }}")&&(e.rs(b,t,function(b,t,s){s.b('            <td id="'),s.b(s.v(s.f("barrackQuantityId",b,t,0))),s.b('" class="number"></td>'),s.b("\n")}),b.pop()),e.b("    </tr>"),e.fl()}),templates.saved_list_item=new Hogan.Template(function(b,t,s){var e=this;return e.b(s=s||""),e.b('<div class="saved-list__item" id="saved-list-item-'),e.b(e.v(e.f("index",b,t,0))),e.b('">'),e.b("\n"+s),e.s(e.f("hasUnits",b,t,1),b,t,0,79,494,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b('        <div class="saved-list__item-title"><span class="cost-elixir">'),e.b(e.v(e.f("totalCost",b,t,0))),e.b("</span>Units</div>"),e.b("\n"+s),e.b('        <table class="saved-list__table">'),e.b("\n"+s),e.s(e.f("units",b,t,1),b,t,0,246,462,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b("                <tr>"),e.b("\n"+s),e.b('                    <td class="number">'),e.b(e.v(e.f("quantity",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                    <td>"),e.b(e.v(e.f("name",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b('                    <td class="saved-list__level">'),e.b(e.v(e.f("level",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                </tr>"),e.b("\n")}),b.pop()),e.b("        </table>"),e.b("\n")}),b.pop()),e.b("\n"+s),e.s(e.f("hasDark",b,t,1),b,t,0,525,971,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b('        <div class="saved-list__item-title saved-list__item-title_next"><span class="cost-dark-elixir">'),e.b(e.v(e.f("darkCost",b,t,0))),e.b("</span>&nbsp;</div>"),e.b("\n"+s),e.b('        <table class="saved-list__table">'),e.b("\n"+s),e.s(e.f("dark",b,t,1),b,t,0,724,940,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b("                <tr>"),e.b("\n"+s),e.b('                    <td class="number">'),e.b(e.v(e.f("quantity",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                    <td>"),e.b(e.v(e.f("name",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b('                    <td class="saved-list__level">'),e.b(e.v(e.f("level",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                </tr>"),e.b("\n")}),b.pop()),e.b("        </table>"),e.b("\n")}),b.pop()),e.b("\n"+s),e.s(e.f("hasCapacity",b,t,1),b,t,0,1005,1115,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b('        <div class="saved-list__item-result">'),e.b("\n"+s),e.b("            "),e.b(e.v(e.f("totalCapacity",b,t,0))),e.b("/"),e.b(e.v(e.f("armyCamps",b,t,0))),e.b("\n"+s),e.b("        </div>"),e.b("\n")}),b.pop()),e.b("\n"+s),e.s(e.f("hasSpells",b,t,1),b,t,0,1151,1711,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b('        <div class="saved-list__item-title saved-list__item-title_next"><span class="cost-gold">'),e.b(e.v(e.f("spellsCost",b,t,0))),e.b("</span>Spells</div>"),e.b("\n"+s),e.b('        <table class="saved-list__table">'),e.b("\n"+s),e.s(e.f("spells",b,t,1),b,t,0,1347,1563,"{{ }}")&&(e.rs(b,t,function(b,t,e){e.b("                <tr>"),e.b("\n"+s),e.b('                    <td class="number">'),e.b(e.v(e.f("quantity",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                    <td>"),e.b(e.v(e.f("name",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b('                    <td class="saved-list__level">'),e.b(e.v(e.f("level",b,t,0))),e.b("</td>"),e.b("\n"+s),e.b("                </tr>"),e.b("\n")}),b.pop()),e.b("        </table>"),e.b("\n"+s),e.b('        <div class="saved-list__item-result">'),e.b("\n"+s),e.b("            "),e.b(e.v(e.f("spellsCapacity",b,t,0))),e.b("/"),e.b(e.v(e.f("spellsFactoryLevel",b,t,0))),e.b("\n"+s),e.b("        </div>"),e.b("\n")}),b.pop()),e.b("\n"+s),e.b('    <div class="saved-list__actions">'),e.b("\n"+s),e.b('        <span class="like-button like-button_lonely js-saved-load" data-num="'),e.b(e.v(e.f("index",b,t,0))),e.b('" tabindex="'),e.b(e.v(e.f("tabIndexLoad",b,t,0))),e.b('" title="Current calculation will be lost">Load</span>'),e.b("\n"+s),e.b('        <span class="like-button like-button_lonely js-saved-delete" data-num="'),e.b(e.v(e.f("index",b,t,0))),e.b('" tabindex="'),e.b(e.v(e.f("tabIndexDelete",b,t,0))),e.b('">Delete</span>'),e.b("\n"+s),e.b("    </div>"),e.b("\n"+s),e.b("</div>"),e.fl()});</script>

<script>(function(e,t){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,a=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,a.concat(Array.prototype.slice.call(arguments)))}});var a=function(e,t){var a;for(a in e)if(e.hasOwnProperty(a)&&t(a,e[a])===!1)break},n=function(e){var t=e.constructor();return a(e,function(e,a){t[e]=a}),t},r=function(e){return(""+e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},l=function(e){return e.replace("_"," ").replace(/-/g,".")},i=function(e,t){var a="",n=e;if(n>3599&&(a+=Math.floor(n/3600)+"h ",n%=3600),n>59){var r=Math.floor(n/60);n%=60,t&&n>0&&r++,a+=r+"m "}else a+="0m ";return""!==a&&t||(a+=n+"s"),a},s=function(t,a){this.key=t,this.defaultData=a,this.load=function(){var t=e.localStorage.getItem(this.key);return t&&JSON.parse(t)||this.defaultData},this.save=function(t){e.localStorage.setItem(this.key,JSON.stringify(t))}},u=function(e){this.data=e,this.get=function(e,t){var a=this.data[e];return void 0!==t&&void 0===a?t:a},this.set=function(e,t){this.data[e]=t},this.getAll=function(){return this.data}},c=function(e){this.entries=[],this.retrieve=function(e){return this.entries[e]},this.insert=function(e){this.entries.push(new u(e))},this.remove=function(e){this.entries.splice(e,1)},this.getAll=function(){return this.entries.map(function(e){return e.getAll()})},this.forEach=function(e){this.entries.forEach(e)},e.forEach(this.insert.bind(this))},o=function(){var e={};this.get=function(a){return e.hasOwnProperty(a)||(e[a]=t.getElementById(a)),e[a]}},v=new o,p=new s("savedData",{}),d=new u(p.load()),f=function(e,t,a){this.barracks=[];var n;for(n=1;e>=n;n++){var r=v.get(t+"-"+n);this.barracks.push(r)}this.setDefaults=function(){var e=d.get(a);e&&this.barracks.forEach(function(t,a){t.options[e[a]].selected=!0})},this.updateSavedData=function(){d.set(a,this.barracks.map(function(e){return e.selectedIndex}))},this.getMaxLevel=function(){return Math.max.apply(null,this.barracks.map(function(e){return parseInt(e.value,10)}))},this.getAll=function(){return this.barracks},this.getLevels=function(){return this.barracks.map(function(e){return e.value})},this.getMaxCount=function(){return e}},g={units:new f(4,"barracks-levels","barracksLevels"),dark:new f(2,"dark-barracks-levels","darkBarracksLevels")},m=v.get("army-camps"),h=v.get("spell-factory-level"),y={Barbarian:[20,[25,40,60,80,100,150],1,1],Archer:[25,[50,80,120,160,200,300],1,2],Goblin:[30,[25,40,60,80,100],1,3],Giant:[120,[500,1e3,1500,2e3,2500,3e3],5,4],Wall_Breaker:[120,[1e3,1500,2e3,2500,3e3],2,5],Balloon:[600,[2e3,2500,3e3,3500,4e3,4500],5,6],Wizard:[600,[1500,2e3,2500,3e3,3500],4,7],Healer:[1200,[7e3,1e4,13e3],20,8],Dragon:[1800,[25e3,3e4,36e3],20,9],"P-E-K-K-A-":[2700,[3e4,35e3,42e3],25,10]},k=v.get("units"),L={Lightning:[3600,[15e3,16500,18e3,2e4,22e3],1,1],Healing:[5400,[2e4,22e3,24e3,26500,29e3],1,2],Rage:[7200,[3e4,33e3,36e3,4e4,44e3],1,3],Jump:[5400,[3e4,38e3],1,4]},b=v.get("spells"),I={units:[0,20,25,30,35,40,45,50,55,60,75],dark:[0,40,50,60]},E={Minion:[45,[6,7,8,9,10],2,1],"Hog Rider":[300,[30,35,40,45,50],6,2],Valkyrie:[900,[100,120,140,160],8,3]},x=v.get("dark"),M=0,A=function(e,t,a){var n=e-t;0>n&&(n='<span class="limit-exceeded">'+n+"</span>"),v.get(a+"-quantity").innerHTML="("+n+")",t>e&&(t='<span class="limit-exceeded">'+t+"</span>"),t=t+" / "+e,v.get(a+"-space").innerHTML=t},C=function(e,t,n){n.table.style.display=0===n.levelValue?"none":"";var l;for(l=n.capLevel;l>=1;l--)v.get(t+"-building-level-"+l).style.display=l>n.levelValue?"none":"";var s=0,u=0,c=0,o=[];if(a(e,function(e,a){if(!(a[3]>n.levelValue)){var l=v.get(e),i=parseInt(l.value,10)||0;0>i&&(i=0),""!==l.value&&(l.value=i);var p=e+"-level",f=v.get(p),m=v.get(e+"-cost"),h=v.get(e+"-summary"),y=f.value,k=y*i;if(m.innerHTML=r(y),h.innerHTML=k?r(k):0,s+=k,u+=a[2]*i,"spells"===t)c+=a[0]*i;else{var L;for(L=1;g[t].getMaxCount()>=L;L++)v.get("quantity-"+e+"-"+L).innerHTML="";i>0&&o.push({name:e,quantity:i,time:a[0],level:a[3],space:a[2]})}d.set(e,i),d.set(p,f.selectedIndex)}}),"units"===t||"dark"===t){var p=g[t].getLevels();p.forEach(function(e,a){var n;n=0===parseInt(e,10)?"":e+' lvl <span class="'+t+'-quantity" title="Maximum Unit Queue Length">('+I[t][e]+")</span>",v.get(t+"-barrack-header-"+(a+1)).innerHTML=n});var f={};g[t].getAll().forEach(function(e){f[e.getAttribute("id")]={time:0,space:0,maxSpace:I[t][e.value],units:{},level:e.value}}),o.sort(function(e,t){return e.time<t.time?1:e.time>t.time?-1:e.quantity>t.quantity?-1:e.quantity<t.quantity?1:0});var m,h,y=function(e,t,a){var n,r=null,l=[];for(n in e){var i=e[n];t>i.level||i.space+a>i.maxSpace||l.push(i)}return l.length>1?(l.sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:e.space<t.space?-1:e.space>t.space?1:0}),r=l[0]):l.length&&(r=l[0]),r},k=!1;for(m=0,h=o.length;h>m;m++){var L,b=o[m];for(L=0;b.quantity>L;L++){var E=y(f,b.level,b.space);if(null===E){k=!0;break}E.units[b.name]||(E.units[b.name]={time:0,quantity:0}),E.units[b.name].time+=b.time,E.units[b.name].quantity+=1,E.time+=b.time,E.space+=b.space}}if(k)v.get(t+"-barracks-exceeded").style.display="",a(f,function(e){var a=e.slice(-1);v.get(t+"-time-barrack-"+a).innerHTML=""});else{v.get(t+"-barracks-exceeded").style.display="none";var x=0,C=1;a(f,function(e,n){var r=e.slice(-1);a(n.units,function(e,t){t.time>0&&(v.get("quantity-"+e+"-"+r).innerHTML="×"+t.quantity)}),n.time>x&&(x=n.time,C=r),v.get(t+"-time-barrack-"+r).innerHTML=n.time?i(n.time):""});var T=v.get(t+"-time-barrack-"+C);T.innerHTML='<span class="result">'+T.innerHTML+"</span>"}}v.get(t+"-cost").innerHTML=r(s),"spells"===t?A(n.space,u,t):M+=u,"spells"===t&&(v.get(t+"-time").innerHTML=i(c,"spells"===t))},T=function(){M=0;var e=parseInt(m.value,10);(isNaN(e)||0>e)&&(e=0),m.value=e,C(y,"units",{table:k,levelValue:g.units.getMaxLevel(),space:e,capLevel:10}),C(L,"spells",{table:b,levelValue:parseInt(h.value,10),space:h.value,capLevel:4}),C(E,"dark",{table:x,levelValue:g.dark.getMaxLevel(),space:e,capLevel:3}),A(m.value,M,"units"),A(m.value,M,"dark"),g.units.updateSavedData(),g.dark.updateSavedData(),d.set("armyCamps",m.value),d.set("spellFactoryLevel",h.selectedIndex),p.save(d.getAll())},H=function(){g.units.setDefaults(),g.dark.setDefaults(),m.value=d.get("armyCamps",m.value),h.options[d.get("spellFactoryLevel",h.selectedIndex)].selected=!0;var e=function(e,t){a(e,function(e){var a=e+"-level",n=v.get(a);n.options[d.get(a,n.selectedIndex)].selected=!0;var r=v.get(e);"spells"===t?r.options[d.get(e,r.selectedIndex)].selected=!0:r.value=d.get(e)||0})};e(y,"units"),e(L,"spells"),e(E,"dark")};a(g,function(e,t){t.getAll().forEach(function(e){e.addEventListener("change",T,!1)})}),m.addEventListener("input",T,!1),h.addEventListener("change",T,!1);var q=function(a){var n=parseInt(a.getAttribute("data-multiplier"),10)||1,r=function(){var e=parseInt(a.value,10);a.value=isNaN(e)?n:e+n,T()},l=function(){var e=parseInt(a.value,10);a.value=isNaN(e)||2>e?0:e-n,T()},i=function(n){var i=t.createElement("span");i.className="like-button like-button_after",i.innerHTML="plus"===n?"+":"−",i.addEventListener("click","plus"===n?r:l,!1);var s=null,u=null;i.addEventListener("mousedown",function(){u=e.setTimeout(function(){s=e.setInterval("plus"===n?r:l,100)},500)}),i.addEventListener("mouseup",function(){clearTimeout(u),clearInterval(s)}),a.parentNode.appendChild(i)};i("plus"),i("minus")},w=templates.item_row,N=function(e,n,r){var i=function(e,t){return{value:e,text:t+1}},s=[];if("spells"===n){var u;for(u=0;5>u;u++)s.push({value:u,text:u})}var c=v.get(n+"-body");a(e,function(e,a){var u={id:e,title:l(e),levelId:e+"-level",levelContent:a[1].map(i),costId:e+"-cost",summaryId:e+"-summary",rowId:n+"-building-level-"+a[3],tabIndexLevel:r+a[3],tabIndexValue:r+1e3+a[3]};if("spells"===n&&(u.spells={options:s}),"units"===n||"dark"===n){var o,p=[];for(o=1;g[n].getMaxCount()>=o;o++)p.push({barrackQuantityId:"quantity-"+e+"-"+o});u.barracksTimes=p}var d=w.render(u),f=t.createElement("div");f.innerHTML="<table>"+d+"</table>";var m=f.querySelector("tr");c.appendChild(m),v.get(u.levelId).addEventListener("change",T,!1),v.get(u.id).addEventListener("spells"===n?"change":"input",T,!1)})};N(y,"units",100),N(E,"dark",200),N(L,"spells",300);var D=function(e){"input"===e.target.tagName.toLowerCase()&&setTimeout(function(e){e.setSelectionRange(0,9999)}.bind(null,e.target),10)};Array.prototype.slice.call(t.getElementsByClassName("js-number")).forEach(function(e){e.addEventListener("focus",D,!1),q(e)}),H(),T();var S=new s("savedCalculations",[]),B=new c(S.load()),F=templates.saved_list_item,V=function(){var e=[];B.forEach(function(t,n){var i={index:n,tabIndexLoad:n+3e3+1,tabIndexDelete:n+3e3+2},s=[],u=0,c=0,o=t.get("barracksLevels",[10,10,10,10]);a(y,function(e,a){var n=parseInt(t.get(e),10)||0,r=Math.max.apply(null,o.map(function(e,t){return 0===t?e+1:e}));n>0&&r>=a[3]&&(s.push({name:l(e),level:Array(t.get(e+"-level")+2).join("*"),quantity:n}),u+=a[1][t.get(e+"-level")]*n,c+=a[2]*n)}),s.length&&(i.hasUnits={units:s,totalCost:r(u)});var v=t.get("darkBarracksLevels",[4,4]),p=Math.max.apply(null,v);if(p>0){var d=[],f=0;a(E,function(e,a){var n=parseInt(t.get(e),10)||0;n>0&&p>=a[3]&&(d.push({name:l(e),level:Array(t.get(e+"-level")+2).join("*"),quantity:n}),f+=a[1][t.get(e+"-level")]*n,c+=a[2]*n)}),d.length&&(i.hasDark={dark:d,darkCost:r(f)})}if(c>0&&(i.hasCapacity={totalCapacity:c,armyCamps:t.get("armyCamps")}),t.get("spellFactoryLevel")>0){var g=[],m=0,h=0;a(L,function(e,a){var n=parseInt(t.get(e),10)||0;n>0&&a[3]<=t.get("spellFactoryLevel")&&(g.push({name:l(e),level:Array(t.get(e+"-level")+2).join("*"),quantity:n}),m+=a[1][t.get(e+"-level")]*n,h+=a[2]*n)}),g.length&&(i.hasSpells={spells:g,spellsCost:r(m),spellsCapacity:h,spellsFactoryLevel:t.get("spellFactoryLevel")})}e.push(F.render(i))});var t=v.get("saved-list-content");t.innerHTML=e.join(""),Array.prototype.slice.call(t.getElementsByClassName("js-saved-load")).forEach(function(e){e.addEventListener("click",function(){d=new u(n(B.retrieve(e.getAttribute("data-num")).getAll())),H(),T(),V()},!1)}),Array.prototype.slice.call(t.getElementsByClassName("js-saved-delete")).forEach(function(e){e.addEventListener("click",function(){B.remove(e.getAttribute("data-num")),S.save(B.getAll()),V()},!1)})};v.get("save").addEventListener("click",function(){B.insert(n(d.getAll())),S.save(B.getAll()),V()},!1),V()})(window,document);</script>

<!-- Yandex.Metrika counter -->
<script>(function(t,e,a){(e[a]=e[a]||[]).push(function(){try{e.yaCounter19642528=new Ya.Metrika({id:19642528,webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})}catch(t){}});var c=t.getElementsByTagName("script")[0],n=t.createElement("script"),r=function(){c.parentNode.insertBefore(n,c)};n.type="text/javascript",n.async=!0,n.src=("https:"==t.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==e.opera?t.addEventListener("DOMContentLoaded",r,!1):r()})(document,window,"yandex_metrika_callbacks");</script>
<noscript><div><img src="//mc.yandex.ru/watch/19642528" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<script>var _gaq=[["_setAccount","UA-37991363-1"],["_trackPageview"]];(function(e,a){var t=e.createElement(a),c=e.getElementsByTagName(a)[0];t.async=!0,t.src="//www.google-analytics.com/ga.js",c.parentNode.insertBefore(t,c)})(document,"script");</script>

<div id="fb-root"></div>
<script>(function(e,t,n){var c,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(c=e.createElement(t),c.id=n,c.src="//connect.facebook.net/en_US/all.js#xfbml=1",o.parentNode.insertBefore(c,o))})(document,"script","facebook-jssdk");</script>

<h2>Comments</h2>
<p>Feel free to post bugs and feature suggestions.</p>

<div class="fb-comments" data-href="http://mkln.ru/clash-of-clans/" data-width="470" data-num-posts="10"></div>

<h2>Changelog</h2>
<table class="changelog">
    <tr>
        <td>2.3.1</td>
        <td>12 April, 2013</td>
        <td>
            The correct order for keyboard navigation through <kbd>TAB</kbd> key;<br/>
            Production time for each unit separately are no longer displayed (useless information).<br/>
        </td>
    </tr>
    <tr>
        <td>2.3</td>
        <td>11 April, 2013</td>
        <td>
            Added lovely icon for iOS <a href="http://www.apple.com/ios/add-to-home-screen/">“Add to Home Screen”</a> feature;<br/>
            New favicon for easy identification of the site among many open tabs;<br/>
            Retina graphics;<br/>
            Internal optimizations for better performance.<br/>
        </td>
    </tr>
    <tr>
        <td>2.2</td>
        <td>8 April, 2013</td>
        <td>
            Dark Barracks troops distribution;<br/>
            Removed embedded font, font changed to PT Sans/Helvetica Neue/Arial, it greatly reduced the speed of page loading;<br/>
            Army camps capacity increment/decrement in five points.<br/>
        </td>
    </tr>
    <tr>
        <td>2.1</td>
        <td>13 March, 2013</td>
        <td>
            Dark Barracks troops calculation.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0.2</td>
        <td>12 March, 2013</td>
        <td>
            3.54 updates:<br/>
            Wall Breaker capacity increased from 1 to 2;<br/>
            P.E.K.K.A. training time reduced from 1 hour to 45 minutes;<br/>
            P.E.K.K.A. and Dragon costs reduced.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0.1</td>
        <td>5 March, 2013</td>
        <td>
            Fixed a bug in which the units were distributed in barracks without accounting maximum barracks queue;<br/>
            Fixed bug with negative number of units.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0</td>
        <td>28 February, 2013</td>
        <td>
            Added distribution of troops between barracks for optimal training speed;<br/>
            The previous values of the maximum level and number of barracks, unfortunately, have not saved;<br/>
            Production Time removed from saved calculations list;<br/>
            Simplified tables layouts.
        </td>
    </tr>
    <tr>
        <td>1.5</td>
        <td>26 February, 2013</td>
        <td>
            Reduced indents and font sizes;<br/>
            The list of saved calculations is always shown;<br/>
            Redesigned saved calculations layout.<br/>
        </td>
    </tr>
    <tr>
        <td>1.4</td>
        <td>17 February, 2013</td>
        <td>
            Added saving of calculations.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.2</td>
        <td>10 February, 2013</td>
        <td>
            Added description of the calculator;<br/>
            Default values changed to maximum allowed in game.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.1</td>
        <td>9 February, 2013</td>
        <td>
            Added auto-select of text in fields for simplify edit in iOS;<br/>
            Fixed NaN in results and null in fields bug.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3</td>
        <td>8 February, 2013</td>
        <td>
            The title is replaced by the more similar to the contents of the page;<br/>
            Added description for auto-save feature;<br/>
            Added army camps capacity — allows to show free capacity;<br/>
            Added maximum barracks level — allows show/hide unavailable units;<br/>
            Added spells calculation.<br/>
        </td>
    </tr>
    <tr>
        <td>1.2</td>
        <td>6 February, 2013</td>
        <td>
            Added plus/minus buttons;<br/>
            Fixed IE 9+ support;<br/>
            Changed favicon to app store game icon;<br/>
            Added elixir icon to costs;<br/>
            Added intermediate results of the calculations to the units table.<br/>
        </td>
    </tr>
    <tr>
        <td>1.1</td>
        <td>5 February, 2013</td>
        <td>
            Added sixth level for Barbarian, Archer, Giant and Balloon;<br/>
            Fixed Healer 1st level cost;<br/>
            Number of barracks field replaced by the select.<br/>
        </td>
    </tr>
    <tr>
        <td>1.0</td>
        <td>4 February, 2013</td>
        <td>Initial release.</td>
    </tr>
</table>

<h2>To-do</h2>
<div class="todo">
    <!--<p>Form validation.</p>-->
    <p>Production time in saved calculations.</p>
    <p>Sometimes I don't use all my troops, so would be nice if I could have an option to write down the troops I saved and let it automatically adjust the required numbers to what I've predefined. (From <a href="http://forum.supercell.net/showthread.php/17238-Troops-and-Spells-Cost-Calculator?p=219572&amp;viewfull=1#post219572">Supercell forums</a>.)</p>
    <p>(?) Gem costs.</p>
    <p>(?) Clan Castle troops.</p>
</div>

<div class="footer">
    Developed by <a href="/en/">Mikhail Kalashnik</a>
</div>

</body>
</html>
