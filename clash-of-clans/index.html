<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta property="fb:admins" content="splurov"/>
    <meta name="keywords" content="clash of clans, army calculator, troops calculator, army price, troops price, army planner, troops planner"/>
    <title>Clash of Clans — Troops Cost Calculator</title>
    <style>@font-face{font-family:'PT Serif';src:url('/fonts/PTF55F_W.woff') format('woff')}@font-face{font-family:'PT Serif Caption';src:url('/fonts/PTZ55F_W.woff') format('woff')}html,body{background:#fefefe;color:#222}body{font-family:'PT Serif',Georgia,serif;font-size:18px;line-height:1.5;margin:0;padding:20px 40px}a{white-space:nowrap}a:link{color:#4100f1;text-decoration:none}a:visited{color:#63008c;text-decoration:none}a:hover,a:active{text-decoration:underline}h1{font-size:28px;font-family:'PT Serif Caption',Georgia,sans-serif;font-weight:normal;margin:0 0 12px}h2{font-size:22px;font-family:'PT Serif Caption',Georgia,sans-serif;font-weight:normal;margin:18px 0 4px}p{margin:0 0 12px}.content{min-width:260px;max-width:520px}.photo{margin:8px 0 20px 20px;float:right;border-radius:10px}@media all and (max-width:560px){.photo{float:none;display:block;margin:0 auto 20px}}a.fn.url{color:#222;text-decoration:none}.footer{margin-top:30px;font-size:14px;color:#ccc}.footer a:link{text-decoration:underline;color:#ccc}.footer a:visited{text-decoration:underline;color:#ccc}.footer a:hover,.footer a:active{text-decoration:none}.hidden{display:none}</style>
    <style>input,select{font-family:'PT Serif',Georgia,serif;font-size:inherit}.units{border-spacing:0;margin-bottom:12px}.units th{text-align:left;padding:2px 24px 3px 0;font-weight:normal;font-size:22px}.units td{padding:2px 24px 3px 0}.units td>input{text-align:right}.units_result{border-top:2px solid #ccc;border-bottom:2px solid #ccc}.changelog{border-spacing:0;margin-bottom:12px;font-size:14px}.changelog td{padding:2px 24px 3px 0;vertical-align:top}.todo{font-size:14px}.cost-elixir{background:url(/clash-of-clans/i/elixir.png) no-repeat 100% 50%;padding-right:28px}.number-plus,.number-minus{color:#000;cursor:pointer;display:inline-block;margin-left:6px;border:1px solid #aaa;border-radius:8px;padding:0 6px}.number{text-align:right}</style>
    <script>navigator.appName=="Microsoft Internet Explorer"&&(function(b,e,c,a){b.src="/clash-of-clans/i/favicon.ico";c=e.getElementsByTagName("script")[0];a=c.parentNode.insertBefore(e.createElement("link"),c);a.rel="shortcut icon";a.href=b.src})(new Image,document);</script>
    <link rel="icon" href="/clash-of-clans/i/favicon.png"/>
    <script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-37991363-1']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>
</head>
<body>

<h1>Clash of Clans — Troops Cost Calculator</h1>

<table id="units" class="units">
    <tr>
        <th>Unit</th>
        <th>Level</th>
        <th><span class="cost-elixir">Cost</span></th>
        <th>Quantity</th>
        <th><span class="cost-elixir">Total Cost</span></th>
    </tr>
</table>

<p>
    <label for="barracks">Number of Barracks</label>
    <select id="barracks" onchange="calculate()">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
</p>

<table class="units units_result">
    <tr>
        <th colspan="2">All Troops</th>
    </tr>
    <tr>
        <th>Cost</th>
        <td><span class="cost-elixir" id="total-cost"></span></td>
    </tr>
    <tr>
        <th>Required Space</th>
        <td id="total-space"></td>
    </tr>
    <tr>
        <th>Average Production Time</th>
        <td id="total-time"></td>
    </tr>
</table>

<script>(function(){var l=function(i){this.el=i;this.plus=function(){var B=parseInt(this.el.value);if(isNaN(B)){this.el.value=1}else{this.el.value=B+1}calculate()};this.minus=function(B){var C=parseInt(this.el.value);if(isNaN(C)||C<2){this.el.value=""}else{this.el.value=C-1}calculate()};this.create=function(D){var C=document.createElement("span");C.className="number-"+D;C.innerHTML=(D=="plus"?"+":"−");C.onclick=this[D].bind(this);var B=null,E=null;C.onmousedown=function(){E=window.setTimeout(function(){B=window.setInterval(this[D].bind(this),100)}.bind(this),500)}.bind(this);C.onmouseup=function(){clearTimeout(E);clearInterval(B)};i.parentNode.appendChild(C)};this.create("plus");this.create("minus")};var v=function(i){return i.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")};var w={};if("localStorage" in window){w=localStorage.getItem("savedData");if(w){w=JSON.parse(w)}else{w={}}}var y={Barbarian:[1,20,[25,40,60,80,100,150]],Archer:[1,25,[50,80,120,160,200,300]],Goblin:[1,30,[25,40,60,80,100]],Giant:[5,120,[500,1000,1500,2000,2500,3000]],Wall_Breaker:[1,120,[1000,1500,2000,2500,3000]],Balloon:[5,600,[2000,2500,3000,3500,4000,4500]],Wizard:[4,600,[1500,2000,2500,3000,3500]],Healer:[20,1200,[7000,10000,13000]],Dragon:[20,1800,[25000,32500,40000]],"P-E-K-K-A-":[25,3600,[35000,42500,50000]]},n=document.getElementById("units");for(var A in y){var o=y[A],s=document.createElement("tr"),p=[];var g=document.createElement("td");g.innerHTML='<label for="'+A+'">'+A.replace("_"," ").replace(/-/g,".")+"</label>";s.appendChild(g);var f=A+"-level",x=0,q;if(w[f]){x=w[f]}p.push('<select id="'+f+'" onchange="calculate()">');for(var u=0,m=o[2].length;u<m;u++){var z="";if(u==x){z=' selected="selected"';q=o[2][u]}p.push('<option value="'+o[2][u]+'"'+z+">"+(u+1)+"</option>")}p.push("</select>");var e=document.createElement("td");e.innerHTML=p.join("");s.appendChild(e);var d=document.createElement("td"),r=A+"-cost";d.setAttribute("id",r);d.className="number";d.innerHTML=q;s.appendChild(d);var t="",c=document.createElement("td");if(w[A]){t=w[A]}c.innerHTML='<input class="js-number" id="'+A+'" size="4" oninput="calculate()" value="'+t+'"/>';s.appendChild(c);var a=A+"-summary",b=document.createElement("td");b.setAttribute("id",a);b.className="number";b.innerHTML=(t?v(q*t):"");s.appendChild(b);n.appendChild(s)}var k=document.querySelectorAll(".js-number");for(var u=0,j=k.length;u<j;u++){new l(k[u])}var h=document.getElementById("barracks");if(w.barracks){h.value=w.barracks}window.calculate=function(){var i=0,I=0,B=0,J={};for(var C in y){var L=document.getElementById(C);if(L.value<0){L.value=0}else{if(L.value>9999){L.value=9999}}var M=C+"-level",N=document.getElementById(M),G=document.getElementById(C+"-cost"),K=document.getElementById(C+"-summary"),D=N.value,F=(D*L.value);G.innerHTML=v(D);K.innerHTML=(F?v(F):"");i+=F;I+=(y[C][0]*L.value);B+=(y[C][1]*L.value);J[C]=L.value;J[M]=N.selectedIndex}J.barracks=h.value;var E=Math.ceil(B/h.value),H="";if(E>3599){H+=Math.floor(E/3600)+"h ";E=E%3600}if(E>59){H+=Math.floor(E/60)+"m ";E=E%60}H+=E+"s";document.getElementById("total-cost").innerHTML=v(i);document.getElementById("total-space").innerHTML=I;document.getElementById("total-time").innerHTML=H;if("localStorage" in window){localStorage.setItem("savedData",JSON.stringify(J))}};calculate()})();</script>

<!-- Yandex.Metrika counter -->
<script>(function(g,a,i){(a[i]=a[i]||[]).push(function(){try{a.yaCounter19642528=new Ya.Metrika({id:19642528,webvisor:true,clickmap:true,trackLinks:true,accurateTrackBounce:true})}catch(c){}});var h=g.getElementsByTagName("script")[0],b=g.createElement("script"),e=function(){h.parentNode.insertBefore(b,h)};b.type="text/javascript";b.async=true;b.src=(g.location.protocol=="https:"?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js";if(a.opera=="[object Opera]"){g.addEventListener("DOMContentLoaded",e,false)}else{e()}})(document,window,"yandex_metrika_callbacks");</script>
<noscript><div><img src="//mc.yandex.ru/watch/19642528" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<h2>Comments</h2>
<p>Feel free to post bugs and feature suggestions.</p>

<div class="fb-comments" data-href="http://mkln.ru/clash-of-clans/" data-width="470" data-num-posts="5"></div>

<h2>Changelog</h2>
<table class="changelog">
    <tr>
        <td>1.2</td>
        <td>6 February, 2013</td>
        <td>
            Plus/minus buttons;<br />
            IE 9+ support;<br />
            Changed favicon to app store game icon;<br />
            Added elixir icon to costs;<br />
            Added intermediate results of the calculations to the units table.<br />
        </td>
    </tr>
    <tr>
        <td>1.1</td>
        <td>5 February, 2013</td>
        <td>
            Added sixth level for Barbarian, Archer, Giant and Balloon;<br />
            Fixed Healer 1st level cost;<br />
            Number of barracks field replaced by the select.<br />
        </td>
    </tr>
    <tr>
        <td>1.0</td>
        <td>4 February, 2013</td>
        <td>Initial release.</td>
    </tr>
</table>

<h2>To-do</h2>
<div class="todo">
    <p>Spells Calculation.</p>
    <p>Distribution of troops between barracks for optimal training speed.</p>
    <p>(?) Save results to simplify comparison of different sets.</p>
    <p>(?) Gem costs.</p>
</div>

<div class="footer">
    Developed by <a href="/en/">Mikhail Kalashnik</a>
</div>

</body>
</html>
