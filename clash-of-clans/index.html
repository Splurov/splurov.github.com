<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=890, minimal-ui"/>
    <title>Clash of Clans Troops and Spells Cost Calculator/Time Planner — Clash Calc</title>
    <meta name="description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle."/>
    <script>!function(){var i=!!navigator.userAgent.match(/(?:iPad|iPhone|iPod)/i);window.mkIsMobile=i||!!navigator.userAgent.match(/(?:Android|IEMobile)/i),document.documentElement.classList.add(window.mkIsMobile?"mobile":"not-mobile"),i&&document.documentElement.classList.add("ios")}();</script><script>!function(){window.top!==window.self&&window.top.location.replace(window.self.location.href);var o=["m","k","l"].concat(["n",".","r","u"]).join("");location.host!==o&&0!==location.host.indexOf("192.168.1.")&&0!==location.host.indexOf("localhost")&&location.replace("http://"+o+"/clash-of-clans/")}();</script>
    <style>body,html{background:#fefefe;color:#222}body{font-family:PT Sans,Arial,sans-serif;font-size:16px;line-height:1.4;margin:13px 17px;-webkit-text-size-adjust:100%}a{white-space:nowrap}a:link{color:#4100f1;text-decoration:none}a:visited{color:#63008c;text-decoration:none}.not-mobile a:hover,a:active{text-decoration:underline}kbd{background:#f0f0f0;border:1px solid #ddd;border-radius:5px;font-family:inherit;padding:0 4px}button,input,select,textarea{font-family:inherit;font-size:inherit}@media screen and (-webkit-min-device-pixel-ratio:0){select{font-size:inherit}}.field-long{width:100%}button::-moz-focus-inner{border:0;padding:0}label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}h1{font-size:22px;margin:0 0 3px}h2{font-size:16px;margin:13px 0 8px}h2+table{margin-top:1px}h3{font-size:14px;margin:17px 0 2px}p{margin:0 0 10px}table{border-spacing:0}table td,table th{padding:0;vertical-align:top}.small{font-size:13px}.limit-exceeded{color:#d00}.fixed-content{max-width:50em}.result{font-weight:700}.unimportant{font-weight:400}.tooltip{cursor:help}.block-indented{margin-top:30px}.text-middle{vertical-align:middle}.block-intro{margin:15px 0 0}.boosted{text-shadow:#48f928 1px 1px 3px}.floated{margin:0 -17px}.floated__item{display:inline-block;margin:0 28px 0 17px}.mobile .data{-webkit-font-smoothing:subpixel-antialiased;-webkit-transform:translateZ(0);-webkit-user-select:none}.data td,.data th{border-bottom:1px solid #ddd;border-right:1px solid #ddd;white-space:nowrap}.data th{padding-left:7px;padding-right:7px;font-size:14px;text-align:left}.data td{padding:2px 7px;vertical-align:middle}.data td>input,.number{text-align:right}.data tfoot tr:last-child td{border-bottom:0}.data td:first-child,.data th:first-child{padding-left:0}.data__distribution-column{min-width:65px}.data__quantity-column{min-width:115px}.list-content{margin-bottom:10px}.list-content_small,select{font-size:14px}.list-content ul{list-style:none;margin:0;padding:0}.list-content li{padding-left:12px;position:relative}.list-content li:before{content:'•';left:0;position:absolute}.list-content p{margin:0 0 1px}.list-content__date{color:#777}.object__text{margin-left:3px;vertical-align:middle}.object__icon{background-repeat:no-repeat;display:inline-block;height:32px;vertical-align:middle;width:32px}.object_units .object__icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAALaCAMAAAC21aXgAAADAFBMVEUAAAA+Pz2owFCahnJ2Szncw9bCYCiifoX90Vbgwcnbixairbfg0d+Al524VFZJPziknimikIj4tlDHnU3d19jl6+vVulBKPzbj4tKPj4TzVjjG6Xjqs6eQus2eT0HoTFQ8gKNdU1hYMyTyT4M+OizT6eq/wrTs4dRvYl+Ff3LhuERdSyu33u0+GhlBQim+Ltb5zDWKlKBIcpKCcnnxvkCUrUPtTYW+VSLw0Ka7rtGoOGa8zo3uYiuxViKRoUPrwomvOWihM1xBepeGNhW9YHu3dVDlre/////+MR3/PCQ7Llk1KikuQEwDAgJDLi4bHxMmJCP9tqFLa33+/fMiND7+5NT86t//+jX/Ryz9sCA+XG3+v6v6rJn+3ckyQBBWeItUaST+yrT/5a8pLwxfhpkXKDRkfij7oo43Tlx6HxX/08H+widAVxk3NTEREg9vkyR3mrEqFRL98un/1iloWm+0d21pkqc6Hxrp0sfyLxz+vYVRP03/0ZpdQ3lMN2mNZRgsHzr2l4WGW1M3J0mApC3x3tNTUj+dJBVdVVT/5y+qb2bXwrygaGL/xpF1ZIOpRw3/2qX8snvPYiuRgqo+RSr2om78RxiFobuGco7u073kybTfLxu3zV9cRSLjgWV+cKG4gXf/9NXVu6RtZ1jNKhq9XkvIcE7ZeFP//OP/URuKtS+svczxnRzZbjfEraCjWEaDizj3iXidwj3WmOq9KBnvkmDTaATdkIb/77/hwMzHtb6tJRakmbPHcGSQWTm4Uw5WTWWUQhRwWSLDoYykcT+zgUv/yRGxVix/PRKfRjORrET//Uu0nnzLhlykcBn4jEbtofayXFSwoZb942q0rb3elWu9x9Cp10f5fgi8fyGbNCbipJT98YaYoceYcFF7WHG4lNf//mXErxWIOaf3mLXtUfSHLFL3YpiuNld4KUycMFH5WJJlJkHHPWTeTHhSJh7+dqv/ZKlvNS1lIRNkP18UHCOBQzd/cWGPIhZHPj0QQlvPg3iUXVhYNTBoQj96TElm4TIBAAAAR3RSTlMALP7+FyH+B/4R/v42/jpK/v3+/vz8O3BVbPP4/v1na/3Mj/6ki8XGm/5iwfLG4P3Jpm3Kj8SolpGL/ZyvzpLsoNbE5Pyxt6dPLwUAAEbKSURBVHhelJJJbuMwEEXdgADveARrUau+ABdapQHf/xgcB3lI0vPAEosMaTIR+tMw5cV79VXw4Z0cGZvnmXM+z4yx6Xj4r0wzB1sFIIqmXazM5pG51rFX1JBjdzgQ3EdKzvamR1yO2Ev84NeOAsuPaDw5HylmIL5LbYgtpvf4bfVyxFeKqIN5yAfvfUglLoRR+0TTExosP/b7Oy/GmAUVMjJdqEAu0RvYIjCbQl52c+WPgqdFkCEqrNw3sJY/fjGCDFhiv8WVD98gv8am+Mghr7atcHoTGGGUQoVMudBdP1tp7dytQBeFUYs/n8PPeFJg+49UpviL9zvUuYGhDgQ3eGnAux1qkZMESQFpvLQJpNuOBVQBeUV8yPPxkMH2gmkp/NjQ4SOBJkXhfbU/qpD7RyfUgk/bDnMH5IeGVnB8EOiqAuLEk6DhYcvU/hGJp6CgqUBJ45OBdYKi0E6QoCyxVgAMBcTj5dxqsgAoNh1LfIDQv0LJza2rIkPB6bJAAn4YNsA4va5kUAFKLMqywLeCU25QBPdkMJUANgGQIMwjwXPi3YoG3IOGKr6SKXVqBW/jnUbB/X6/rVo4qKHKpcxQ8IzjtwY3SjU1FEHwyhs2buAijytA+DXmJnzBTB5vhH8QPOUGzqVXyHjMXftA3Hb75deriYKpEZg8nhog/vfr5x8vL9///F5vAh3+W4Cg/rFbB6FtW2EcwF0q8Kmes0B3W2D0kGJadiuUHWK246jRjtWbUmPqh1uTIkIQ7GK029JdCs3Rj5Bg5zIsdBiGgMTwGCyHFSToYfgWjCcJe6/IkJTabvZ9kuxJW2nZbYf+MZLBvJ8+fU96zxeXHefEH7vF7JsAL64AgW8d58rdrfuvzg9fYz3u2J7Nfrr/5Wbn+Oe27/rFzBuAOxEwRMCaOU7nyleb11fOL6Acfbfb3T/cvLvpPD4wmOv6G2kAF4MFMAwBXV/pHD8+7hw757OZZemMSN3vV5yDg4M+nbr4GCRTTAE+ArZp7judTse5vLuzY+umIUr9HbPf7xNCTN9PA1kA8CVeAB4ALcaM6XS6v2/C0TSZQSTRZBoVRSLaAOT+BXgAjP4GbGZocQyMJj6QKJHK5bJIXNhAU7MopAF3yOcBFE2JCCGUggHA12UiliFS1/f9YvZdgAWAKEGQ0JimEfyK40VswUbmbYAPwJmNAAxAQdNb7SPGaAhS/52AG8yDQGcIoACArVu6zuCGgGMeTsJbAM91PQDOTI2ggJVru7Zts7glJ156EjAxwEdeBAwBgBJAiJvATHMKZwyrpYBPstlLQmYjDYx9BM5MAwQIIZRSIsEZZ+RkAg97cTmLZ4VC9V6hEAEjACDu2EUAS6AkCoW/GuMuQu1J7eXntcKy+F85rz6qcy8CaiHgjz0exCVQTNeE9Rn2CEPTjGBSc9cEYQkEXH36qCrPk0DASyUVBYuFgsHsMfzj+sOA6OrES83hhCtqtXqvfuEPhwAEnKtKCaPiROihoIHguy0GwGc3OPf8sZAAVFWRq9cPZ7dvw7L2ksuVyhampHI+D4XoZWDMgBx9cA2BZAlwQUV5Wn8Nuyhs8RMZEgkqh4AAfTAWOWrevBEC41wSwPjQZNcPYLRcwShKCPA5ChhU2j34WeUjqED4B7CljPikFshRwOCYOyBELzaGWc0eCCoPisnnWI2BeOiyBJUv04TVqd3SA7nXaPRkuflRooUbMbAc30wS6VSavUYPcymxIa1novGVMKFQr8NHjg0M53iEX3sNCBiFJSCsZxHA8aUF0Ww+y+efNcJ2Rex8OpuDBQ1o5CHJEtbh2/L6Sgz08qeY39tmy9Yt3N6+GAy6U2ZorJE/zZ82ejeFxQ1gM+PxJRDm5hQ2j0YEPFzdoxozwbD0Fy8GgwERySra+ea1xA2EQDzzqqnRb0TplwjY0/YoJQSXFEmUECCArILwmyVcFRY3gEDc9NL8x4fb321vfxgCTyilGoU19AGmXAbi+YAMngDwnP6w/SkIufXM/z7v8z5Cbm3t1q21nJC7mv3PQDb3F+Plr9q6EoTxGEzc2aVBRQQmXfBp0zjV4YLUnDqvoEfYF7juTVCzqNsouDBpNtWCIGGFo0Kcyo1fwmCDURO4M/tHI8fJJZ9leZDy/TQzOxvjcBbcWwX5S/1PGM5ms3D4Q1I/RLNXfP/00sJmwx/aY5QDxMEmiOMfI4ydM5BkDsDqvw4QG0T//7KfgYNJmaapUqlzsfzF5WPzCobf+4N7ydNlmi6XS3iDCQ9WbgL0t4gg/MY/DO7Bm6KWiHCN4M8AwIiSCL97Ptq8EGAQvNisGKWA+jKHwZ1xkwS/N+snj/WTYFEUxRF4Iwzir/oQcnQxxtPFYrXK67LEo643ta7rx6en1WrBOWeRIwzOCsDbHLy5LrUu19VzVV2uq6o46qLcwBVUnQPFMM7bcCWkvNRary8XiyVIcD8GTJabhRBCLkCPeZ4bRvB5HO62lV6D1ymVbg3cOmLsmhqs8hVnPPxUQfW4CJatxFaxlsC0BSDCMxbb2ecRXnaVKhaBxwPqVUzr6OaRaiA/Scios6GeNwSgLMKTGSRvioFkcQewpgxsXz/P48D7U3whxCbgHVX9BAYiWHpnV4XWnbZ+LmIrD8hdvMT9Ffubvg29AN1oxwPirVkDSqEqXQaUgJnre7cSt9ZpTxjyRsZdgM+AmhjhAYTQ7sKUZAnK3PWIuCoRcErAFNyWuOKcnQI4AkjRtsxdSb6DEUOCS+FO8hOEnwJSVT4yHzO/peEAzXCIEyXnkqUEkeI0g0rnLCIAWJlHwEIMt42SyRwgyiAUhwPvd0tYewBDAMoThgBQUkjBRdMopaRMJDMAks3AquO3XQgvrrZzIAjOleRcCJU0c8UYPQW01ZcE6JJbABIEN5INBowRgwCUANVwiwBLsAw8EeEcEH2VgSFIKZy4IIQDrG1MCXi6AyABGBaCb4vwhFd9ydmnBAgwQoBnIMSn0hLYu15zDDtVtdHwotc0xn/O4Nw6uAGg4jNA3L8Y/G4IQaVIyoHv9VoYQMS8PAA39KTpEDp+T2BiryvBycoiAoW4G5uvCIJaqTADjMiPZ8Y4F30A9H8TAESr4RnzTFfSwazVsTi/vUDdNJQDdYIamgBAIc4zDMAlgJokSeMYQMEThv5z3hyy8r2xxVmMeSMSEkCN9sm5DofkgMH7636X6SJ59zf8ow7wgKEF9LLdwerjI0Pt344FSGtd4tf6W6bLuqzrstS6eC6q4/v+YDT2X6y/MqN/zZG9wU/UAl4gCIEHGcAHXAQ5pmHRL+Cb7OHh4c/uVCYrW0ymIYK8IbTX9/t99lZctYBx9sfVkJAaK7S96cb9k2IcJXAF5Ct2wDfhw84CraddQAVrkACgaJTgfnr53ETmO4FquD4ZRjs2QkjlAEmjpEeoRBgAriHVMB03qJZgpRBwQEDSzA2WMaHmEsdYDDuAfrbrdcfJYYzfAoBgEMAUIGDfQQWk62wCA+kQhAG/BRwsYY4UEASvWAFplP0aGIKBkBxA09rM7dW9xgpIg1/ZCDbFwSEMJMEXZQCBG3LQpLAVkCbZNZ5pElp7B9BqNC7aCmgU+oZACHpe4QBuy0xHFzdUAY3C2DRjio5T/w4AHY0HFz2qoDsKthvj6e5AsoCjj3bTSQ//WF+Rs92SHz3X0NH4eoraOX0UxynqevIf+2XMIjUQxXEXBoNT7HZZbA5OtpAsSIqAzbV21w/zCSxeJYMIRgjcgZj7DtqIVtPKdp7IHigL0wer/QSCxYKcbu7NPC5mHWe8lAf3C1sE9v/b/8u8FDuhr3gTdKvQJ0kYmzyZMMZmyz28mWKYwAkeeXG3CuxvKQqs2haevJr+ObJuAn8Vdhk5wRwFyexl1yCZLxllvFXwBM9IMJ7uv50nXa/l5QTeKow8wZQaHJefyhmLTkCr4Atc4weHZVn+JD3en6HqmnDDDSzNsiIHAAVFliZD0xlGVY88HyJhBYVrRCC1Q+VFerV8llNY7ECOqygK+uV/U3uKIfmVRf3HgOOH4+v1eiXy6ImkUlpBpIGooxUyydEgQmBeiCI6gW4a28FL2gkEkccEB9pURtMhUue1w5Un6riAm6oyHJRrQfFVzyNqpWJPMeG8QkwjAR2XLUiBYUwDQEzAeFM5uJYSnKRDOQC5ExaMSWBwCq0lgo4+YJEssgbcVJaeAPpxIh0gkOARFWQ7gpAhGySQgNeuqxgiIAVBDhXZpORh4wmIrgvmw5t0d7F43xfYiwD6uFdVgQwcAzs6+XbuBMY0mkbuBBps/1oogKBgvNk+XVADFGibo8OXYAVYXtQqtkmjdtOeoOAzGhpO7TFlUcAxLijODwLPIDnabFoU2P+IVdONDy7KUeLQtz8ET2EfDRXypf2BDsMpT5ZTidj41zfPZegU7v9qneBj27bb39+tQ0sgxanV6easfff4RfBt2rtg1wxe27biOG7ImmWiGziwkYGvI+g/6Gn/gIeptqXFSGEoFzGbHkxiFOpCkE62q0I76KVQYzc48UGL0SFTLjY0aalzmIMFHRjBDjsXAiqzMdJ72u/39Ox0pbvv0G8CTsL7fvR97/2eXg4/K45xBRmABuSSnHJG3n7+fHn8MvvdH6EjP/yvw/DZ11ZkMoDJCGTqpX+8+XQAe7L8uv5zkPZ++vxMk2V19UOAa2s3Mkrd4gBQTGPP877fmUKWSVsq+KP62ZmryaoEgA+6FU0LIzYF04wiC9Iseen0UgRpRoakqsq8o0N+D7B2Y12WsdfFcN0o4ACrHLphs9m0ABR1HQ0AsqLJBVWWNOk9APxRzijgdsPj8QCLCCZghYYmKYrvsj4gQ5JVHAYpHUdTVm9cf3cjgZ3JgBuGCsM+lnEfI7iaAtIMB6XI6mZB0jTH0GCmF1sb699cuwJgOgD0ygfChAFOY1yE0DHQ3XMa3bajafjwxuNHK6CiWthsbayvzaeAACQcCMNggoABBUC33TheXX18fN4dBcH5IaAOlwX+D8uDwubmRquDCA7AsO7v4wErZQDE5kt7+zbT9ri/hy1d7fMxt9e2VwCAhM76NQTg0rKWoxd7fYqAPUrHcPTnyo+Hw/5kMKyBOTnfKyojAOLL63MAy9CD6sEEpJ+/uoxq2wAA5fEXdjIQMCfcWrsCwFbWJzE9HRI6xisNToBtsyMIdrwt0W0Lwm/2owIDnGy0Wq3OAoCNV1CKFGXDc4v2GDsu4N0CJnYW4d57Ch0dA/su+jECErCQGAD8httkgBgA8OZ5eqeyX6ns09MXqD9FsXqzpOcGw/yDDdTJxhWA+4Fg0QoDQIA9vZQVRTGdfHuiuAO9DjrdE4r3mBP9CUAFgMYBYUwQAFeqcArjc4RCpmlMTZNWIEAp2x3axS30gnsBkDgACWW6AGRLun6Jom8uafy2Up0B8ZWQL26x6XPhWUgAnBBBBATYk9lNABBySSh0KIkBqe5kEwArxNatTqfTap2k5n4g+EgIIYKQZ4A7EIAQElAaBJEZVMSZTpYFKMRCggACAJIyZOIRGKCWD6rVrE7eBEEQx8Fkct4m6XSOwoFYUUEFJKAQoCQAPo8wBkCxVpxUd3I669U04xi7kuj+k2m8bN9ekWUZAIyQJEC/gkoQZSrAIhT7lelMZ72aVlR3C5tK92/vWfQLA0ACJIDeAzCCa45xFV9VxR1dD6JodOY6hiRpo5L4g3/AE6ismDdPCgBAmzKXr8FWMsC4IopZ/XLUa2QMx8FC1yu7/iEAVB4B9FBNQQAmCaWwknx9YcMqCiR9REulruMgABdnlu5IBwJPAITCVkEFAPdzQRoAXMAqClG6cz+nk0OclmM4jdB7dia/EmqrksQIW6r6UL33LkBmGRhgFQCWKe7en+ZIc9Rut89H7u5u0/efC9uPJHZBqCD4QAC3ywiQEsBFsfZXEAZLT3aPvLRpTve9+9408iV3MBTu8mdJD3B4KtkC9KOSCMcIGF9abhCbS0dHS543nZoTM5Ppye7Baz5XMKI3ZRgMIHMxgHNhAyBH6kr0NqABCeLJpOmr7qiMRhYAvUwp1r2HABW+FhHgXbaXI2Qk+eVuFJVdRYafer2exCT/G2DwBLi9SGARLn6lOUJJHDK0H9atOtxyPprZWqEXTyAAHA5IEHNCo2fFJEdmhOI1VS/j40NjHhQBvHs11WhwgMrECVCPjdCihMxAlTiyRqNyaCiLQRJzOw0A9BqOlsyAi68D4sO6SWlMZ5RSs+zCsMUYCUM2wK+l/h/6qI/6dtHH8Mk/jJtPaBvpGcbHxEISGAdNvP4jSoqXxnJdAk5k6DpQtodtF8ZrkSIi8GEvAR/KUkPEFIt8jBgyDGwjM9QRhk9aqLoiWfsS7yUmtTotAyUUn9RY2hBKylxCuwG1a5ZRaFgn7vPOJ40Ut13ncfznkN/ve95XkYk8Y88Pb9ZqtcKun5z5UwLG08j4ya6BycAQCBKSFD5HfJYEofC3GwaFwbV3OwIzk5BCifdJkBlCk2xi6A0MqufGuoJser5Sy2az6awZksKJTPqtkw3gVZXXhMB8VKlUdmHIJABMmTC9QQcXChiItytI0czmSiQYKl15I4Pqqq5rNXfNQhE4YmeqVZN2UMqks+nMiQbVA2/xWq3STa1azpyTpEQmi6QT4RMNEHBe9OtX6BOvmhkzGspkMAFyQgUpPO26hBPvh9ZgZs7N4/Q0DGmUOcGQtO0eLgy2XazYZMhmsolvhUPj84mRpo/bf8MbaItS4ZyP4PwMMjU/Pz40FBoMDVw8zk9MNR+NPLIFjy/tiqVRYODcsk2Mgk3U7Gazaduoph3nCWv6/XE+eB8WAlJsl0hwxea8M5v1Oj8MnsxiAc1HRU3L5y2av8iJ5zYE2TK+7ggrvI8enEiCt4vgKVBV8ohmwdWtbBfMUszR/FhUq7/BhQr+KhSBwAKu5P0JxEpqtWbzFFO0blT86RMkIejjixpoRQFNnxySUxEHfBB0eV1AXUlAAaUQD9poea2VtuFY8FoCzePNoRKvjcDRssNbgs9rimHolw7+8vTSZSgwtSpgTCccPT5U5HYNPATc0jp8nvhr76V3nx547bauaJbPi5CmT/Ddp81HTeJ5RfAIafTW4kL26cHT93TdUBxAryfgo1M1eqCQHk/RVy+tXMON6wcQKEQo/bjSFYQnAFPs13hDMdpffXnt2v2Dfxz8vW3kYe66AfsR/Olk0V+vo6qaA6/PKh+Qwkg9X13FbzX+K9UG36GEpycYuKxyrmJh+sqirvQdL45iLfwCSWtFCfgggWCRca4xQ7/cXlwxOvAH4IUnr3ley8gjwvvfgvB5j3MHBZBl3TAMEiDdj929Kf9PIE16ruUYEIgY/SEAsKZ1eBJ03o1AMO2pFgP/i0Ch99KtoLz8CgDpBW/0PwqepzIBLRw3ICkw7Mbev1+BgyCYrCcY8JjKABMu0p0HL/z29vCTmIe4hXTPQwHsCNGPCQaZ5zFBLywIlgSpr/96Z7Mer+/s1G/du33nEAXabex52a8RCMTDwFhqAdEvdwQKa+19sRHHq5+dzdt0Q8itO1RgZUV3uEWGzr8nSeQ8Y2hAI6xiYDIwL060LG/euv0J8ZsP8yiw+HHBzBRiMQwRNKB8j71iKWRhAR8MmoZ9Ga/DIOPuXPD3Pqlvuiiw+HEuY5pV89OcSoZeg7fx6gQobhE4n0ox9uzrVW+zTrl7Nw78HvbwByrw/d2caRbwfiUT89cQCFqTb7/8wekwHpCXqdZRPP7zQ3F+Hfztu3XsEStU9nO5kVzZpFzZQoeeYOzorAScMvby2Z16fBNQXa7X48B3NpBvsEKeKxToeGHYLnA9EJw9HO6oQu/8ci8OFIfKMs6/u7Gx/rP7G/exAQe/rFjI5TqGHF7/W0ZXEA4unLxzdQPlG7IsNyIb8Vs7G+u/LsU4d/F02Mf5gYA8H5qqcfyufWlmA71lOYJc/01dXl//Dvc0SwPPqzVhAEsaKpFzfCwQDD6c+2EdIUGjsR5prP/p3TU8k4jX1H1fUAZMPFlKH+Z8QThQ/HhH4I0IpXH9psvX6DsKPZsNw4JBlAiyL/VXGP7JzGfyEpEQoMT62ivPQn3CFcbyxvR2z0AN0Efqz8DDCFbfQCIN+fPfXl9rMU/VKNMWY56jjKFELdgEiUrHbn6Xqf4T8I3PnrlrL1KM+fxYtOiRYNhps2qhk3Ipd0wwOHMG5z8Bjx08b3mqx4RgTBrnqqc6kyGu6/tlYLlSuVwq5aDo40fnZmUc7fONB6I9ja+elqQL3PNcdSwaM9qs8zj4AtEgPBrGh5nZ2UjkCUJLfPcGZtY8DZkcCEejSReCyXCIe/oy9w3oIBrQNfZROOaAN66ivyxvfHHTo2gO8YPjxeQE7RBNQvSd09gXjwKGQAlpZmYm2sFBNyLymQc3cRwjA/CLUoi7Sp7pzJuWpImjFAzKfrUcGKRQNIrL/CBpeML/eATey1N99WJofGI6tlVwdN2bHITgMGUg+2WRKglodWDpeFjOfP78GQQI8OmB6BR39EJ6q2kwb0DCLtdSKeOFYWELJYQqSEtLEZ9HiD86gsAlfhrEhMuUlVPvb7t57yL4aMw1DHRQaAtkqELgjw7B755EfhV5cEjXV1xL05LDEp1oVtX25bdiljMtIUMxj/kGZzuoAAHlKvhI4wyuCxzeuOFy66J4eiS2tswXbR7jWAAyf8pjzEB0Z7taFhUkwlGCnjxzZw+Tw/j/qssvSH5CI1uZGMurnFMBWgGWw0ig4wdc1Wq1XC1LNLrI7OjoBB0cnU5GfT58wU7vGxZHTktiBSRQIBAV8FaVfBxbiOA2C+Io0IiR3bSqW8lkEmIkBEFQIbZd9WegHaAEDTB6/D6NIe6OqMbpcLgr5D3Bsiq2UBUjyEtyUKCXKLYRmwr3CT0/jASoIAS44lB/vPSRPAv+eCb4vmmGjguYEIgZytJSZOnx44+WZueivaN6SOLTrXP/u8FyrIqUS/9h14xZ2waiON4SO45N8FIwmlI8OXTqUIgGgyZ/gA4dQuqhtxTaMWQ5btIW0wdPBS0dSrpntfCUqblOToeiIaToa2QJtO+90yFhXNljh/xkWSfw+/mvO2wQek/+cx55pNNtB0FIBEGw3+5uLfDPgUdfUKlFiVJqFO5vK2mHI1SCQVXiNOE2im5IVajq+HNWdDYJBhESq4YqxybDANBh6OUt9eMibM4fGYLrwYhAchNolKe5pUoDsAF0AlLOD6OmPH8IUAZpjDBJ2CAgozyIZJYjRk0NTTs5G8RRgYJoGGi4hqfFRZpoLQ7QYCoVCaZThTyEhmaefjHL08QpTsADhjeDrhx0QzPPQVGc5SkpEv32NWl4wEANvUFQLPN8zo73iaATvUrULLhesiB11YIsDBDuRDcsw6EIvs7nVb2bR94RDbjTf8wi9WhPYhZwBKl2Bsagw4jofK2hNR6Pv1cCMQguglsGNig8t4M13z/Oer3dOBZBmvoAUGJQuf8VJMGpXbMQzzMSZCLIc6mvps0gdQsoYiESY+3LlQZ14igjQ3blBJQfytDyju+QEcO3BVhrW5VgOBzGxG5GsOBMErgrL+ftxJRjF4IS1CchZu4fpL5HgmVdQLuMPJICSXDUqQT3tPkEP+JZJRCAhh4v+Gjt7fCg5QWO4jMJbm8KEcgagji0E2jNd3J8S4AKj629vIt2Dvs1wcPFUhKQIHc/J/o019KIik9t1R24x4JjZfLZp0m/4wV/4hkJbq6K62c/L6WRSjoL9/RfLs6gtXEjDMM+lcXH/RXtuT+gPyAg2t4MvXQvJZQUDBUG4cv60sWkqAqdo4ZcZkTBRiepe7G8CmksH5zgg0HbhfYnCGyq1sSS+36fxrE3byByHL3PvPqk+cYHWZ7wXmL/zqhRjs0LesO5XQ6hzz81gPpX/54BY9iP+n4khMxH+Ud68dC569z6Q3tIYsC+rv3ivh2781ncHp3qtyi6cuM4j0/kESBNbNs+APb7elv59+1PXHc2ZcXNDyQc7U4bua6bkr54GN113isbYgD7rS0AU3c+TyGXhG2WnatfXn2Hr82k/I0Y0nmWOA/5XaetbRIB2G9ZlACAcr050Vzg1Ad/wlhddL9896ZMknDhEWC0OADgr+A/87kG/PCP/bt/fth+Tc+5UgIzwCnLpNy9sawfPxskoVr1XxJgYjdqoYDbJ0AYEmH3d1Xt+clSWgLQV2W4XKolhP8/9l+JHKd1eASw/8xHzWaKdlmy+FUgMYH6IsHLCUtNvn371gMgb+zXdquu2X+WEUArHoj3pQ0AaCGexB+KAY9fgfgzASZPgO0BMG1PNSwYhv0YVDYJ0N9eS3r38UPTXPNRJ180/msCQAeAlKuVpKiIIVeBATg0JYR47fRZBsD+65bxWwxQUkohIkmKRBQEEQF4jaJGze0Vikd3BLiGbAJcMMCdtmOFMWlVASQSQgaRBwBaEQAO7OwHjgEcwCQ4gxgwAwBOLD8gREHk8KcKHDUDyEwAjwABuQnAAQygPddIHaEhEUAG2NLnLQT3BBHMWiPiDgBs5wTwG8BopnUgQYAQQHmO6CMBGc1axf0l+AhgGcCaAUoHTIgoAEoaCDQlJp4QxnEHZ+EIuGCA707j0fslE2Qk4Q9CzK25UvOyDCMuLXVLZLliwPMERQpAO1RMIAVaY2rQY+NCtRCkZB2CIEScd/Lcfg5AEQCYKxCAgLReaLykqgiKLudlGAbgBAQYN3ZMJvKzNnQa0qWCQNAkU1HUzVuFu99FoOkcjWM0SW0btaoDoJe6cdtFBCjE/FMA8EKN1Atlf6BiRgSMcwCM/TRBjyLcZxwB5ZuDwXN7sZhMVt84fG1G0EOMzjxGM2L/EIBjBDTSLFQkcwgTzTFWqEYAPycY5+jRttHwsmVdnESIY7fkCIpaS5KUJO5t5OcAMoZ/dvADcJKAqhCniWL9QQhukUlIds9jgKQA7pDdsF9SgiOhwMXkmoPQmjeoZTNBG4C8Iv/l0T9sFeQ3gO7GdaduyQRNMhe253gNIAhj+BO2w8+AqjoSut2MCeYoYIefAY5Dfp1M4S8pANnpNiFKAD1F6J67UMYhmvGlBIAk5O0N/Ol6N6Tqk58BCHBxSthkIKTrZMkRJGSmt06yaT7Nij1cPPwAfgB8iwgGYIHQ3aQcIgk5BEsGOrxBx0g3Ffxkh/8AqCxWA9hWIPQ2GVZW/wYLIYkviLWfZdmmaPy7o5+KyAdhENt6bxGiKPyiZ/lGlXmkWVXDf2nGPwAKVJE7MyCcYQBE75nY3qv3A7hP/AxY+9WWEYdSWINdbdG9lQV+AV9YDLDq/X43PPqPgLW/3cJ/UontblBB63VdY8P5K7qR/Jm/AfzPvhzTAACAQBBjIR8MXF4D/gXigYmB7o3j3lPiNpQ2e9g5m9bIsTOM2qpym56FXe6C8lSczQTTabsZQxhqVeD8ADOj2mbR4oLgrm6V6EVwFg3FhItSy8ygLFyUQqiiMyDizkUQsmhicLk0PRGFGwxDYRq8yB8wTEhrauGePO+VXG6rvMkui3l2xjznvp+yhJGWK/WNmeof3v9f/ZWHGxuTmYhxZxj3t7fvDG+pvtELocn7jKX5KLcNVdq96/iNDSMuqVIQzkSESs5frIX8TsCHOF61IRnMdAehaJC/VJzzI/xYto+Pjo9UkCPcv+1XqvSv+QCq8AfqmKQCxCBngB5V8ib+icT5teX5/OGXGUDOlIWwPatfbRLAX6rM9eUh/IFsw/6747a2wgyCDuEmid1JKEvQ8nwBYgRAAHz84NiRqbIcKIksz1AHMN+CJfIH0ml/Dz8AIGgIqCDMpqESTCbyzgzqPQkRQBPaDgS7YcTvh7Aow16gCFDMBzCO4QbgG/hTQIbo9eKUgBCKKughAIkezAVgyNRyTICXLzMAQgAgDnUS9aVa0OtJB4BargToDfkVd6gGL+Hn1wEolSilCNHrGfAHnBNgbgZi2JUiG9rQhj8VZ2wABBGMySQMe6HDKQJjOz+Eiqs45trHoWu78ATjA8ZcHoRGCAUaIMMshdn/zXc5AVhm1BSAmKdlW5bgMiZ7kAHkYjbVtXpFMx4BoNR7ALILi2SblhBAg0AAyak02SIUGZeTWkUDSOIaINPwtd8Wagul4DIAAGdzavd1ER8zhuRqKwuPGNMArRQgEDz8Vvvwi99/UebMkUEMawq47uIqg3Da+iMmEKfFSDoRyW0LAAp/9BqPTGUOQEC9ZqAH1YVM62wIAxNcWDBYQgPoMEOZpo6/ZfPXuFl8zXkKAB6oymyAfqaPxOE2ASAELpwgMAzRMk37EvwILxQA4KAGsR7OOABgRnisCZ4NoeA2ZFoOFUwKMC+PTw9fQ18pJ8QcGXR6GBBgpkX4BfNwmnkti8sSpDjQ/jfHr+7dazPV6/UmoSEBgFCDG60DIHTPL30EAo5Hl1yDEAoQQREaG9BkYsSO1Lq1S49Tgv/q3sWa617atkuAMgAxCXuQ2sO0CNJhwrm1TIsE4Gx0+GU0Ho98y0oBIAARhogddr3tmGf0YHXV5gDcSiIDHB7eGwrLY/ADcH5eKkkUzsAlQXKBJqOVHIcXd5xbKVAnBOPsz1++agsSU6PTcwKcnyoULDZiLtzOtGVj5nb47sKqE1ZzL5lSCGAITBJY/pBed43gH0oCSD5ICoUGAWrrQlZrocxfEVcBICuCJAAR6HyfSYi7W3gNZtACAKF/zDCQqwt5bTK9RIyWUFggIITTtt4KttdZ6/avWi3TQgFWFtcf1+rzNx2LBICbE8AGAUmcEpRZT/enhbGPbxjThKrhsP7zh0v61czlhdwwAMEoEYtGGEkMGYAFej3s6mr/aWOvKRykMxx+slKp1td+kasj5lHPE2VAuvSHYCXdJwM8rny2t7/nFjrY0kHH9wYFqLqcz0FoZXa9m4OtrRfdJwV6Ymk8TU4OEu7I4XQYuR4mLcbFMPdVF3vHsq1Mnue6g8LZi7P+GA9Rb9/+x3/w4JnijvLMUZk7Jf0n26jd7oO9uWm1WnuuO3XdzmCQ4JW8tR/e7cP/7XP/g6+/jtCS2LfLZQw6/KTcKOysW3brU7M5dQedQZLgoUl/ofm7559/W36A93uQQZl5BIjhnwMsb6J/O2brU1yIGo2rd5eXZMc7ns+/+rx/8OwvHyCDOGJ+OUIGcWiQcrdum9bHxU2z1Wg0zP3Ld/Tk9+/v8E7cT/7YP+g/K5foYhYJv4z1ju8EAAHKjtloNpp4rQ4E2P/5/B8//U3/Sf+Ngl+WlRgCIOPY0Dt6276yurK6/pFrmdNps+Ne/XBFX/p+c9CH/eDvIwkplYwjlECm/jxg8ZMEGgyshttBC07G43537UW/f9Z9M47pUuhEw7N++Zf9Mczw5wHFXcU5c+nPURNtTDBt4xcYpZNfj8s4PQylGjXXCuWtwtkJ4OM8oFqDX8/xnhB7086AtJX8tnChYoyNYcQ8GprmUdm3bI+pOJ9CNYafFgkAG5imO+24jCuHJBFv6KiIMxtzqBibAyzv3vg9rIGAaDuJycneMxwW4Ucv7UGcA1RqCn4kkAEa1mypmBOTP3TEaMQ4S6fAgG6KWKzC7pB/BqBbilTMoZaFkltDCoBhCrIZuAas7OrDM39aArdpZlnAQ7eOXNg4Gj+Jo4gA2qwB1Y/gvOUHwEumJghAZLJs87MoIpoVKcr+BgCb9rIMINyOa+91XAAgSwsJtewL8itOc/xeAMYCmwkA9B2DON2H0wQhlUmyj8pDAM76UaTkHQDKVssVHlKAba/pNenb75mGugBJd1zuj+ObGhgEEDr1FCEgAnhJAUoGHpJI/ZSA8JKji0K/293oXfvDBW0hiRnC2/cK41QFF79J/QTAHI882y2cZP4UYGXK0gDAz/y0MYln2X4U+fBjUrzRiFu2SCeT/BqQIzB/kAKwx30EYZFf6Htn7kcj5TChDNLECAHIGgXNCG6iASdIlgBH2q8B7AI9kDK7nJE/AGCO0EEF/4T4+wfdk3HhYjTCPmg/tkEBQM9gmYJg4f9DP+pH/ZewMwhtIzvjuMxanSqIuk5GaQyCniJtfdq0KSQs1JeEOZvHPFGUOcgXk+ltFsEQfFnDO0TjhZSwsNYhzBiSzKGV6aHMjIgLRXWDSHyIEy+sJRwMvQdsEAE56/6/N09ytAmbf4KwQ/4/fd83b54w/t43hmEwFoT0WprSJtsSppTQn6BpPw9gBHBntDP31NyVUqmsQ+VS6cqVuRlgtE8Aws+npZ3cJZ0BeiZWKJcA+QhDOgPChMhB2mfgNj4UA2RuavqjgNCQnCZy0KauC9g/JooJCO0jAJYC4t9o2lTZ+Fmx0sz0B4BgDJieLhmfADB9boIAo6ohpTB93fiUmFEgwiTASAGlqV85xqfF+PsECn0E+MPMKAEnHBk4U673CQLVHokpAHH0zwsqTNiUryPOLsGZ6IIr0SAHRwGYo3zOOBPLd5kCTMRwlkQcBAhAARhTAYz84aLfZKnfmVge5XEIF+7FcMlSUgSTCYS1aqcVqgg8hVchjKrw6wuOoQAqGYOrBBj8tVbHVT6XUxwfVOHiczbOIFhnsCk/Y2azWLU3EEJKcEByNkZRFEYXIv/HWAFCZrnk56oOLvw1q7k76ymCMA1jY1yeURnzf1pRNWCh7cBn4sUp6J7ntYo4kT9cxRgFlEHlxtfHOYwA8wuBusxcsNA0RduTavk9uxo1jt6dfrbhCTYmsJ9ch/zFhSWY6a/pcGGZrcGurnuzp6eRbdoRpoC0dD3xXHghzsGYLEI+++VSoLKm4zHeKvwFffbdadXk9vJgtVXQSa4QdFBXjIvAFCCbnV+hEJC48LzE2yRDoVCY9W0AqiezBfoe0hMBeRuWAoRzI0D2i5cxZSA8yG+kBtYuIiO7Vt9V3xv6mu9tNEVxfXI1E2D+/FIIgOtS5ToFKabb3DEtOwKAxJjXaDx/LpziuloV7MoYkLtKVeAuCD3f16VB9zhzLItbRVeXavn14YFnsKa6plY4AuSyuYsrWEyoYKI3/bqPcwG1Wq9TtDi3HM4RRtNrdfz6WtSA0W3yFBCMAbnc9MISSgCCSFroEBpizkUdP/GtdRZNKTBqPX/4dQdG0TQlwIzfA2hX+6EDABdeq16PMCqjt4pfVp4eDc2xrFp12IKRJxZLAV+mgBxp/mXMhRDcbe/Wh/AvDhsna35xnZzjIBZfeFS8xHZSQHPqDHDx/D34Gfde7e5EGGrRQ5tL0bYm/NWvBwUYmSdMCoFb8Zw2Ami5L2IhHGa2X20Q4JZfj6o2FhKXXtOyUITFrRNDAlyTQnCsIL2dpD9zjQtuMKvVTnaGvV7kR9GN3jD6Hwhwp/7l7q4hU0hMLu+cwJU5kF/LlwWn27nlJcOdKPL9+tG7H9GcdWMdXqnqrQdHOgESN0lvLG4Gc5qKIFtwBPxBzXOT3vZwWD8YDG5EOB17I6rW0ocj4ZFvqzKAz4Se8DSEUF6HnKZlLhumA79dtN3E296u109WB0fo5BqinlU1uuPBoEOA9pEQiZAhOIHcErAQM2VGfquZWAhwZ7vRODihdrv62aCW5X88HAgCnLzxuBBcEkIxo2UzWjanXSqwMDRrSWJjOXcwjekAvQUHEd5+7H/QrdOu4x2/eSI4ASiJ8PczPKNBCCEM1mnigiva7W0JWBvCr+ajwP+w6zLG+OD49X2dg+AQwbhSYmiQRw1CFMAjgOW2252nmwcHa0MVwCLGV+09ftTtOACcwP/dK8Ehhz5/S+sMNcjk4bdgV4D2i+4mxgn1JGCR7GgpalDQ/vHpfSgRKUBupZRCOQzMRMoyEwC8zX//66QxBIIeGfjoaXd/v5ugbJ3j1/JQc1unInCEwABAAvCXPR1+YQoPAGyMb7vUToc+kodk33/rFzhrH333hHTfEzoCkIUEIHMpMM1y9rrueU3TRAaUSfvk9n73KURuArSE4/0OJ9KlLI4QGNKgOmZyIhDlvJa7lLv60hRJCvBAeLvfhV0B6nrnNR2bJ4SH8CmElJDJhrycx3JG1/s9TgEQAByacE5eYLqD28dHx7Pffy8Jr0zHMRMQADAd1OByOUsATcuVZSlbnZbnvXqyNhiAAPsLdHVh5tpmm8qDCGi35W3dQQhCrId0FQAgQuaanniR33iRNkpgkuCgu7kVLUcvsC63ltMhRrd6Q78luK4+j+MYgAzs2awk9KivEEobffxhjx51hu0F+1z61DLaGoq+78EvEUsrAOS0FJDJRns05o76BrEIinBIE7b4TtWCsDdBnNtRPZH+MIgXAMiCAWm5hW/3QBjijavpe0EWmWh3M1Nxkln0uWHAHsf3AIAIkLl251sQoii1y72M/PwnQvVA2Cg0YykCKMIC2uVpVBLihh2SYZ/58M7SL7+qPae2PwXI4A82hW/uLEKI3pY2CTClI/U7CiRDsNbV+QoApJDByjew19AXTj76P0QKYghexYEUwIL93vsAbQF9U7WlPia/9pdGgLgvx7ke9sGAVBopIJaAIJPPqRKg+Wql/4zm14JAKdj2Umqnf+zHKnTMT7JlfRAq/GEGflLm4uNfLPTlDOIKRtCCYNX6zyo0oxdIiQDArFW3Nveq8hojNfjPAPN/3+5/JXuz795FEDG3D2mGLRFTQuUw4HZ1583+I1wnpJf6Q0pBfjjNP1r4JfrJxwSzX/kKIj+FVIEOY3v56G1365ZcoAEUhiyTz+cvXcIy+u3jO3+BUkDl8Fm/ksJUCBJ0WHuAjeaxAoQQAFkA8lkA9s5TvzdcZMIU3f8insm5uJXKy8e3958+SAGO/FkHKdB5JxxVurl3/ty5MaFyF4cGUwIg9EL1qTzbeg9At1PczOQvpyembu5d+EERpA0t4/JLMPCSqlLZHgNqBDDc5wSQhJs7F35QBPL97RwIoE3oLgBvRwAuP9zC/7Nzxq5tNGkYlyFCGGlxc4fjYosEC1LYBKdzd6RIESbEDFO9zRQ3A9NETBHmKpvAwccHH1zjYqsP/wEptwsq8ieoCNcJBCL1NTf9Pe87482Sy12Ra67wIywWoef3Pu+7o10V8kz+dz3oQQ/iS/rPOuVvBv2UWR5Fhz9hZ291Qz8RQKwwi6b/ZQ7T5eIH/Fq42qcAsH6w09Ty7OyPf+hfLZePp7Mf+qdFE3C+I8xgZm3jbb+Ro1EU8U/vtbh8BQATRsHhbrt4F6Fu12+22/bjx7+f3Qdh/2B+tdlsJuAwYSjedk7bBHO3hfrNroO2QEDTQoD5McyQAArhvrgLgbRLEfaP0G7Td0VNbM/ak8XJyeXl5at+Mwj3RgAkwaOXsU1KBbIuoSaLI2y7LfwxudQ6B/Bu1/djQN+/AvMCehmsI6OCtpKgaNfv+IAJtovOOSYw4xsA2u22XYwuuNgYRQA4HoJoOwLYLiV3KwkA6L8BQLy9TckGFFAAaFsBWwb02/kcBAC0iy7dwV8BvQA2fUGs1++DSw4tUAHUCLt+Pf8ynwPgtB4BCqIXAFQAaQyohK0A1vA7S4h4d9uP9PU5t1AJn78DCAKLiQFNEoC19u5bD/1zaAwgzMGYAgChartezwFwAACtAahj2+8FAFCdwg0SDoAmNikyBaWbddc4yGrSWt9dlz1GriugHyK8RkI9AJrEijL8pgQAIBB9LhsuFcDlYrJn3e2xc4th/tACACL4XLVrAEJQBoQb6Hr/p8WCAZyId17yAJAvK2ksK+GDUiqI33yoGU6mAriuAO8Zn+U0gIRiBJRUtjqoz/v9zQdjlPGmbBP1dAoBUPwAZI8aPiMCqnzAbiSv8QrBzwC/32y+fr0CHu/I56fHR48ODyug+tlq4Odn759/hW48uiqjD/LCh6xUzk8PZvXSJoAbzs97dMHrswCAEsC1URbebEDYw/88o8t8DjtLCAAcHR8/PT0/BwASgAJpz4DX6EBbADkGztnrbEiZg0lViTA5FM2OzducVxIjGEDw/uvAS1ejqLKcBL0pUsdHL07uMwhgJpocvMOP0XIBBAMpReJHdZP52QIcSB2dpvhydt8EAyru+PxtmYEnEn8Imv14UmWWVhkAXpw2jb2YDRHGexudGkQwhrSCnf0QAwgAOQqf0cKTptHtdJjCZKQjAChqhbAhKG6groLMLE2a3ocC6IYpnHKCIYIyOsWk9N+4A21FAiBBESmjnhEAF4vlUm5WB3kEODwhsilF1MYM9PcAy4CVsrRu9IvL9myJ3UoWpyPA4mW9p5DCEGgAQDmUHni8RGtHL54oHZdLjVL3Z2GxbI1XDEjWgARb9QPlA+cAIGQTqLF0YLy27RmHrYBZe+YACAA0CfVJswaAAk8AHmGSfnLgjXYuoYCbHJYEF51WHnjrmhSUJBAEQdqAKP7gV3DqZ0crQ0kTIAPgkdUhSw8YMkBUEcTiJSgK/k0mS0dHb3xAJ/YbYHaACh4dakSwRomh+EOgQBiNXORjctGFi2dvsmocd5FkBofLs5Y0GYlgnVUCqAwgI1GZIWC8Mt//CoBLFcCnoE3REgASwQIFgrViF19eqaryObt6szI2WZcAmGA1Xzpv5IKICIE9wcVkKaiqkPMAYIT3KKWTE8Blu1y2BKpiQLmm8p261KryuZaHXwA+e0pJAC11jowJDL96yxdGHYnNY0BNAHvxXyFCSI0ArA4gKiLl1bs/X2XvkvIDwHyXQMR2TMWtBRCCoLUjb/BvWMZp8OCtkFGCkYxfYYpr5wQgsyI2/vL7ry7ALg9WBfAKLsJxibTKXjeWAUTECLJW5V9+1yb7IqkuJiIyq+KuMpwgE9823UQTFFSw6IHeZfGLdyQAauXaleEp8OIaAbTTwSkGVLcShXIMQLUHl2JymoIPcGg7IRYMOrkALuz/LgCMBDfkIkvu+hZjI30PUJQatZLO63pR47Ww8vBn49oOAgAEIAiBGCAhg1tTvqo++ZJQo8IJQEbbIbZzfOHqmgJw8vkFIJAA7Nrmt+9koSldP75t23bRAsKL33ZzbMkKQGwKwFIweeKsFoDSyfp8hRkGC7oQoA4CI2B4sfvyG7Z0nc85gRsA8y6hGaXga1Sx28EuCBT+0iU8UB8B5uihJtAq5wkXSNEqr2xTrhfVPyZ8+jSfRwEgwWgIBoAIAWiNoXIrlfggjAFs7QAohPVwHlQFdNyUCvQj/0CYx/mn30oT9wBHAAQGfFk3yYkfAOg/AUAQACqWCBji/6se9KB/0XHGKm4DQRiWiNjrFFy5ExykSZNWTVSlS5HO7vIA1wYXBoELQ4LBwQJdY18RQ0JWaeS8QdaCwK6KNIHUfgSDFgIuzmRGM9o7x/hHqLD5Pv2zKsVuEEZxIkQSR+GFjYX+FjLCLBb/0yGwlDzPQRKc40F/wvwCcvpX9DKHtDgpcnGm8K8f4cvlCS7KMucAzTWS8IR/So9n/LEgShAsKaTgEtFlfn3r2sdCd3xRkEPkJBDhGT/i5992gjDJtSBBgelaiLZHElzkWRAKpViAG83RQApezph4fzIhngRrEhDPAuT/oKEsuAOGh7i67haAG6xZECQqU6rGkWEAPK2AGjiFpgru/TPvGsQqA0HWCiQYfp0JNK6C/zpFATdYPjSIRNYKNL02KQsQyMcGrXWEp/+mrsHDItIAKNA1DSylbCvIMicB8lns+cS7EZwgQh4NFXRlBU4hqQQKlK5eBf2UDNvTCt5VoohXtRYawoL2EIyiAIGChlXVf8ECx5PB85GnRaiFxoivEvJTtydRiBIEwJsG+ZQbsALjRZ2AZoDgvTam+Qsb9aeN0RoKGHOfQmbbmVsFNnhxxgGBFgoNWWWbaW8zxyPy51NbId8cDgdUsMFNwQI3A9Y19vh8Mx7gl0W43YEBftoDzxXYsKMSPAJXgOvGHp9sxvjBEg5hhrz93BhDggMZ4Bp1jt3CCzMXUdmbPe58eg/8cDCGCb4NB6ueJQHw3IEUO7x2XlATXUHs/sOX3u/5CspD5uMhilZ3R2stnM3AitlsNkIDx/MS4o39x8YZuzZyhFF8xSiIYA6xTRQ1B1pE0GBOcHEVQqqUAmuL6DqlSZs5UDBI4FrDgIo00+xCmp0m1f4BR4qEbVRstZgr8y+o8JlhirvkfbOjk4z9bGEh/H68b75vxoV39/BRGu4f8LmkChZNkeH9YpnFBwK40zJ6xo0JgJe/46ERsH8ynMXtE0aXyyzPc25jFldFlhW4o6ZNEDJ8aKtQBhDsBSzyAaXHZbnLYcergEouUiG0tEW2s2sAXAgRyvgQFjNCDfuDM6wqM7p0iABFVVZMpnMonWlWFPHBA4QQgRDaAYgCIDk4y6oK4ZfkL8qqqqwjfwoJUxXNp/U6AEiBAAEBQH8tWRUA8BfwMynIPKOXrIrSBsA5gtQm6K5lXUF1XfniQeDKiVkrYeuijA8tYCbENfnDSuDrNoLGjgDM2n8Zq6uSijDSIXA6c4o3+KD5b430AIQMpxQe0JmxumbWaKGlYeV2A4dRDmJNiUz5ruTrmSDAiXAbgkSksYFfCr9url7SJW5FHDcxh3u3yzY71ICeEuCECBQP6E7JP4MdCJkvoE2WA7LJ8812QYDrdBYAASECIvJKjAEAdvqu/FZYbLc5qtniDS6MMdcrEAiQtohrEQarBXSEUoI6N3+Ypyyjyx2gN1tPWm43XOvVA6zU11MKogRA9Er7COlD+iBYLePj1QpeGRdar+fwplBgwO0VAIOVNM75wTF1PZvHf3r7coEzqTAYaHdYgRB0HiMAOqtrY42SzinsAytESduCruLImUtTLfX9ikabGvUYEgW9WmtbM8bioqhtrIzBriCVTKJ7EoC1J8y9wpyfA8arewlzkecVwzCVRea3VoGplloqDcC6Nb99GxheBAiLcJ9MOflrZlSV+fwoo2TosCHA4aBhIwJ0QkSfF+GQ9J1lNWQNowB0POQ1AlnjtMaZJUXIcEQQ8Ajorg9JNAq376CGHAD4FxhHzqXWUwLINBAC4gGII6D36jCOJgVUVdbwCsXkizfFZts0pYJ/TAAQYCORH4QTAG24v4w6rKo5Zyib1XmGMy6PsZcN/Inc7wkgWxvcYDwGjAGIOmN/c6eyllWbEtupzLx/MHX44yLleQZgHgGS+x+7tJiDQX9gLed1yRgOA6pfD0YOgD/Ir8T8pEeAwX7fOcJGxihjcc6TXehkIp37+HE8UVI6dO55QH+/7x87YqQ0LGYGdvin3yrnpLzsjqSSmD+hZ0j/BNA5A4yMAkNDQmhJBTj4O/CLGX0iRYoutDeunQMGn2EJ3RoGCW3s6IoCTLu9Sxgh+MFzKdrwCND98R8AgnpXmrqh3Q3jk5tbGPpRX7rWjp+oaDKSvpJzQPIZMLyBe9xJ3O3ffpfLcdQbwY+BUhQDFU2MMXaWPg/4gjuUDuhU49hU0AABJA1EAsxPwk0HaNToTonZs4DXRuvLHvVW6/YEVt2JhKawkzAZRl0O7xotngMMKUDH9xad9Jqih1hJ0Upy+NXgdVka/RTQG76QVACEwrmx3NpxMjFKqv6UYFJxq5QcD5umuZo+AXz5zYVxEgV4DQwA3EjHYmsm2CtJH2NqbjFX5GfD/hPA8OLGORTQqkNNF5CNY945TplzTl3FTcx4NzoB/CT2vn6h4D9NROLtWqu4Yf63++BpP+nM2pfRSb2E0nz3/v0FV2Z44l5q0viqLF63mWgVLOMWxU1Q6GN1X+AfrO/u2OQs2VRKxV9eNbvw7Pe+tVIZdMGMutETgOIXd+93pn8GHRgSTqbdV2HMrXQKmsD/RGMDwLtjgNBK6mCVN7vvjwADwKj/f3vn89o2mofxCWkpRRXDzNhsFhLwwCZLoJdmT0thB3Lx4Y3kt468B9nBZLCICfglGmqrsKcItgTX1yWkJye+DBiy7MmwbPaSOc7soTC6BOZfKBS8Jfq5z/eVksZZu9vObWGeS07PR8/71fcVVtBX+uT/Q7/oFz3wGrni5sLP9i8opu+r+c3fLtz/Ofb7yw2fZCJFfvnBx8dfKcNtGcSghSx/ZIoFFUZDCNu2CKFg+Gjho/0W7JBEqDSY+OHrWFZweC7d3OYOt3yrnEeIR3Mf6PfgL8HtMJ3EHMuwmjQBsrT2EX7HieLEDWkWI9K5ZfmKJHygn9uwu71+gLu5oB3GEbMsC4UA4UP8Pnd0sp9fLJJOzvturBMBdej8D8LdYeYP++cniy/TB99xM90jgp9HhML7Cctl6U96/dPFl0e72dP2R4ujLhHqiLDXmXtfAJzAsa3H8MMOawrAr+6LXsQtwysWvU7nznsCNCgA8sO/RUr9lcrpIKEIZcwMdDqPZu+gFTSgE137dykBBZhvtXiJ4VR4VIXC3PtamNt6L/VfRzg5wP0hE6IkI+QLhfV7s1ZgooU4fk0sIjfMBNg+eXsJEUCMLSONsDZjBVRCwXFf/Cf8UKeTgIPjPwnSL+8yriPMWEEDAUQJBKkBHk9f5ZekFqedwREBvbC5hyrMWoGFw7Cre3sA5ikPg9vRHYdTBGX2Gu6t0AqE4Hp6UH27shsgUQn+CNIdYcs1eB2sYUYXwS/3MUPeZLeyveNG2Ja493jlunFk29zAGvKdQmFaMz1QfUMTsOu4W0Bi92iruk/fVz796ruTb067vX+DbFjKzCKghpYm4F/9/rsXr57rva1KdSc4C+effcX/9XUuOA9BNWhPHqII0zfSWNOcaKB8wX86GcTnW1vbNcy/LB5tf/H57tHRRTuJqJ1nVnHFlICkfX7x48UobGPOYZtmOiA5wvLyHFuS+83NoodOmA4QmhYH9MFp7F90IyJU0Qzp5+Ur2NS9iPmoYm5qN9+TANEb1apVANpP0oE25ACgAsBu9SKIAfDQi9NOw30JsAF4QoC//vAX+oj2TrWSRahgvi+IHcPHaQBgbhYgDGrQTpC8ef3PN86bsxoGehAFFADaEQCNYrEDwNQ+0jTb7Y/w6fBRGNmC8xLHb9LB/GL2bfWdMHIs39ws7s0AGAAkmEIaJbSn3uk5CFXUIwBA+L4y/aKyoKKPNBGH3R/cksZbDOIiBR3I75vvnAGgWX69+HDaWViRfSQit9djXNejOE5IrpuwMe/SMNWo7QKACLn8lEZ6oJq+BjmJm3CYe105FwUFZ2x8iXGsnaBLAM0wG/kpK3hcNy34hR0nMYM/GNEQl4y+nwiG76zv0/fTbRzDLCvUBrcD1E2NJPQ40uMk7CJBEIz2gaiFJd6vYgUZwKh7/72E36t1S/qxm3Q9jt1un8YDpWohL/WqtaAbpgBRVvYKt4p4V62XNSkhIp3FcdhHS9NYGFU/5GO3un8GwGuhQc1Dpbx2uwJlI/VjDTrHEgL40ynfag2A5MnorBcmjkYad4YATAYoUwWyNeg8QhFr2ycv5FjTNgHiWtDuubEtARuNoTk3WQEKkPk1WwJGtTZrzWMGaksCon1ZgjRloeABMLmTTesqgRDooyQcBfqYt54hQVUCsAI3yQIUllT/3iTAfwfQAGBJ0k449PbZFoanIwBuBCgX8k3zzi0A2jgTEjAexRGXunzb71+OUYN2eB3AHCoGijgB2LgB0Eot7OMxTwUzOCIKk6sAfjnX9G9dFB9vWABci7XgYZmfJNCbcWQLAlj+ULVuAx4dCHEDQIvgGURS0JpR5IgSCGJsevAf7k2chjurCHCTwFuUIrOLKPXbMsL4tGkVlg4Lv5r85vqBdptwBRAl6ddtzhgRBquWjwdrCutrExF+91ybVImx9PAsln4pxrXLVcP3yx3So7s3W+HXNzKk//IkQIlTfFJMDGYfpP699EmjiRB3v7z2c2Ezx+bAMLhJSZKA4NirJ03fr+/BP1wixM07gOWHT6/WLwTF1TnFl/awi40UxYNXuVfIj+GCpSFEiL13j8liPmGQ+jn202sdQnwo6bW70Gd/z2NM+88qhgukP0NcAX5jKSCsCqpeSTjkjmK6JuPiSi8UuHoZxiY9wa8MvYxwDZjzraZHBAQAID16EoZk7/dP4U7tXub3PMkAKFvAumlYynHu4aGQZ5v8iXwfOV3cL5CdlMNlp945zPwQMeQp/HRdrW8Y6vFxflXuA5H6ASB1X5D7m8+a9AzpoaJk1kx0+LWGqqrNDRXvRXkqASUHgMyP+ucp/ED49YZK/gzgXQHW1jsqZDYVAC4FazH5fnU39Ydu9A/yq5ZZJzuMNwMAsN5QpepN5fjbPAfA0R3OYgrgJmieSwrgGWaD7LeFIsIv1TBPj7/NiXGLcR0ER14B0A3OoAg9NVK/MgQk+yO19B+o4qCbgpSrMgAAAABJRU5ErkJggg==);background-size:32px 365px}.object__icon_Goblin{background-position:0 -185px}.object__icon_Healer{background-position:0 -222px}.object__icon_P-E-K-K-A-{background-position:0 -259px}.object__icon_Wall_Breaker{background-position:0 -296px}.object__icon_Wizard{background-position:0 -333px}.object_dark .object__icon{background-image:url(/clash-of-clans/i/objects-dark.png);background-size:32px 180px}.object_spells .object__icon{background-image:url(/clash-of-clans/i/objects-spells.png);background-size:32px 180px}.object__icon_Archer,.object__icon_Freeze,.object__icon_Golem{background-position:0 0}.object__icon_Balloon,.object__icon_Healing,.object__icon_Hog_Rider{background-position:0 -37px}.object__icon_Barbarian,.object__icon_Jump,.object__icon_Minion{background-position:0 -74px}.object__icon_Dragon,.object__icon_Lightning,.object__icon_Valkyrie{background-position:0 -111px}.object__icon_Giant,.object__icon_Rage,.object__icon_Witch{background-position:0 -148px}.icon{background-position:0 50%;background-repeat:no-repeat;padding-left:19px}.icon_twitter{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaCAMAAADhRa4NAAAAM1BMVEX///8Aq+0An98AquoArO4Aq+4ArO0Aq+sAp+cAq+4Aq+0Aq+0ArO4AquwArO4AqewArO4ca5ejAAAAEHRSTlMAgBAw78+fQCC/j3DfYK9QmmwCjwAAALBJREFUeF6V0NuOwzAIBNABG9/TzP9/7WqTKMWtW6nnddAgwELZRLILNMDTxH9xB/Z6RGLqc+PFIusRVJrrePDJghQAZ9+lcNIBYJDko+DQ6TVfmjIACJ0Nh8zLSD0nOu6uNZxiit8HjB8YTsIPEk46uLbjEiJXIm7aViPi/78QFbfAhQ5n45uKSaicDcWLYHRiwKxIpGMFNxWRZpw0/bq+ZrwormG0gBXNXUS2rPjZHwABG0b9SIF7AAAAAElFTkSuQmCC);background-size:16px 13px}.icon_facebook{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAABIklEQVR4AWNYteOKU8Jc68gZVEfOiXM37L3O4JwwB8ihEfJIXcAApGiHHGJnD3oLbKNnBuYsiSheEVKwzCdzkWPcbKpZEJy/dNvBm1++/fyPBP79+0cdC9IbNnz6AjIaE1DBAveU+W8/fAOaRSsLpi47ATSIhhacvvIU2cTnrz9PXHSssn9XRR8IUcGC528+I1uQ0bCRysn0/afvyBa4Jc+jrQUuSXMHvQV2MbNS6zbA0eevKDkgt2ULXCq2fDU5FnimL/xPHDh+8TFtLVi/5xptLZix4iRtLaiduJskCxCV3+qdV+Do568/KMGy9xpcKrRg2XDMB6MWjFowagGwGKCdBZ5pCxmALWxgG9ghbjbx6OXbLz9+/YEjXNqBpm89eAMA6XUT8lPeXMYAAAAASUVORK5CYII=);background-size:16px 16px;padding-left:21px}.icon_save{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAABVElEQVR4Ac3PP2tTURjH8c9zkwbb4lCH+t/ZQsGls7uj4KZBwUUHUVzFweLQSUhBdBSquAiuDr4BRycV34DgYKCYhrS9R3Do4Sbcg9n8PPOX8ztct23w957bMKvSEdjw0hPnHNmRjq4vNC254p41oS9JXjkDVA5ktaTphPu2XUYNbtpyCipltTEOZH1PnaYyv9seUikLndldsy8m08a++e6HpJbt00V23rqm8NY7e9ZdIJsONz0WmhJCslAKe3r+UaXsPwq7INn1W6AsWXZc5HBkywsLkpKw765HlnNYGxo6a0nJyE9DNTkMgWsuStqErwZC5BACbxxTMkbQDGGibALTYcIDlxxq0/HZpsTs1IFe8Y+TtqkdXSWHbVNvWVNrU/ni2fTUJOG9j0p2kaQcUlmxas9ISVi1osohi+64qqOMQyctAmHHDfN6rd/1wS/JPMIn/gAxq1uCJqJ7igAAAABJRU5ErkJggg==);background-size:14px 14px}.cost{background-position:100% 50%;background-repeat:no-repeat;background-size:14px 16px;padding-right:19px}.cost_elixir{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAMAAAA2a+hwAAAAwFBMVEUAAABNKUSVHXqmIY07GDQ/ETOHGXIAAgDILK8JBggzEihTEkdoG1h3OmndS7+wNpm4JJWTTX/BXqbCJ5//O+H/OtvhM8XTL73/Nsj/O+j/Odf/T9vuNcz2PdT6NMH/PvC6K7TsNtfFLbz/SNzqMLf/XeHdL7f/VtzrNMX/Qdj4NszfM9L/U9z/OM/tP877S9XOMcrULbL/OdT/c+byTNP/PvbzON6tKK3/kfH/UeL/ReP/rvb/9///2P/hYcDuW9Ekyq1uAAAAFHRSTlMAa7rPTzyWDvwbK395pPnf5sfz7DyZ/IkAAAHVSURBVHhebdPVeqtQEAXgBA/xdgvuTtylPef936ozO3yprovc/KwZCJveH9EHpmr+CcpQkmdGMVN+0aAvvWbNjhC76P9s9eXCWu4glGbD76ZKWwuC6lBP+1YbzQJhD3Qk/cs2zUB4kONQMjU/TaosixJCKAD+EEN5rpOrpUPsMAxtm4hLyGrYmSmzBhcBH0NUSu1wrHcziyKAbU+E2Mduqca3GSCF6+2wQ3LkfTTFEAhjqSjdHlV/jENlZhRVs6tTgnrbXy654DksHTFuMG/p5PucUrD7+/tFVKeDni6fEl75uxowTW/X/f3t7X5DnJiwMY4A/Z1buql7vXZN27YnSm/YthFnXgPd1C3Lay524l0f+r3hqY0SVnm+v07dRVmWeX4liKRDgzNEYQs3JeKJ6X+BCc5dIS7KhUCM8w+wjTdRgnhAdd0UAV5c/aLA3Z42kageQMFqJHixizk8pwRzzwljK9R1XT/IsmAq/rUw95xwZN/vxArWcx1Q1+J2cxZaeV7TCAqWL2r3qk+oEUeuAkwWTEbPQwLd6Hw2OC9YhrEm3TnArsTiTQJlYwspsmYyHnw9tK8xtJMk4dyjq6ny47hrsy2LIR6fjtXfH5E60iAj9XPiB2eVT0YCuKNkAAAAAElFTkSuQmCC)}.cost_dark-elixir{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAMAAAA2a+hwAAAAYFBMVEUAAAAEBAQNDQ0EBAQFBQUCAgINDQ0FBQUCAgICAgIAAAAeHh4AAAAUFBQdHR0vLy8pKSkCAgIeHh4NDQ0AAAATExMaGhoICAgjIyM4ODgrKytaWlq3t7d4eHju7u6Pj49oOA2yAAAAEXRSTlMAsiw8G49Pdw7N+Wro4p/G6/z+80MAAAEzSURBVHhebdPZjoMwDAXQsiVsZcZ29i7z/385cWpABe4T0tG1iQi3i/Rt3dSX0OhqmEeY1YlaPcymBPSxNQ0Ml9hUo4FNu6+aloHSrPrd2g6kJnivd6sENiS1rRvMMb4Tq9mOWPXrTDirLO3MVezEpsYVgOMtFfQLD5WFZMkTkY2PBxYc8lItlmKwOfH1fD6gnLS99VK0KSbnHMa/9/tF8kayEQgDOkQsTc8Y1DrVk7UOQ8CUdyZgxEkQ2DJyEhIbhCkfErZiQXSWgDEJgmBWzOhLM36NRWYuFqSo8tuC+VQdm3My1eDPdk7GEssmK2/7QW2JmLE/fcaeP5hMJiL/Mf/b7J+6aA7Ic9DHSwKwmlu2y1dXGViFAJf2dGnhU/V3dbzus3TH+3L+xVqluxzd7BP/AcFeMHKCKOz3AAAAAElFTkSuQmCC)}.button,.button:link,.button:visited{background-color:#fcfcfc;background-image:-webkit-linear-gradient(#fcfcfc,#ececec);background-image:linear-gradient(#fcfcfc,#ececec);border:1px solid #999;border-radius:5px;color:#444;cursor:pointer;display:inline-block;font-size:14px;font-weight:400;line-height:1;padding:3px 6px;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.button,input[type="checkbox"]{margin:0}.not-mobile .button:hover{background-image:-webkit-linear-gradient(#fcfcfc,#e0e0e0);background-image:linear-gradient(#fcfcfc,#e0e0e0);text-decoration:none}.button:active{background:#e3e3e3;color:#444}.button_after{margin-left:7px}.button_reset{font-size:13px;margin-bottom:3px}.button_social,.button_social:link,.button_social:visited{background-color:#fcfcff;background-image:-webkit-linear-gradient(#fcfcff,#ececff);background-image:linear-gradient(#fcfcff,#ececff);border-color:#99b;padding-bottom:4px;padding-top:4px}.not-mobile .button_social:hover{background-image:-webkit-linear-gradient(#fcfcff,#e0e0ff);background-image:linear-gradient(#fcfcff,#e0e0ff)}.button_social:active{background:#e3e3ff}.button_spinner{margin-left:7px;padding-bottom:2px;padding-top:2px;vertical-align:middle}.mobile .button_spinner{font-size:16px;margin-left:12px;padding:5px 9px 6px;-webkit-touch-callout:none;-webkit-user-select:none}.message{background:#cfc;border:1px solid #8f8;border-radius:5px;font-size:14px;font-weight:400;line-height:1;padding:3px 7px;vertical-align:middle}.message_after{margin-left:15px}.message_negative{background:#fdd;border:1px solid #f88}.saved-list{font-size:15px}.saved-list__item{border:1px solid #ddd;border-radius:10px;color:#222;display:inline-block;line-height:1.35;margin:0 13px 13px 0;padding:6px 7px 10px;vertical-align:top}.saved-list__item-cost{color:#777;font-size:13px;font-weight:700;margin-bottom:10px;margin-top:2px}.saved-list__item-cost>span{display:inline-block;line-height:16px}.saved-list__actions{margin-top:10px}.saved-list__table td{padding-right:10px}.saved-list__item-capacity{color:#999;font-size:13px;font-weight:700;margin-bottom:2px}.saved-list__item-time{color:#444;font-size:13px;font-weight:700;margin-top:2px}footer{border-top:1px solid #ddd;color:#999;font-size:14px;margin-top:30px;padding-top:12px}footer a:link,footer a:visited{color:#999;text-decoration:underline}.not-mobile footer a:hover,footer a:active{text-decoration:none}.menu-wrapper{margin:20px -17px 0;position:relative}.menu{background:#fafafa;box-shadow:0 0 5px #bbb;font-size:15px;list-style:none;margin:0;padding:0;z-index:500}.menu_fixed{box-shadow:0 3px 8px #ccc;position:fixed;top:0;width:100%}.menu li{display:inline-block}.menu li:first-child{margin-left:17px}.menu__item{background:0;border:0;border-right:1px solid #d9d9d9;color:#111;display:inline-block;line-height:20px;margin:0;padding:4px 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.menu__item,.menu__item>input[type="checkbox"],.message_closeable,button{cursor:pointer}.menu li:first-child .menu__item{margin-left:-10px}.data td:last-child,.data th:last-child,.menu li:last-child .menu__item{border-right:0}.menu .menu__item:active,.not-mobile .menu .menu__item:hover{background:#efefef}.ios .add-to-home-screen__share-icon{background-image:url(/clash-of-clans/i/safari-share-button.png);background-repeat:no-repeat;background-size:12px 16px;display:inline-block;height:16px;vertical-align:text-top;width:12px}.add-to-home-screen,.add-to-home-screen-flag,.mobile .only-desktop,.object_dark .object__text,.object_units .object__text,.setting-mode-disabled .setting-mode-empty,.setting-mode-disabled .setting-mode-part,.setting-mode-enabled .setting-mode-not-part{display:none}.add-to-home-screen__button{color:#222;display:inline-block;font-weight:700}.add-to-home-screen__button:before{color:#999;content:'▶';display:inline-block;margin-right:5px}.add-to-home-screen-flag:checked+.add-to-home-screen__button:before{content:'▼'}.add-to-home-screen__list{display:none;margin:10px 0}.add-to-home-screen-flag:checked~.add-to-home-screen__list,.ios .add-to-home-screen{display:block}</style>
    <link rel="icon" href="/clash-of-clans/i/favicon-v2.png"/>

    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/clash-of-clans/i/app-icons/76x76.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/clash-of-clans/i/app-icons/120x120.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/clash-of-clans/i/app-icons/152x152.png"/>
    <meta name="apple-mobile-web-app-title" content="Clash Calc"/>

    <meta name="twitter:site" content="@ClashCalc"/>
    <meta name="twitter:creator" content="@Splurov"/>

    <meta property="og:url" content="http://mkln.ru/clash-of-clans/"/>
    <meta property="og:title" content="Clash Calc — Clash of Clans Troops and Spells Cost Calculator/Time Planner"/>
    <meta property="og:description" content="Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle."/>
</head>
<body>

<h1>Clash Calc — Clash of Clans Troops and Spells Cost Calculator/Time Planner</h1>

<div class="fixed-content">
    <p>Helps to plan the composition of your army, optimize the distribution of troops between barracks for the optimal training time and calculate the cost of the attack in order to remain in plus, after the battle.</p>
    <p>
        <a href="https://twitter.com/intent/follow?original_referer=http%3A%2F%2Fmkln.ru%2Fclash-of-clans%2F&amp;screen_name=ClashCalc"
           target="_blank"
           class="button button_social js-goal"
           data-goal="FOLLOW_TWITTER"><span class="icon icon_twitter">Follow @ClashCalc on Twitter</span></a>

        <a href="https://www.facebook.com/ClashCalc"
           target="_blank"
           class="button button_social button_after js-goal"
           data-goal="FACEBOOK_PAGE"><span class="icon icon_facebook">Clash Calc on Facebook</span>
        </a>
    </p>

    <!--[if lte IE 9]>
    <p class="message message_negative">
        You are using an old version of Internet Explorer which is not supported.<br />
        Upgrade to a modern browser, such as <a href="http://getfirefox.com/" target="_blank">Firefox</a>.
    </p>
    <![endif]-->
</div>


<div class="menu-wrapper" id="menu-wrapper">
    <ul class="menu" id="menu">
        <li><button class="menu__item js-anchor" data-for="barracks-anchor">Barracks</button></li><!--
        --><li class="js-dark-object"><button class="menu__item js-anchor" data-for="dark-anchor">Dark Barracks</button></li><!--
        --><li class="js-spells-object"><button class="menu__item js-anchor" data-for="spell-anchor">Spell Factory</button></li><!--
        --><li class="js-share"><button class="menu__item js-anchor" data-for="share-anchor">Share</button></li><!--
        --><li><button class="menu__item js-save-composition" data-scroll="yes"><span class="icon icon_save">Save Composition</span></button></li><!--
        --><li><button class="menu__item js-anchor" data-for="saved-anchor">Saved Compositions</button></li><!--
        --><li>
            <label class="menu__item">
                <input type="checkbox" id="settings-toggle-mode"/>
                Setting Mode
            </label>
        </li>
    </ul>
</div>

<div class="setting-mode-part">
    <p class="block-intro">
        Set the level of buildings, troops and spells in accordance with the Town Hall of level:<br/>
        <button class="button js-settings-level">1</button>
        <button class="button button_after js-settings-level">2</button>
        <button class="button button_after js-settings-level">3</button>
        <button class="button button_after js-settings-level">4</button>
        <button class="button button_after js-settings-level">5</button>
        <button class="button button_after js-settings-level">6</button>
        <button class="button button_after js-settings-level">7</button>
        <button class="button button_after js-settings-level">8</button>
        <button class="button button_after js-settings-level">9</button>
        <button class="button button_after js-settings-level">10</button>
    </p>
    <p class="block-intro">As soon as you finish to setting up levels you can turn off the Setting Mode (the last item in the menu).</p>
</div>

<p id="view-shared" style="display: none;" class="block-intro">
    <span class="message message_closeable" title="Click to hide">
        You are viewing shared composition (you can find previous one in the saved compositions)
    </span>
</p>

<div class="floated">
    <div class="floated__item">
        <h2 id="barracks-anchor">
            Barracks
            <span class="message message_negative message_after"
                  style="display: none;"
                  id="units-barracks-exceeded">Exceeded the maximum queue length of the barracks</span>
        </h2>
        <table id="units" class="data">
            <thead>
                <tr>
                    <th>Troop</th>
                    <th>Level</th>
                    <th class="data__quantity-column">
                        Quantity <span class="small tooltip" title="Army Camps Free Capacity" id="units-quantity"></span>
                        <br/><button class="button button_reset js-reset" data-reset-type="units" data-scope="quantity">Reset</button>
                    </th>
                    <th><span class="cost cost_elixir">Total</span></th>
                    <th>
                        <span class="tooltip" title="Values from the “Subtract” columns not preserved between browser sessions nor saved in the saved compositions">Subtract</span>
                        <br/><button class="button button_reset js-reset" data-reset-type="units" data-scope="subtract">Reset</button>
                    </th>
                    <th class="data__distribution-column">
                        <select id="barracks-levels-1" tabindex="1" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br/>
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="barracks-boosted-1" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="units-barrack-space-1"></span>
                            <span id="units-barrack-header-1"></span>
                        </span>
                    </th>
                    <th class="data__distribution-column">
                        <select id="barracks-levels-2" tabindex="5" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br />
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="barracks-boosted-2" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="units-barrack-space-2"></span>
                            <span id="units-barrack-header-2"></span>
                        </span>
                    </th>
                    <th class="data__distribution-column">
                        <select id="barracks-levels-3" tabindex="10" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br/>
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="barracks-boosted-3" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="units-barrack-space-3"></span>
                            <span id="units-barrack-header-3"></span>
                        </span>
                    </th>
                    <th class="data__distribution-column">
                        <select id="barracks-levels-4" tabindex="15" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br/>
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="barracks-boosted-4" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="units-barrack-space-4"></span>
                            <span id="units-barrack-header-4"></span>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody id="units-body">
                        <tr id="units-building-level-1">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Barbarian" title="Barbarian"></span>
                                    <span class="object__text">Barbarian</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Barbarian-level" tabindex="101" class="js-setting" data-component="level" data-type="units">
                                        <option value="25">1</option>
                    <option value="40">2</option>
                    <option value="60">3</option>
                    <option value="80">4</option>
                    <option value="100">5</option>
                    <option value="150" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Barbarian"
                                       size="3"
                                       tabindex="1101"
                                       data-component="quantity"/>
                            </td>
                            <td id="Barbarian-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Barbarian-subtract"
                                           size="3"
                                           tabindex="4101"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Barbarian-1" class="number"></td>
            <td id="quantity-Barbarian-2" class="number"></td>
            <td id="quantity-Barbarian-3" class="number"></td>
            <td id="quantity-Barbarian-4" class="number"></td>
    </tr>                        <tr id="units-building-level-2">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Archer" title="Archer"></span>
                                    <span class="object__text">Archer</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Archer-level" tabindex="102" class="js-setting" data-component="level" data-type="units">
                                        <option value="50">1</option>
                    <option value="80">2</option>
                    <option value="120">3</option>
                    <option value="160">4</option>
                    <option value="200">5</option>
                    <option value="300" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Archer"
                                       size="3"
                                       tabindex="1102"
                                       data-component="quantity"/>
                            </td>
                            <td id="Archer-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Archer-subtract"
                                           size="3"
                                           tabindex="4102"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Archer-1" class="number"></td>
            <td id="quantity-Archer-2" class="number"></td>
            <td id="quantity-Archer-3" class="number"></td>
            <td id="quantity-Archer-4" class="number"></td>
    </tr>                        <tr id="units-building-level-3">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Goblin" title="Goblin"></span>
                                    <span class="object__text">Goblin</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Goblin-level" tabindex="103" class="js-setting" data-component="level" data-type="units">
                                        <option value="25">1</option>
                    <option value="40">2</option>
                    <option value="60">3</option>
                    <option value="80">4</option>
                    <option value="100">5</option>
                    <option value="150" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Goblin"
                                       size="3"
                                       tabindex="1103"
                                       data-component="quantity"/>
                            </td>
                            <td id="Goblin-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Goblin-subtract"
                                           size="3"
                                           tabindex="4103"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Goblin-1" class="number"></td>
            <td id="quantity-Goblin-2" class="number"></td>
            <td id="quantity-Goblin-3" class="number"></td>
            <td id="quantity-Goblin-4" class="number"></td>
    </tr>                        <tr id="units-building-level-4">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Giant" title="Giant"></span>
                                    <span class="object__text">Giant</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Giant-level" tabindex="104" class="js-setting" data-component="level" data-type="units">
                                        <option value="500">1</option>
                    <option value="1000">2</option>
                    <option value="1500">3</option>
                    <option value="2000">4</option>
                    <option value="2500">5</option>
                    <option value="3000" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Giant"
                                       size="3"
                                       tabindex="1104"
                                       data-component="quantity"/>
                            </td>
                            <td id="Giant-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Giant-subtract"
                                           size="3"
                                           tabindex="4104"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Giant-1" class="number"></td>
            <td id="quantity-Giant-2" class="number"></td>
            <td id="quantity-Giant-3" class="number"></td>
            <td id="quantity-Giant-4" class="number"></td>
    </tr>                        <tr id="units-building-level-5">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Wall_Breaker" title="Wall Breaker"></span>
                                    <span class="object__text">Wall Breaker</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Wall_Breaker-level" tabindex="105" class="js-setting" data-component="level" data-type="units">
                                        <option value="1000">1</option>
                    <option value="1500">2</option>
                    <option value="2000">3</option>
                    <option value="2500">4</option>
                    <option value="3000">5</option>
                    <option value="3500" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Wall_Breaker"
                                       size="3"
                                       tabindex="1105"
                                       data-component="quantity"/>
                            </td>
                            <td id="Wall_Breaker-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Wall_Breaker-subtract"
                                           size="3"
                                           tabindex="4105"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Wall_Breaker-1" class="number"></td>
            <td id="quantity-Wall_Breaker-2" class="number"></td>
            <td id="quantity-Wall_Breaker-3" class="number"></td>
            <td id="quantity-Wall_Breaker-4" class="number"></td>
    </tr>                        <tr id="units-building-level-6">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Balloon" title="Balloon"></span>
                                    <span class="object__text">Balloon</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Balloon-level" tabindex="106" class="js-setting" data-component="level" data-type="units">
                                        <option value="2000">1</option>
                    <option value="2500">2</option>
                    <option value="3000">3</option>
                    <option value="3500">4</option>
                    <option value="4000">5</option>
                    <option value="4500" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Balloon"
                                       size="3"
                                       tabindex="1106"
                                       data-component="quantity"/>
                            </td>
                            <td id="Balloon-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Balloon-subtract"
                                           size="3"
                                           tabindex="4106"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Balloon-1" class="number"></td>
            <td id="quantity-Balloon-2" class="number"></td>
            <td id="quantity-Balloon-3" class="number"></td>
            <td id="quantity-Balloon-4" class="number"></td>
    </tr>                        <tr id="units-building-level-7">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Wizard" title="Wizard"></span>
                                    <span class="object__text">Wizard</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Wizard-level" tabindex="107" class="js-setting" data-component="level" data-type="units">
                                        <option value="1500">1</option>
                    <option value="2000">2</option>
                    <option value="2500">3</option>
                    <option value="3000">4</option>
                    <option value="3500">5</option>
                    <option value="4000" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Wizard"
                                       size="3"
                                       tabindex="1107"
                                       data-component="quantity"/>
                            </td>
                            <td id="Wizard-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Wizard-subtract"
                                           size="3"
                                           tabindex="4107"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Wizard-1" class="number"></td>
            <td id="quantity-Wizard-2" class="number"></td>
            <td id="quantity-Wizard-3" class="number"></td>
            <td id="quantity-Wizard-4" class="number"></td>
    </tr>                        <tr id="units-building-level-8">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Healer" title="Healer"></span>
                                    <span class="object__text">Healer</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Healer-level" tabindex="108" class="js-setting" data-component="level" data-type="units">
                                        <option value="5000">1</option>
                    <option value="6000">2</option>
                    <option value="8000">3</option>
                    <option value="10000" selected="selected">4</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Healer"
                                       size="3"
                                       tabindex="1108"
                                       data-component="quantity"/>
                            </td>
                            <td id="Healer-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Healer-subtract"
                                           size="3"
                                           tabindex="4108"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Healer-1" class="number"></td>
            <td id="quantity-Healer-2" class="number"></td>
            <td id="quantity-Healer-3" class="number"></td>
            <td id="quantity-Healer-4" class="number"></td>
    </tr>                        <tr id="units-building-level-9">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_Dragon" title="Dragon"></span>
                                    <span class="object__text">Dragon</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Dragon-level" tabindex="109" class="js-setting" data-component="level" data-type="units">
                                        <option value="25000">1</option>
                    <option value="30000">2</option>
                    <option value="36000">3</option>
                    <option value="42000" selected="selected">4</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Dragon"
                                       size="3"
                                       tabindex="1109"
                                       data-component="quantity"/>
                            </td>
                            <td id="Dragon-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Dragon-subtract"
                                           size="3"
                                           tabindex="4109"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Dragon-1" class="number"></td>
            <td id="quantity-Dragon-2" class="number"></td>
            <td id="quantity-Dragon-3" class="number"></td>
            <td id="quantity-Dragon-4" class="number"></td>
    </tr>                        <tr id="units-building-level-10">
                            <td>
                                <span class="object object_units">
                                    <span class="object__icon object__icon_P-E-K-K-A-" title="P.E.K.K.A."></span>
                                    <span class="object__text">P.E.K.K.A.</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="P-E-K-K-A--level" tabindex="110" class="js-setting" data-component="level" data-type="units">
                                        <option value="30000">1</option>
                    <option value="35000">2</option>
                    <option value="42000">3</option>
                    <option value="50000" selected="selected">4</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="units"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="P-E-K-K-A-"
                                       size="3"
                                       tabindex="1110"
                                       data-component="quantity"/>
                            </td>
                            <td id="P-E-K-K-A--summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="units"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="P-E-K-K-A--subtract"
                                           size="3"
                                           tabindex="4110"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-P-E-K-K-A--1" class="number"></td>
            <td id="quantity-P-E-K-K-A--2" class="number"></td>
            <td id="quantity-P-E-K-K-A--3" class="number"></td>
            <td id="quantity-P-E-K-K-A--4" class="number"></td>
    </tr>            </tbody>
            <tfoot>
                <tr>
                    <td colspan="2" class="small number">
                        <label for="army-camps">Army Camps:</label></td>
                    <td class="result">
                        <span id="units-space" class="text-middle"></span><!--
                        --><select id="army-camps" data-type="all" tabindex="19" class="js-setting">
                                <option value="20">20</option>
                                <option value="30">30</option>
                                <option value="40">40</option>
                                <option value="50">50</option>
                                <option value="50">50</option>
                                <option value="55">55</option>
                                <option value="60">60</option>
                                <option value="65">65</option>
                                <option value="70">70</option>
                                <option value="75">75</option>
                                <option value="80">80</option>
                                <option value="85">85</option>
                                <option value="90">90</option>
                                <option value="95">95</option>
                                <option value="100">100</option>
                                <option value="105">105</option>
                                <option value="110">110</option>
                                <option value="115">115</option>
                                <option value="120">120</option>
                                <option value="125">125</option>
                                <option value="130">130</option>
                                <option value="135">135</option>
                                <option value="140">140</option>
                                <option value="145">145</option>
                                <option value="150">150</option>
                                <option value="155">155</option>
                                <option value="160">160</option>
                                <option value="165">165</option>
                                <option value="170">170</option>
                                <option value="175">175</option>
                                <option value="180">180</option>
                                <option value="185">185</option>
                                <option value="190">190</option>
                                <option value="195">195</option>
                                <option value="200">200</option>
                                <option value="205">205</option>
                                <option value="210">210</option>
                                <option value="215">215</option>
                                <option value="220">220</option>
                                <option value="225">225</option>
                                <option value="230">230</option>
                                <option value="235">235</option>
                                <option value="240" selected="selected">240</option>
                        </select>
                    </td>
                    <td id="units-cost" class="number result"></td>
                    <td id="units-subtracted-cost" class="small"></td>
                    <td id="units-time-barrack-1" class="number"></td>
                    <td id="units-time-barrack-2" class="number"></td>
                    <td id="units-time-barrack-3" class="number"></td>
                    <td id="units-time-barrack-4" class="number"></td>
                </tr>
            </tfoot>
        </table>
    </div><!--

    --><div class="floated__item js-dark-object">
        <h2 id="dark-anchor">
            Dark Barracks
            <span class="message message_negative message_after"
                  style="display: none;"
                  id="dark-barracks-exceeded">Exceeded the maximum queue length of the barracks</span>
        </h2>
        <table id="dark" class="data">
            <thead>
                <tr>
                    <th>Troop</th>
                    <th>Level</th>
                    <th class="data__quantity-column">
                        Quantity <span class="small tooltip" title="Army Camps Free Capacity" id="dark-quantity"></span>
                        <br/><button class="button button_reset js-reset" data-reset-type="dark" data-scope="quantity">Reset</button>
                    </th>
                    <th><span class="cost cost_dark-elixir">Total</span></th>
                    <th>
                        <span class="tooltip" title="Values from the “Subtract” columns not preserved between browser sessions nor saved in the saved compositions">Subtract</span>
                        <br/><button class="button button_reset js-reset" data-reset-type="dark" data-scope="subtract">Reset</button>
                    </th>
                    <th class="data__distribution-column">
                        <select id="dark-barracks-levels-1" tabindex="20" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br/>
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="dark-barracks-boosted-1" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="dark-barrack-space-1"></span>
                            <span id="dark-barrack-header-1"></span>
                        </span>
                    </th>
                    <th class="data__distribution-column">
                        <select id="dark-barracks-levels-2" tabindex="25" class="js-setting">
                        </select> <span class="text-middle">lvl</span><br/>
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="dark-barracks-boosted-2" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                        <span class="unimportant small tooltip" title="Queue Length / Maximum Queue Length">
                            <span id="dark-barrack-space-2"></span>
                            <span id="dark-barrack-header-2"></span>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody id="dark-body">
                        <tr id="dark-building-level-1">
                            <td>
                                <span class="object object_dark">
                                    <span class="object__icon object__icon_Minion" title="Minion"></span>
                                    <span class="object__text">Minion</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Minion-level" tabindex="201" class="js-setting" data-component="level" data-type="dark">
                                        <option value="6">1</option>
                    <option value="7">2</option>
                    <option value="8">3</option>
                    <option value="9">4</option>
                    <option value="10" selected="selected">5</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="dark"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Minion"
                                       size="3"
                                       tabindex="1201"
                                       data-component="quantity"/>
                            </td>
                            <td id="Minion-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="dark"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Minion-subtract"
                                           size="3"
                                           tabindex="4201"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Minion-1" class="number"></td>
            <td id="quantity-Minion-2" class="number"></td>
    </tr>                        <tr id="dark-building-level-2">
                            <td>
                                <span class="object object_dark">
                                    <span class="object__icon object__icon_Hog_Rider" title="Hog Rider"></span>
                                    <span class="object__text">Hog Rider</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Hog Rider-level" tabindex="202" class="js-setting" data-component="level" data-type="dark">
                                        <option value="30">1</option>
                    <option value="35">2</option>
                    <option value="40">3</option>
                    <option value="45">4</option>
                    <option value="50" selected="selected">5</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="dark"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Hog Rider"
                                       size="3"
                                       tabindex="1202"
                                       data-component="quantity"/>
                            </td>
                            <td id="Hog Rider-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="dark"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Hog Rider-subtract"
                                           size="3"
                                           tabindex="4202"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Hog Rider-1" class="number"></td>
            <td id="quantity-Hog Rider-2" class="number"></td>
    </tr>                        <tr id="dark-building-level-3">
                            <td>
                                <span class="object object_dark">
                                    <span class="object__icon object__icon_Valkyrie" title="Valkyrie"></span>
                                    <span class="object__text">Valkyrie</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Valkyrie-level" tabindex="203" class="js-setting" data-component="level" data-type="dark">
                                        <option value="70">1</option>
                    <option value="100">2</option>
                    <option value="130">3</option>
                    <option value="160" selected="selected">4</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="dark"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Valkyrie"
                                       size="3"
                                       tabindex="1203"
                                       data-component="quantity"/>
                            </td>
                            <td id="Valkyrie-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="dark"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Valkyrie-subtract"
                                           size="3"
                                           tabindex="4203"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Valkyrie-1" class="number"></td>
            <td id="quantity-Valkyrie-2" class="number"></td>
    </tr>                        <tr id="dark-building-level-4">
                            <td>
                                <span class="object object_dark">
                                    <span class="object__icon object__icon_Golem" title="Golem"></span>
                                    <span class="object__text">Golem</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Golem-level" tabindex="204" class="js-setting" data-component="level" data-type="dark">
                                        <option value="450">1</option>
                    <option value="525">2</option>
                    <option value="600">3</option>
                    <option value="675">4</option>
                    <option value="750" selected="selected">5</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="dark"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Golem"
                                       size="3"
                                       tabindex="1204"
                                       data-component="quantity"/>
                            </td>
                            <td id="Golem-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="dark"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Golem-subtract"
                                           size="3"
                                           tabindex="4204"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Golem-1" class="number"></td>
            <td id="quantity-Golem-2" class="number"></td>
    </tr>                        <tr id="dark-building-level-5">
                            <td>
                                <span class="object object_dark">
                                    <span class="object__icon object__icon_Witch" title="Witch"></span>
                                    <span class="object__text">Witch</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Witch-level" tabindex="205" class="js-setting" data-component="level" data-type="dark">
                                        <option value="250">1</option>
                    <option value="350" selected="selected">2</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="dark"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Witch"
                                       size="3"
                                       tabindex="1205"
                                       data-component="quantity"/>
                            </td>
                            <td id="Witch-summary" class="number small">
                            </td>
                                <td>
                                    <input type="text"
                                           pattern="[0-9]*"
                                           data-type="dark"
                                           min="0"
                                           max="999"
                                           class="js-number text-middle"
                                           id="Witch-subtract"
                                           size="3"
                                           tabindex="4205"
                                           data-component="subtract"/>
                                </td>
            <td id="quantity-Witch-1" class="number"></td>
            <td id="quantity-Witch-2" class="number"></td>
    </tr>            </tbody>
            <tfoot>
                <tr>
                    <td></td>
                    <td></td>
                    <td id="dark-space" class="result"></td>
                    <td id="dark-cost" class="number result"></td>
                    <td id="dark-subtracted-cost" class="small"></td>
                    <td id="dark-time-barrack-1" class="number"></td>
                    <td id="dark-time-barrack-2" class="number"></td>
                </tr>
            </tfoot>
        </table>
    </div><!--

    --><div class="floated__item js-spells-object">
        <h2 id="spell-anchor">Spell Factory</h2>
        <table id="spells" class="data">
            <thead>
                <tr>
                    <th>Spell</th>
                    <th>Level</th>
                    <th class="data__quantity-column">
                        Quantity <span class="small tooltip" title="Spell Factory Free Capacity" id="spells-quantity"></span>
                        <br/><button class="button button_reset js-reset" data-reset-type="spells" data-scope="quantity">Reset</button>
                    </th>
                    <th><span class="cost cost_elixir">Total</span></th>
                    <th>
                        <select id="spell-factory-level" tabindex="35" class="js-setting">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5" selected="selected">5</option>
                        </select> <span class="text-middle">lvl</span><br />
                        <label class="setting-mode-part unimportant">
                            <input type="checkbox" id="spell-factory-boosted" class="text-middle"/>
                            <span class="text-middle">Boosted</span><br />
                        </label>
                    </th>
                </tr>
            </thead>
            <tbody id="spells-body">
                        <tr id="spells-building-level-1">
                            <td>
                                <span class="object object_spells">
                                    <span class="object__icon object__icon_Lightning" title="Lightning"></span>
                                    <span class="object__text">Lightning</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Lightning-level" tabindex="301" class="js-setting" data-component="level" data-type="spells">
                                        <option value="15000">1</option>
                    <option value="16500">2</option>
                    <option value="18000">3</option>
                    <option value="20000">4</option>
                    <option value="22000">5</option>
                    <option value="24000" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="spells"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Lightning"
                                       size="3"
                                       tabindex="1301"
                                       data-component="quantity"/>
                            </td>
                            <td id="Lightning-summary" class="number small">
                            </td>
                                <td></td>
    </tr>                        <tr id="spells-building-level-2">
                            <td>
                                <span class="object object_spells">
                                    <span class="object__icon object__icon_Healing" title="Healing"></span>
                                    <span class="object__text">Healing</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Healing-level" tabindex="302" class="js-setting" data-component="level" data-type="spells">
                                        <option value="15000">1</option>
                    <option value="16500">2</option>
                    <option value="18000">3</option>
                    <option value="20000">4</option>
                    <option value="22000">5</option>
                    <option value="24000" selected="selected">6</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="spells"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Healing"
                                       size="3"
                                       tabindex="1302"
                                       data-component="quantity"/>
                            </td>
                            <td id="Healing-summary" class="number small">
                            </td>
                                <td></td>
    </tr>                        <tr id="spells-building-level-3">
                            <td>
                                <span class="object object_spells">
                                    <span class="object__icon object__icon_Rage" title="Rage"></span>
                                    <span class="object__text">Rage</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Rage-level" tabindex="303" class="js-setting" data-component="level" data-type="spells">
                                        <option value="23000">1</option>
                    <option value="25000">2</option>
                    <option value="27000">3</option>
                    <option value="30000">4</option>
                    <option value="33000" selected="selected">5</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="spells"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Rage"
                                       size="3"
                                       tabindex="1303"
                                       data-component="quantity"/>
                            </td>
                            <td id="Rage-summary" class="number small">
                            </td>
                                <td></td>
    </tr>                        <tr id="spells-building-level-4">
                            <td>
                                <span class="object object_spells">
                                    <span class="object__icon object__icon_Jump" title="Jump"></span>
                                    <span class="object__text">Jump</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Jump-level" tabindex="304" class="js-setting" data-component="level" data-type="spells">
                                        <option value="23000">1</option>
                    <option value="29000" selected="selected">2</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="spells"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Jump"
                                       size="3"
                                       tabindex="1304"
                                       data-component="quantity"/>
                            </td>
                            <td id="Jump-summary" class="number small">
                            </td>
                                <td></td>
    </tr>                        <tr id="spells-building-level-5">
                            <td>
                                <span class="object object_spells">
                                    <span class="object__icon object__icon_Freeze" title="Freeze"></span>
                                    <span class="object__text">Freeze</span>
                                </span>
                            </td>
                            <td class="small">
                                <select id="Freeze-level" tabindex="305" class="js-setting" data-component="level" data-type="spells">
                                        <option value="26000">1</option>
                    <option value="29000">2</option>
                    <option value="31000">3</option>
                    <option value="33000" selected="selected">4</option>
            </select>
                            </td>
                            <td>
                                <input type="text"
                                       pattern="[0-9]*"
                                       data-type="spells"
                                       min="0"
                                       max="999"
                                       class="js-number text-middle"
                                       id="Freeze"
                                       size="3"
                                       tabindex="1305"
                                       data-component="quantity"/>
                            </td>
                            <td id="Freeze-summary" class="number small">
                            </td>
                                <td></td>
    </tr>            </tbody>
            <tfoot>
                <tr>
                    <td></td>
                    <td></td>
                    <td class="result" id="spells-space"></td>
                    <td id="spells-cost" class="number result"></td>
                    <td class="result number" id="spells-time"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<div class="js-share">
    <h2 class="block-indented" id="share-anchor">Share Composition</h2>
    <p class="fixed-content">
        <input id="share-permalink" class="field-long" tabindex="1901"/>
    </p>
    <p>
        <a href=""
           target="_blank"
           id="share-twitter"
           class="button button_social js-goal"
           tabindex="1903"
           data-goal="SHARE_TWITTER">
            <span class="icon icon_twitter">Share Composition on Twitter</span>
        </a>
        <a href=""
           target="_blank"
           id="share-facebook"
           class="button button_after button_social js-goal"
           tabindex="1904"
           data-goal="SHARE_FACEBOOK">
            <span class="icon icon_facebook">Share Composition on Facebook</span>
        </a>
    </p>
    <p class="fixed-content block-indented">
        <textarea id="share-text" class="field-long" tabindex="1905" rows="2"></textarea>
    </p>
</div>

<h2 class="block-indented" id="saved-anchor">Saved Compositions</h2>
<p>
    <button class="js-save-composition button" tabindex="2000"><span class="icon icon_save">Save Composition</span></button>

    <span id="already-saved" class="message message_after message_closeable" style="display: none" title="Click to hide">
        Already in the saved compositions
    </span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<div class="list-content list-content_small fixed-content" id="changelog">
    <h3 class="block-indented">What’s New in Version 3.5 <a href="version-history.html" class="button button_after" target="_blank">Version History</a></h3>
    <ul>
        <li>When possible, troops distributed between the barracks into equal parts.</li>
        <li>Improved usability of plus/minus buttons (no more frozen state on desktop or failed attempts to scroll on mobile).</li>
    </ul>
</div>

<h2 class="block-indented">Additionally</h2>
<div class="fixed-content">
    <p>
        Please note this tool is only available at http://mkln.ru/clash-of-clans/.
        If you’ve seen it on other sites or in the iTunes App Store or anywhere else —
        is the result of the actions of fraudsters and thieves that have nothing to do with me
        and use my work without my permission, violating copyright.
    </p>

    <p>
        If you find a bug please send an e-mail to <a href="mailto:clash-of-clans@mkln.ru">clash-of-clans@mkln.ru</a>.
    </p>

    <p class="only-desktop">
        Do you have a Dropbox account?
        If not, please help me to get some free space by
        <a href="https://db.tt/4D6VZnI" target="_blank" class="js-goal" data-goal="DROPBOX_LINK">signing up</a>,
        installing the desktop app and signing in there (it’s all free).
    </p>

    <div class="add-to-home-screen">
        <input type="checkbox" id="add-to-home-screen" class="add-to-home-screen-flag" />
        <label for="add-to-home-screen" class="add-to-home-screen__button js-goal" data-goal="ADD_TO_HOME">
            How to add Clash Calc icon to your Home screen
        </label>
        <ol class="add-to-home-screen__list">
            <li value="0">
                Open Safari, type <kbd>http://mkln.ru/clash-of-clans/</kbd> in the address bar, tap Go and wait until the page is loaded.
            </li>
            <li>
                Tap the Share button
                (&thinsp;<span class="add-to-home-screen__share-icon"></span>&thinsp;).
            </li>
            <li>Tap the icon labeled “Add to Home Screen”.</li>
            <li>Tap the Add button in the upper right corner.</li>
            <li>Launch Clash Calc from your Home screen by tapping its icon.</li>
        </ol>
    </div>
</div>

<footer>
    <div class="fixed-content">
        <p>
            Save Icon designed by <a href="http://www.endlessicons.com/" target="_blank">Min Kim</a>.
        </p>
        <p>
            Clash of Clans and its logos are trademarks of Supercell.
            This web site is not affiliated with, endorsed, sponsored, or specifically approved by Supercell.
            Supercell is not responsible for the operation or content of this site.
            Use the trademarks and other intellectual property of Supercell is only as expressly permitted as set forth in Supercell’s
            <a href="http://forum.supercell.net/showthread.php/148005-Clash-of-Clans-Fan-Kit-and-Guidelines">Fan Site Kit Agreement</a>.
            For more information about Supercell, please visit their website at <a href="http://www.supercell.net/">www.supercell.net</a>.
        </p>

        <p>
            This work is licensed under a
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">
                Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.
        </p>
        <p>
            Developed by <a href="/en/">Mikhail Kalashnik</a><br />
            &copy; 2013
        </p>
    </div>
</footer>

<script>/**
* @preserve Copyright 2012 Twitter, Inc.
* @license http://www.apache.org/licenses/LICENSE-2.0.txt
*/
var Hogan={};(function(a,b){function i(a){return String(a===null||a===undefined?"":a)}function j(a){return a=i(a),h.test(a)?a.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&#39;").replace(g,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(a,b,c){return""},v:j,t:i,render:function(b,c,d){return this.ri([b],c||{},d)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&typeof e=="string"&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d)){c(a,b,this);return}for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&a.length===0?!1:(typeof a=="function"&&(a=this.ls(a,b,c,d,e,f,g)),h=a===""||!!a,!d&&h&&b&&b.push(typeof a=="object"?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if(a==="."&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&typeof f=="object"&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(!d&&typeof f=="function"&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;for(var h=b.length-1;h>=0;h--){f=b[h];if(f&&typeof f=="object"&&a in f){e=f[a],g=!0;break}}return g?(!d&&typeof e=="function"&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=d==null?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);i=a.call(h);if(typeof i=="function"){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,c){var d=b[b.length-1],e=a.call(d);if(typeof e=="function"){e=i(e.call(d));if(this.c&&~e.indexOf("{{"))return this.c.compile(e,this.options).render(d,c)}return i(e)}};var c=/&/g,d=/</g,e=/>/g,f=/\'/g,g=/\"/g,h=/[&<>\"\']/,k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan)

var part = (function() {
    'use strict';

    var parts = {};

    var buildDeps = function(deps) {
        return deps.map(function(dep) {
            return parts[dep];
        });
    };

    return function(nameOrDeps, depsOrFunc, func) {
        if (typeof nameOrDeps === 'string') {
            parts[nameOrDeps] = func ? func.apply(null, buildDeps(depsOrFunc)) : depsOrFunc();
        } else {
            depsOrFunc.apply(null, buildDeps(nameOrDeps));
        }
    };
}());



part('dom', function() {
    'use strict';

    var RegisterUniversalClick = function(target, listener, isMiddleClickTriggers) {
        var touchSupported = ('ontouchstart' in window);

        var lastEventSource;

        if (touchSupported) {
            var tapping;

            target.addEventListener('touchstart', function() {
                if (lastEventSource === 'mouse') {
                    lastEventSource = null;
                    tapping = false;
                } else {
                    lastEventSource = 'touch';
                    tapping = true;
                }
            }, false);

            target.addEventListener('touchmove', function() {
                tapping = false;
            }, false);

            target.addEventListener('touchcancel', function() {
                tapping = false;
            }, false);

            target.addEventListener('touchend', function(e) {
                if (tapping) {
                    listener(e);
                }
            }, false);
        }

        if (!window.mkIsMobile || !touchSupported) {
            if (isMiddleClickTriggers) {
                var clicking;

                target.addEventListener('mousedown', function() {
                    if (lastEventSource === 'touch') {
                        lastEventSource = null;
                        clicking = false;
                    } else {
                        lastEventSource = 'mouse';
                        clicking = true;
                    }
                }, false);

                target.addEventListener('mousemove', function() {
                    clicking = false;
                }, false);

                target.addEventListener('mouseup', function(e) {
                    if (clicking && e.which !== 3) {
                        listener(e);
                    }
                }, false);

                target.addEventListener('keypress', function(e) {
                    var code = e.keyCode || e.which;
                    if ([13, 32].indexOf(code) !== -1) {
                        listener(e);
                    }
                }, false);

            } else {
                target.addEventListener('click', function(e) {
                    if (lastEventSource === 'touch') {
                        lastEventSource = null;
                    } else {
                        lastEventSource = 'mouse';
                        listener(e);
                    }
                }, false);
            }
        }

    };

    var listen = function(target, types, listener) {
        var l = types.length;
        while (l--) {
            var type = types[l];
            if (type === 'universalClick') {
                RegisterUniversalClick(target, listener);
            } else if (type === 'universalAndMiddleClick') {
                RegisterUniversalClick(target, listener, true);
            } else {
                target.addEventListener(type, listener, false);
            }
        }
    };

    var toggleClass = function(el, value, state) {
        el.classList[state ? 'add' : 'remove'](value);
    };

    var List = function(elements) {
        if (elements) {
            this.elements = elements;
        } else {
            this.elements = [];
        }

        this.listen = function(types, listener) {
            this.iterate(function(el) {
                listen(el, types, listener);
            });
        };

        this.iterate = function(callback) {
            var i = -1;
            var l = this.elements.length;
            while (++i < l) {
                callback(this.elements[i]);
            }
        };

        this.toggleClass = function(value, state) {
            this.iterate(function(el) {
                toggleClass(el, value, state);
            });
        };
    };

    var selectAllTimeout;
    var selectAll = function(e) {
        var el = e.currentTarget;
        if (['input', 'textarea'].indexOf(el.tagName.toLowerCase()) !== -1 && el.value !== '') {
            clearTimeout(selectAllTimeout);
            selectAllTimeout = setTimeout(function() {
                el.setSelectionRange(0, el.value.length);
            }, 1);
        }
    };

    return {
        'id': function(id) {
            return document.getElementById(id);
        },
        'insertBefore': function(el, newEl) {
            if (el.nextSibling) {
                el.parentNode.insertBefore(newEl, el.nextSibling);
            } else {
                el.parentNode.appendChild(newEl);
            }
        },
        'find': function(selector, context) {
            return new List((context || document).querySelectorAll(selector));
        },
        'selectOnFocus': function(el) {
            listen(el, ['focus'], selectAll);
        },
        'listen': listen,
        'toggleClass': toggleClass
    };

});



part('common', ['dom'], function(dom) {

    'use strict';

    return {
        'objectCopy': function(obj) {
            var newObj = obj.constructor();
            Object.keys(obj).forEach(function(key) {
                newObj[key] = obj[key];
            });
            return newObj;
        },

        'numberFormat': function(n) {
            return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        },

        'convertToTitle': function(s) {
            return s.replace('_', ' ').replace(/-/g, '.');
        },

        'getFormattedTime': function(time, hideSeconds) {
            var formattedTime = '';
            var remainingTime = time;

            if (remainingTime > 3599) {
                formattedTime += Math.floor(remainingTime / 3600) + 'h ';
                remainingTime %= 3600;
                hideSeconds = true;
            }

            if (remainingTime > 59) {
                var minutes = Math.floor(remainingTime / 60);
                remainingTime %= 60;
                if (hideSeconds && remainingTime > 0) {
                    minutes++;
                }
                formattedTime += minutes + 'm ';
            } else {
                formattedTime += '0m ';
            }

            if (formattedTime === '' || !hideSeconds) {
                formattedTime += remainingTime + 's';
            }

            return formattedTime;
        },

        'Dict': function(data) {
            this.data = data;

            this.get = function(key, defaultValue) {
                var value = this.data[key];
                if (defaultValue !== undefined && (value === undefined || value === null)) {
                    return defaultValue;
                }
                return value;
            };

            this.set = function(key, value) {
                this.data[key] = value;
            };

            this.getAll = function() {
                return this.data;
            };
        },

        'infoMessage': function(id, isAutoHide) {
            var el;
            var hide;
            var timeout;

            el = dom.id(id);

            hide = function() {
                clearTimeout(timeout);
                el.style.display = 'none';
            };

            dom.listen(el, ['universalClick'], hide);

            return {
                'show': function() {
                    el.style.display = '';
                    if (isAutoHide) {
                        timeout = setTimeout(function() {
                            el.style.display = 'none';
                        }, 2000);
                    }
                },
                'hide': hide
            };
        }
    };

});

part('events', function() {
    'use strict';

    return {

        events: {},
        future: {},

        trigger: function(name, data, future) {
            if (this.events[name]) {
                this.events[name].forEach(function(event) {
                    event(data);
                });
            } else if (future) {
                if (!this.future[name]) {
                    this.future[name] = [];
                }
                this.future[name].push(data || {});
            }
        },

        listen: function(name, cb) {
            if (!this.events[name]) {
                this.events[name] = [];
            }
            this.events[name].push(cb);

            if (this.future[name]) {
                this.future[name].forEach(cb);
            }
        }

    };
});

part('converter', ['events'], function(events) {

    'use strict';

    var oldConvert3to4 = function(data, replaceSettingsMode) {
        var subtractIndexes = [28,29,30,31,32,33,34,35,36,37,54,55,56,57,62];
        var settingsModeIndex = 63;

        var indexDiff = 0;
        subtractIndexes.forEach(function(keyIndex) {
            if (typeof data[keyIndex - indexDiff] !== 'undefined') {
                data.splice(keyIndex - indexDiff, 1);
                indexDiff++;
            }
        });
        if (typeof data[settingsModeIndex - indexDiff] !== 'undefined') {
            if (replaceSettingsMode) {
                localStorage.setItem('settingsMode', data[settingsModeIndex - indexDiff] === 2 ? 'off' : 'on');
            }
            data.splice(settingsModeIndex - indexDiff, 1);
        }
    };

    if (localStorage.getItem('data3') && !localStorage.getItem('data4')) {
        var parts = JSON.parse(localStorage.getItem('data3'));
        parts.forEach(function(part, partIndex) {
            oldConvert3to4(part, (partIndex === 0));
        });

        localStorage.setItem('data4', JSON.stringify(parts));

        events.trigger('goal', {'id': 'CONVERTED3TO4'}, true);
    }

    ['savedData', 'savedCalculations', 'data', 'data2', 'data3'].forEach(function(key) {
        localStorage.removeItem(key);
    });

    return {
        'oldConvert3to4': oldConvert3to4
    };

});



part('types', function() {
    'use strict';

    var data = {
        'units': {
            'Barbarian': [20, [25, 40, 60, 80, 100, 150], 1, 1, {1: 1, 3: 2, 5: 3, 7: 4, 8: 5, 9: 6}],
            'Archer': [25, [50, 80, 120, 160, 200, 300], 1, 2, {1: 1, 3: 2, 5: 3, 7: 4, 8: 5, 9: 6}],
            'Goblin': [30, [25, 40, 60, 80, 100, 150], 1, 3, {1: 1, 3: 2, 5: 3, 7: 4, 8: 5, 10: 6}],
            'Giant': [120, [500, 1000, 1500, 2000, 2500, 3000], 5, 4, {1: 1, 2: 1, 4: 2, 6: 3, 7: 4, 8: 5, 9: 6}],
            'Wall_Breaker': [120, [1000, 1500, 2000, 2500, 3000, 3500], 2, 5, {1: 1, 3: 1, 4: 2, 6: 3, 7: 4, 8: 5, 10: 6}],
            'Balloon': [480, [2000, 2500, 3000, 3500, 4000, 4500], 5, 6, {1: 1, 4: 2, 6: 3, 7: 4, 8: 5, 9: 6}],
            'Wizard': [480, [1500, 2000, 2500, 3000, 3500, 4000], 4, 7, {1: 1, 5: 2, 6: 3, 7: 4, 8: 5, 10: 6}],
            'Healer': [900, [5000, 6000, 8000, 10000], 14, 8, {1: 1, 6: 1, 7: 2, 8: 3, 9: 4}],
            'Dragon': [1800, [25000, 30000, 36000, 42000], 20, 9, {1: 1, 7: 2, 8: 3, 10: 4}],
            'P-E-K-K-A-': [2700, [30000, 35000, 42000, 50000], 25, 10, {1: 1, 8: 3, 10: 4}]
        },
        'dark': {
            'Minion': [45, [6, 7, 8, 9, 10], 2, 1, {1: 1, 7: 2, 8: 4, 9: 5}],
            'Hog Rider': [120, [30, 35, 40, 45, 50], 5, 2, {1: 1, 7: 2, 8: 4, 9: 5}],
            'Valkyrie': [900, [70, 100, 130, 160], 8, 3, {1: 1, 7: 1, 8: 2, 9: 4}],
            'Golem': [2700, [450, 525, 600, 675, 750], 30, 4, {1: 1, 8: 2, 9: 4, 10: 5}],
            'Witch': [1200, [250, 350], 12, 5, {1: 1, 9: 2}]
        },
        'spells': {
            'Lightning': [1800, [15000, 16500, 18000, 20000, 22000, 24000], 1, 1, {1: 1, 5: 4, 8: 5, 10: 6}],
            'Healing': [1800, [15000, 16500, 18000, 20000, 22000, 24000], 1, 2, {1: 1, 6: 3, 7: 4, 8: 5, 9: 6}],
            'Rage': [2700, [23000, 25000, 27000, 30000, 33000], 1, 3, {1: 1, 7: 4, 8: 5}],
            'Jump': [2700, [23000, 29000], 1, 4, {1: 1, 9: 2}],
            'Freeze': [2700, [26000, 29000, 31000, 33000], 1, 5, {1: 1, 10: 4}]
        }
    };

    return {
        'data': data,
        'iterateTree': function(callback) {
            Object.keys(data).forEach(function(type) {
                Object.keys(data[type]).forEach(function(name) {
                    callback(type, name, data[type][name]);
                });
            });
        }
    };

});
part('savedData', ['common'], function(common) {
    'use strict';

    var saveMappingKeys = [
        'barracks-levels-1',
        'barracks-levels-2',
        'barracks-levels-3',
        'barracks-levels-4',
        'dark-barracks-levels-1',
        'dark-barracks-levels-2',
        'armyCamps',
        'spellFactoryLevel',
        'Barbarian',
        'Archer',
        'Goblin',
        'Giant',
        'Wall_Breaker',
        'Balloon',
        'Wizard',
        'Healer',
        'Dragon',
        'P-E-K-K-A-',
        'Barbarian-level',
        'Archer-level',
        'Goblin-level',
        'Giant-level',
        'Wall_Breaker-level',
        'Balloon-level',
        'Wizard-level',
        'Healer-level',
        'Dragon-level',
        'P-E-K-K-A--level',
        'Lightning',
        'Healing',
        'Rage',
        'Jump',
        'Lightning-level',
        'Healing-level',
        'Rage-level',
        'Jump-level',
        'Minion',
        'Hog Rider',
        'Valkyrie',
        'Golem',
        'Minion-level',
        'Hog Rider-level',
        'Valkyrie-level',
        'Golem-level',
        'Freeze',
        'Freeze-level',
        'Witch',
        'Witch-level'
    ];

    var dataObjectToArray = function(dataObject) {
        var dataArray = [];

        saveMappingKeys.forEach(function(key) {
            var value;
            if (dataObject.hasOwnProperty(key)) {
                value = dataObject[key];
            } else {
                value = 0;
            }
            dataArray.push(value);
        });

        return dataArray;
    };

    var dataArrayToObject = function(dataArray) {
        var dataObject = {};

        saveMappingKeys.forEach(function(key, index) {
            if (dataArray[index] === undefined) {
                dataObject[key] = 0;
            } else {
                dataObject[key] = dataArray[index];
            }
        });

        return dataObject;
    };

    var DataStorage = function(key) {
        this.key = key;

        this.load = function(isLoadSource) {
            var data = localStorage.getItem(this.key);
            data = (data && JSON.parse(data)) || [];
            if (isLoadSource) {
                return data;
            }
            data = data.map(dataArrayToObject);
            return data;
        };

        this.save = function(dataObjects) {
            var dataArrays = dataObjects.map(dataObjectToArray);
            localStorage.setItem(this.key, JSON.stringify(dataArrays));
        };
    };

    var storage = new DataStorage('data4');
    var all = storage.load().map(function(entry) {
        return new common.Dict(entry);
    });

    return {
        'storage': storage,
        'all': all,
        'current': all[0] || new common.Dict({}),
        'save': function() {
            this.all[0] = this.current;
            storage.save(this.all.map(function(entry) {
                return entry.getAll();
            }));
        },
        'dataArrayToObject': dataArrayToObject,
        'dataObjectToArray': dataObjectToArray
    };
});
var DOM_ENABLED = true;


part('armyCamps', ['dom', 'events', 'savedData'], function(dom, events, savedData) {
    'use strict';

    var data = {
        'base': [20, 30, 40, 50],
        'step': 5,
        'max': 240,
        'th': {
            1: 20,
            2: 30,
            3: 70,
            4: 80,
            5: 135,
            6: 150,
            7: 200,
            9: 220,
            10: 240
        }
    };

    if (DOM_ENABLED) {
        var el;

        var updateSavedData = function(value) {
            savedData.current.set('armyCamps', parseInt(value, 10));
        };

        var notifyChange = function() {
            events.trigger('elChange', el, true);
        };

        el = dom.id('army-camps');

        dom.listen(el, ['change'], function() {
            updateSavedData(el.value);
            notifyChange();

            events.trigger('calculate', {
                'type': 'all'
            });
        });

        events.listen('updateFromSaved', function() {
            el.value = savedData.current.get('armyCamps', el.value);
            updateSavedData(el.value);
            notifyChange();
        });

        events.listen('updateSetting', function(params) {
            var value = params.helper(params.th, data.th);
            el.value = value;
            updateSavedData(value);
            notifyChange();
        });
    }

    return data;
});

var DOM_ENABLED = true;


part('spellFactory', ['dom', 'events', 'savedData'], function(dom, events, savedData) {
    'use strict';

    var data = {
        'max': 5,
        'th': {
            1: 0,
            5: 1,
            6: 2,
            7: 3,
            9: 4,
            10: 5
        }
    };

    if (DOM_ENABLED) {
        var levelEl = dom.id('spell-factory-level');
        var boostedEl = dom.id('spell-factory-boosted');

        var updateLevelSavedData = function(value) {
            savedData.current.set('spellFactoryLevel', parseInt(value, 10));
        };

        var notifyLevelChange = function() {
            events.trigger('elChange', levelEl, true);
        };

        dom.listen(levelEl, ['change'], function() {
            updateLevelSavedData(levelEl.value);
            notifyLevelChange();

            events.trigger('calculate', {
                'type': 'spells'
            });
        });

        dom.listen(boostedEl, ['change'], function() {
            localStorage.setItem('spell-factory-boosted', (boostedEl.checked ? 'yes' : 'no'));

            events.trigger('calculate', {
                'type': 'spells'
            });
        });

        events.listen('updateFromSaved', function() {
            levelEl.value = savedData.current.get('spellFactoryLevel', levelEl.value);
            updateLevelSavedData(levelEl.value);
            notifyLevelChange();

            boostedEl.checked = (localStorage.getItem('spell-factory-boosted') === 'yes');
        });

        events.listen('updateSetting', function(params) {
            var value = params.helper(params.th, data.th);
            levelEl.value = value;
            updateLevelSavedData(value);
            notifyLevelChange();
        });
    }

    return data;

});

var DOM_ENABLED = true;


part('barracks', ['dom', 'savedData', 'events'], function(dom, savedData, events) {
    'use strict';

    var BarracksContainer = function(data) {
        this.data = data;

        var barracks = [];

        var updateHeader = function(num, level) {
            var header = '';
            if (level !== 0) {
                header = data.queue[level];
            }
            dom.id(data.type + '-barrack-header-' + num).textContent = header;
        };

        var updateSavedData = function(el) {
            savedData.current.set(el.getAttribute('id'), el.selectedIndex);
        };

        if (DOM_ENABLED) {
            var i = 0;
            while (++i <= data.count) {
                var barrack = dom.id(data.prefix + '-levels-' + i);
                var num = i.toString();
                barrack.setAttribute('data-num', num);
                var j = -1;
                var options = [];
                while (++j <= data.maxLevel) {
                    if (i === 1 && j === 0 && data.firstRequired) {
                        continue;
                    }
                    var selected = '';
                    if (j === data.maxLevel) {
                        selected = ' selected="selected"';
                    }
                    options.push('<option value="' + j + '"' + selected + '>' + j + '</option>');
                }
                barrack.innerHTML = options.join('');

                dom.listen(barrack, ['change'], function(e) {
                    var el = e.currentTarget;
                    updateSavedData(el);
                    events.trigger('elChange', el);

                    updateHeader(el.getAttribute('data-num'), el.value);

                    events.trigger('calculate', {
                        'type': 'barrack-' + data.type
                    });
                });

                barracks.push(barrack);

                var boostedId = data.prefix + '-boosted-' + i;
                var boostedEl = dom.id(boostedId);
                boostedEl.setAttribute('data-num', num);
                if (localStorage.getItem(boostedId) === 'yes') {
                    boostedEl.checked = true;
                }
                dom.listen(boostedEl, ['change'], function(e) {
                    var el = e.currentTarget;
                    localStorage.setItem(el.getAttribute('id'), (el.checked ? 'yes' : 'no'));
                    events.trigger('calculate', {
                        'type': data.type
                    });
                });
            }

            events.listen('updateFromSaved', function() {
                barracks.forEach(function(el) {
                    var saved = savedData.current.get(el.getAttribute('id'), el.selectedIndex);
                    el.options[saved].selected = true;
                    updateSavedData(el);

                    events.trigger('elChange', el, true);

                    updateHeader(el.getAttribute('data-num'), el.value);
                });
            });

            events.listen('updateSetting', function(params) {
                var value = params.helper(params.th, data.th);
                barracks.forEach(function(el) {
                    el.value = value;
                    updateSavedData(el);

                    events.trigger('elChange', el, true);

                    updateHeader(el.getAttribute('data-num'), el.value);
                });
            });
        }
    };

    return {
        'units': new BarracksContainer({
            'type': 'units',
            'prefix': 'barracks',
            'count': 4,
            'queue': [0, 20, 25, 30, 35, 40, 45, 50, 55, 60, 75],
            'maxLevel': 10,
            'firstRequired': true,
            'th': {
                1: 3,
                2: 4,
                3: 5,
                4: 6,
                5: 7,
                6: 8,
                7: 9,
                8: 10
            }
        }),
        'dark': new BarracksContainer({
            'type': 'dark',
            'prefix': 'dark-barracks',
            'count': 2,
            'queue': [0, 40, 50, 60, 70, 80],
            'maxLevel': 5,
            'th': {
                1: 0,
                7: 2,
                8: 4,
                9: 5
            }
        })
    };
});

part('calculate', [
    'spellFactory',
    'savedData',
    'types',
    'events',
    'dom',
    'barracks',
], function(spellFactory, savedData, types, events, dom, barracksInfo) {

    'use strict';

    var typesSortedLevel = {};
    Object.keys(types.data).forEach(function(type) {
        typesSortedLevel[type] = [];
        Object.keys(types.data[type]).forEach(function(name) {
            typesSortedLevel[type].unshift(types.data[type][name].concat(name));
        });
    });

    var suitableBarracksSort = function(a, b) {
        // minimum time first
        var aTime = a.getActualTime();
        var bTime = b.getActualTime();
        if (aTime < bTime) {
            return -1;
        }
        if (aTime > bTime) {
            return 1;
        }

        // minimum space first
        if (a.space < b.space) {
            return -1;
        }
        if (a.space > b.space) {
            return 1;
        }

        // minimum max space first
        if (a.maxSpace < b.maxSpace) {
            return -1;
        }
        if (a.maxSpace > b.maxSpace) {
            return 1;
        }

        return 0;
    };


    var barracksMinLevelSort = function(a, b) {
        // minimum level first
        if (a.level < b.level) {
            return -1;
        }
        if (a.level > b.level) {
            return 1;
        }

        return suitableBarracksSort(a, b);
    };

    var getSuitableBarrack = function(barracks,
                                      requiredLevel,
                                      requiredSpace,
                                      requiredTime,
                                      avgTime) {
        var suitable = barracks.filter(function(barrack) {
            return barrack.level >= requiredLevel && (barrack.space + requiredSpace) <= barrack.maxSpace;
        });

        if (!suitable.length) {
            return null;
        }

        if (suitable.length > 1) {
            if (requiredSpace === 1) {
                var timeSuitable = suitable.filter(function(barrack) {
                    return (barrack.getActualTime() + requiredTime) <= avgTime;
                });
                if (timeSuitable.length) {
                    if (timeSuitable.length > 1) {
                        timeSuitable.sort(barracksMinLevelSort);
                    }
                    return timeSuitable[0];
                }
            }

            suitable.sort(suitableBarracksSort);
        }

        return suitable[0];
    };

    var fillBarracks = function(barracksQueue, unitsDistribution, avgTime, activeCount) {
        var isSuitedForEqual = true;

        var maxUnitLevel = 0;
        var totalUnitsSpace = 0;
        unitsDistribution.forEach(function(kit) {
            if (isSuitedForEqual && kit[1] % activeCount !== 0) {
                isSuitedForEqual = false;
            }

            maxUnitLevel = Math.max(kit[2], maxUnitLevel);
            totalUnitsSpace += kit[1] * kit[4];
        });

        var isAllBarracksSimilar = true;
        var totalBarracksSpace = 0;
        var barracksNums = [];
        barracksQueue.forEach(function(barrack) {
            if (barrack.level !== 0) {
                var boostedLikeFirst = (barrack.isBoosted === barracksQueue[0].isBoosted);
                if (isSuitedForEqual && !(barrack.level >= maxUnitLevel && boostedLikeFirst)) {
                    isSuitedForEqual = false;
                }

                if (isAllBarracksSimilar && !(barrack.level === barracksQueue[0].level && boostedLikeFirst)) {
                    isAllBarracksSimilar = false;
                }

                barracksNums.push(barrack.num);

                totalBarracksSpace += barrack.maxSpace;
            }
        });

        isSuitedForEqual = (isSuitedForEqual && totalBarracksSpace >= totalUnitsSpace);

        var stopDistribution = false;

        while (unitsDistribution.length) {
            var kit = unitsDistribution.shift();
            var kitIndex = kit[0];
            var kitQuantity = kit[1];
            var kitLevel = kit[2];
            var kitTime = kit[3];
            var kitSpace = kit[4];

            if (isSuitedForEqual) {
                var quantityPerBarrack = kitQuantity / activeCount;
                var timePerBarrack = quantityPerBarrack * kitTime;
                var spacePerBarrack = quantityPerBarrack * kitSpace;

                barracksQueue.forEach(function(barrack) {
                    if (barrack.level !== 0) {
                        barrack.units[kitIndex] = quantityPerBarrack;
                        barrack.time += timePerBarrack;
                        barrack.space += spacePerBarrack;
                    }
                });
            } else {
                var barrack = null;
                while (kitQuantity--) {
                    var isGetBarrack = true;
                    if (barrack) {
                        var newTime = barrack.getActualTime() + kitTime;
                        var newSpace = barrack.space + kitSpace;
                        if (kitSpace === 1 && newTime <= avgTime && newSpace <= barrack.maxSpace) {
                            isGetBarrack = false;
                        }
                    }

                    if (isGetBarrack) {
                        barrack = getSuitableBarrack(
                            barracksQueue,
                            kitLevel,
                            kitSpace,
                            kitTime,
                            avgTime
                        );
                    }

                    if (barrack === null) {
                        stopDistribution = true;
                        break;
                    }

                    if (barrack.units[kitIndex]) {
                        barrack.units[kitIndex]++;
                    } else {
                        barrack.units[kitIndex] = 1;
                    }

                    barrack.time += kitTime;
                    barrack.space += kitSpace;
                }
            }
        }

        if (!stopDistribution && isAllBarracksSimilar && !isSuitedForEqual) {
            barracksQueue.sort(function(a, b) {
                return b.getActualTime() - a.getActualTime();
            });
            barracksQueue.forEach(function(barrack, index) {
                if (barrack.level !== 0) {
                    barrack.num = barracksNums[index];
                }
            });
        }

        return !stopDistribution;
    };

    var calculateItems = function(type, params) {
        var levelValue;
        if (type === 'spells') {
            levelValue = params.savedData.get('spellFactoryLevel');
        } else {
            var levels = [];
            var i = 0;
            while (++i <= barracksInfo[type].data.count) {
                var level = params.savedData.get(barracksInfo[type].data.prefix + '-levels-' + i);
                if (i === 1 && barracksInfo[type].data.firstRequired) {
                    level += 1;
                }
                levels.push(level);
            }
            levelValue = Math.max.apply(null, levels);
        }

        var typeResult = {
            'capLevel': params.capLevel,
            'levelValue': levelValue,
            'objects': []
        };

        var totalCost = 0;
        var subtractedCost = 0;
        var totalSpace = 0;
        var totalTime = 0;
        var maxUnitTime = 0;
        var distribution = [];

        var tsIndex = -1; // ts - types sorted
        var tsLength = typesSortedLevel[type].length;
        while (++tsIndex < tsLength) {
            var objectResult = {};

            var value = typesSortedLevel[type][tsIndex];
            if (value[3] > levelValue) {
                continue;
            }

            var name = value[5];

            var quantity = params.savedData.get(name, 0);
            var levelIndex = params.savedData.get(name + '-level');
            var costPerItem = value[1][levelIndex];
            var summaryCost = (costPerItem * quantity);

            objectResult.name = name;
            objectResult.summaryCost = summaryCost;
            objectResult.level = levelIndex + 1;
            objectResult.minBarrackLevel = value[3];

            totalCost += summaryCost;

            totalSpace += (value[2] * quantity);
            if (type === 'spells') {
                totalTime += (value[0] * quantity);

                objectResult.quantity = quantity;
            } else {
                var subtractQuantity = 0;
                if (params.current) {
                    subtractQuantity = parseInt(dom.id(name + '-subtract').value, 10) || 0;
                }

                if (subtractQuantity) {
                    events.trigger('goal', {
                        'id': 'SUBTRACT'
                    }, true);
                }

                var totalQuantity = quantity - subtractQuantity;
                if (totalQuantity < 0) {
                    totalQuantity = 0;
                }
                if (totalQuantity > 0) {
                    distribution.push([
                        tsIndex,
                        quantity - subtractQuantity,
                        value[3], // level
                        value[0], // time
                        value[2] // space
                    ]);
                    maxUnitTime = Math.max(maxUnitTime, value[0]);
                    totalTime += (value[0] * totalQuantity);
                }

                subtractedCost += (costPerItem * totalQuantity);

                objectResult.quantity = totalQuantity;
            }

            typeResult.objects.push(objectResult);
        }
        typeResult.typesSortedLevel = typesSortedLevel[type];

        typeResult.totalCost = totalCost;
        typeResult.totalSpace = totalSpace;

        if (type === 'spells') {
            typeResult.totalTime = totalTime;
        } else {
            var barracksQueue = levels.map(function(level, index) {
                var num = index + 1;

                var isBoosted = false;
                if (params.current) {
                    isBoosted = localStorage.getItem(barracksInfo[type].data.prefix + '-boosted-' + num) === 'yes';
                }

                return {
                    'num': num,
                    'time': 0,
                    'space': 0,
                    'maxSpace': barracksInfo[type].data.queue[level],
                    'units': {},
                    'level': level,
                    'isBoosted': isBoosted,
                    'getActualTime': function() {
                        if (this.isBoosted) {
                            return Math.floor(this.time / 4);
                        }

                        return this.time;
                    }
                };
            });

            var boostedCount = barracksQueue.filter(function(barrack) {
                return barrack.isBoosted === true;
            }).length;

            if (boostedCount) {
                maxUnitTime = Math.ceil(maxUnitTime / 4);
            }

            var activeCount = barracksQueue.filter(function(barrack) {
                return barrack.level > 0;
            }).length;
            var virtualBarracksCount = activeCount + (boostedCount * 4);
            var avgTime = Math.max(Math.ceil(totalTime / virtualBarracksCount), maxUnitTime);

            typeResult.fillSuccess = fillBarracks(barracksQueue, distribution, avgTime, activeCount);
            typeResult.barracksQueue = barracksQueue;
            typeResult.subtractedCost = subtractedCost;
        }

        return typeResult;
    };

    var calculate = function(params) {
        var result = {
            'params': params
        };

        result.armyCampsSpace = params.savedData.get('armyCamps');

        result.units = calculateItems('units', {
            'capLevel': barracksInfo.units.data.maxLevel,
            'savedData': params.savedData,
            'current': params.current
        });

        result.dark = calculateItems('dark', {
            'capLevel': barracksInfo.dark.data.maxLevel,
            'savedData': params.savedData,
            'current': params.current
        });

        result.spells = calculateItems('spells', {
            'capLevel': spellFactory.max,
            'savedData': params.savedData
        });

        return result;
    };

    return calculate;
});

part(['events', 'dom'], function(events, dom){

    'use strict';

    var getTopPosition = function(el) {
        var position = 0;
        do {
            position += el.offsetTop;
        } while (el = el.offsetParent);

        return position;
    };

    var menuWrapperEl = dom.id('menu-wrapper');
    var menuEl = dom.id('menu');
    var menuTopPosition = getTopPosition(menuEl);

    var menuElHeight = menuEl.offsetHeight;
    menuWrapperEl.style.height = menuElHeight + 'px';

    var globalScrollOffset = 15;

    if (!window.mkIsMobile) {
        globalScrollOffset += menuElHeight;

        dom.listen(window, ['scroll'], function() {
            dom.toggleClass(menuEl, 'menu_fixed', (window.pageYOffset >= menuTopPosition));
        });
    }

    var smoothScroll = function(el) {
        var currentScrollTop = window.pageYOffset;
        var elScrollTop = getTopPosition(el) - globalScrollOffset;

        var toTop = (elScrollTop < currentScrollTop);
        var diff = (toTop ? (currentScrollTop - elScrollTop) : (elScrollTop - currentScrollTop));

        var duration = 100 + (diff / 20);
        var delay = 16;
        var step = Math.round(diff / (duration / delay));

        (function scrollIteration() {
            setTimeout(function() {
                if (toTop) {
                    currentScrollTop -= step;
                    if (currentScrollTop < elScrollTop) {
                        currentScrollTop = elScrollTop;
                    }
                } else {
                    currentScrollTop += step;
                    if (currentScrollTop > elScrollTop) {
                        currentScrollTop = elScrollTop;
                    }
                }

                window.scrollTo(window.pageXOffset, currentScrollTop);

                if (currentScrollTop !== elScrollTop) {
                    scrollIteration();
                }
            }, delay);
        }());
    };

    events.listen('scrollTo', smoothScroll);

    dom.find('.js-anchor').listen(['universalClick'], function(e) {
        smoothScroll(dom.id(e.currentTarget.getAttribute('data-for')));
    });

});

part([
    'savedData',
    'types',
    'events',
    'dom',
    'barracks',
    'common',
    'calculate'
], function(savedData, types, events, dom, barracks, common, calculate) {

    'use strict';

    var domUpdater = (function() {
        var real = {};
        var proposed = [];

        return {
            'add': function(id, type, content) {
                proposed.push([id, type, content]);
            },
            'commit': function() {
                while (proposed.length) {
                    var item = proposed.shift();
                    var id = item[0];
                    var type = item[1];
                    var content = item[3];

                    if (!real[id]) {
                        real[id] = {
                            'el': dom.id(id)
                        };
                    }

                    if (real[id].type !== type && real[id].content !== content) {
                        real[id].type = type;
                        real[id].content = content;
                        if (type === 'text') {
                            real[id].el.textContent = content;
                        } else {
                            real[id].el.innerHTML = content;
                        }
                    }
                }
            }
        };
    }());

    var debounce = function(fn, delay) {
        var timer;
        return function() {
            var context = this;
            var args = arguments;
            clearTimeout(timer);
            timer = setTimeout(function() {
                fn.apply(context, args);
            }, delay);
        };
    };

    var setQuantityAndSpace = function(maxSpace, totalSpace, type) {
        var spaceDiff = maxSpace - totalSpace;
        if (spaceDiff < 0) {
            spaceDiff = '<span class="limit-exceeded">' + spaceDiff + '</span>';
        }
        dom.id(type + '-quantity').innerHTML = '(' + spaceDiff + ' free)';

        var space = totalSpace;
        if (totalSpace > maxSpace) {
            space = '<span class="limit-exceeded">' + totalSpace + '</span>';
        }
        space = space + ' / ' + (type === 'units' ? '': maxSpace);
        dom.id(type + '-space').innerHTML = space;

    };

    var populateDistribution = function(result, type) {
        var times = [];
        if (result[type].fillSuccess) {
            dom.id(type + '-barracks-exceeded').style.display = 'none';
            var maxTime = 0;
            var maxNum = 1;

            while (result[type].barracksQueue.length) {
                var barrack = result[type].barracksQueue.shift();

                for (var unitIndex in barrack.units) {
                    if (barrack.units[unitIndex] > 0) {
                        dom.id(
                            'quantity-' +
                            result[type].typesSortedLevel[unitIndex][5] +
                            '-' +
                            barrack.num
                        ).textContent = '×' + barrack.units[unitIndex];
                    }
                }

                var actualTime = barrack.getActualTime();
                if (actualTime > maxTime) {
                    maxTime = actualTime;
                    maxNum = parseInt(barrack.num, 10);
                }

                var time = (actualTime ? common.getFormattedTime(actualTime) : '');
                if (barrack.isBoosted) {
                    time = '<span class="boosted">' + time + '</span>';
                }
                times[barrack.num] = time;

                var spaceData = '';
                if (barrack.maxSpace !== 0) {
                    spaceData = barrack.space + ' / ';
                }
                dom.id(type + '-barrack-space-' + barrack.num).textContent = spaceData;
            }
            times.forEach(function(time, num) {
                var barrackEl = dom.id(type + '-time-barrack-' + num);
                if (num === maxNum) {
                    time = '<span class="result">' + time + '</span>';
                }
                barrackEl.innerHTML = time;
            });
        } else {
            dom.id(type + '-barracks-exceeded').style.display = '';
            var spaces = [];
            var sumSpace = 0;
            while (result[type].barracksQueue.length) {
                var barrack = result[type].barracksQueue.shift();
                dom.id(type + '-time-barrack-' + barrack.num).textContent = '';

                spaces[barrack.num] = barrack.space;
                sumSpace += barrack.space;
            }

            var firstIteration = true;
            spaces.forEach(function(space, num) {
                var barrackSpaceEl = dom.id(type + '-barrack-space-' + num);
                if (space === 0) {
                    barrackSpaceEl.textContent = '';
                } else {
                    if (firstIteration) {
                        space += result[type].totalSpace - sumSpace;
                        barrackSpaceEl.innerHTML = '<span class="limit-exceeded result">' + space + '</span> / ';

                        firstIteration = false;
                    } else {
                        barrackSpaceEl.textContent = space + ' / ';
                    }
                }
            });
        }
    };

    var renderDistribution = debounce(function(result) {
        ['units', 'dark'].forEach(function(type) {
            if (result[type]) {
                populateDistribution(result, type);

                var subtractedCostEl = dom.id(type + '-subtracted-cost');
                if (result[type].subtractedCost === result[type].totalCost) {
                    subtractedCostEl.textContent = '';
                } else {
                    subtractedCostEl.innerHTML = '− ' +
                                                 common.numberFormat(result[type].totalCost - result[type].subtractedCost) +
                                                 ' = <span class="result">' +
                                                 common.numberFormat(result[type].subtractedCost) + '</span>';
                }
            }
        });
    }, 200);

    var darkObjects = dom.find('.js-dark-object');
    var spellsObjects = dom.find('.js-spells-object');
    events.listen('calculateDone', function(result) {
        if (result.params.type === 'all' || result.params.type === 'barrack-dark') {
            darkObjects.toggleClass('setting-mode-empty', (result.dark.levelValue === 0));
        }

        if (result.params.type === 'all' || result.params.type !== 'spells') {
            var togetherSpace = result.units.totalSpace + result.dark.totalSpace;
            setQuantityAndSpace(result.armyCampsSpace, togetherSpace, 'units');
            setQuantityAndSpace(result.armyCampsSpace, togetherSpace, 'dark');
        }

        if (result.params.type === 'all' || result.params.type === 'spells') {
            setQuantityAndSpace(result.spells.levelValue, result.spells.totalSpace, 'spells');

            if (result.spells.totalTime > 0) {
                if (localStorage.getItem('spell-factory-boosted') === 'yes') {
                    dom.id('spells-time').innerHTML = '<span class="boosted">' +
                                                      common.getFormattedTime(
                                                          Math.floor(result.spells.totalTime / 4),
                                                          true
                                                      ) +
                                                      '</span>';
                } else{
                    dom.id('spells-time').textContent = common.getFormattedTime(result.spells.totalTime, true);
                }
            }

            spellsObjects.toggleClass('setting-mode-empty', (result.spells.levelValue === 0));
        }

        ['units', 'dark', 'spells'].forEach(function(type) {
            if (result[type]) {
                var clIndex = result[type].capLevel + 1;
                while (--clIndex > 0) {
                    dom.id(
                        type +
                        '-building-level-' +
                        clIndex
                    ).style.display = (clIndex > result[type].levelValue ? 'none' : '');
                }

                result[type].objects.forEach(function(objectResult) {
                    dom.id(objectResult.name + '-summary').textContent = (
                        objectResult.summaryCost ?
                        common.numberFormat(objectResult.summaryCost) :
                        ''
                    );

                    if (type !== 'spells') {
                        var mcIndex = 0; // mc - max count
                        var mcLength = barracks[type].data.count;
                        while (++mcIndex <= mcLength) {
                            dom.id('quantity-' + objectResult.name + '-' + mcIndex).textContent = '';
                        }
                    }
                });

                dom.id(type + '-cost').textContent = common.numberFormat(result[type].totalCost);
            }
        });

        if (result.params.type === 'all' || result.params.type !== 'spells') {
            renderDistribution(result);
        }
    });

    events.listen('calculate', function(params) {
        params.savedData = savedData.current;
        params.current = true;

        events.trigger('calculateDone', calculate(params));

        savedData.save();
    });

});
part([
    'savedData',
    'events',
    'dom',
    'calculate',
    'common'
], function(savedData, events, dom, calculate, common) {

    'use strict';

    var barracksAnchor = dom.id('barracks-anchor');
    var loadSaved = function(e) {
        events.trigger('goal', {
            'id': 'LOAD_SAVED'
        }, true);

        var dataToLoad = common.objectCopy(
            savedData.all[e.currentTarget.getAttribute('data-num')].getAll()
        );
        savedData.current = new common.Dict(dataToLoad);

        events.trigger('updateFromSaved');
        events.trigger('calculate', {
            'type': 'all',
            'computeAll': true
        });

        events.trigger('loaded');
        events.trigger('scrollTo', barracksAnchor);
    };

    var savedListItemTemplate = new Hogan.Template(function(c,p,i){var _=this;_.b(i=i||"");_.b("<div class=\"saved-list__item\" id=\"saved-list-item-");_.b(_.v(_.f("index",c,p,0)));_.b("\">");_.b("\n" + i);if(_.s(_.f("hasCapacity",c,p,1),c,p,0,82,196,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("        <div class=\"saved-list__item-capacity\">");_.b("\n" + i);_.b("            ");_.b(_.v(_.f("totalCapacity",c,p,0)));_.b(" / ");_.b(_.v(_.f("armyCamps",c,p,0)));_.b("\n" + i);_.b("        </div>");_.b("\n");});c.pop();}_.b("\n" + i);if(_.s(_.f("units",c,p,1),c,p,0,228,653,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("        <table class=\"saved-list__table\">");_.b("\n" + i);if(_.s(_.f("items",c,p,1),c,p,0,293,445,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("                <tr>");_.b("\n" + i);_.b("                    <td class=\"number\">×");_.b(_.v(_.f("quantity",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                    <td>");_.b(_.v(_.f("name",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                </tr>");_.b("\n");});c.pop();}_.b("        </table>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-time\">");_.b(_.v(_.f("time",c,p,0)));_.b("</div>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-cost\">");_.b("\n" + i);_.b("            <span class=\"cost cost_elixir\">");_.b(_.v(_.f("cost",c,p,0)));_.b("</span>");_.b("\n" + i);_.b("        </div>");_.b("\n");});c.pop();}_.b("\n" + i);if(_.s(_.f("dark",c,p,1),c,p,0,678,1108,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("        <table class=\"saved-list__table\">");_.b("\n" + i);if(_.s(_.f("items",c,p,1),c,p,0,743,895,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("                <tr>");_.b("\n" + i);_.b("                    <td class=\"number\">×");_.b(_.v(_.f("quantity",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                    <td>");_.b(_.v(_.f("name",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                </tr>");_.b("\n");});c.pop();}_.b("        </table>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-time\">");_.b(_.v(_.f("time",c,p,0)));_.b("</div>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-cost\">");_.b("\n" + i);_.b("            <span class=\"cost cost_dark-elixir\">");_.b(_.v(_.f("cost",c,p,0)));_.b("</span>");_.b("\n" + i);_.b("        </div>");_.b("\n");});c.pop();}_.b("\n" + i);if(_.s(_.f("hasSpells",c,p,1),c,p,0,1137,1695,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("        <div class=\"saved-list__item-capacity\">");_.b("\n" + i);_.b("            ");_.b(_.v(_.f("spellsCapacity",c,p,0)));_.b(" / ");_.b(_.v(_.f("spellsFactoryLevel",c,p,0)));_.b("\n" + i);_.b("        </div>");_.b("\n" + i);_.b("        <table class=\"saved-list__table\">");_.b("\n" + i);if(_.s(_.f("spells",c,p,1),c,p,0,1322,1474,"{{ }}")){_.rs(c,p,function(c,p,_){_.b("                <tr>");_.b("\n" + i);_.b("                    <td class=\"number\">×");_.b(_.v(_.f("quantity",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                    <td>");_.b(_.v(_.f("name",c,p,0)));_.b("</td>");_.b("\n" + i);_.b("                </tr>");_.b("\n");});c.pop();}_.b("        </table>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-time\">");_.b(_.v(_.f("spellsTime",c,p,0)));_.b("</div>");_.b("\n" + i);_.b("        <div class=\"saved-list__item-cost\">");_.b("\n" + i);_.b("            <span class=\"cost cost_elixir\">");_.b(_.v(_.f("spellsCost",c,p,0)));_.b("</span>");_.b("\n" + i);_.b("        </div>");_.b("\n");});c.pop();}_.b("\n" + i);_.b("    <div class=\"saved-list__actions\">");_.b("\n" + i);_.b("        <button class=\"button js-saved-load\"");_.b("\n" + i);_.b("              data-num=\"");_.b(_.v(_.f("index",c,p,0)));_.b("\"");_.b("\n" + i);_.b("              tabindex=\"");_.b(_.v(_.f("tabIndexLoad",c,p,0)));_.b("\"");_.b("\n" + i);_.b("              title=\"Current composition will be lost\">");_.b("\n" + i);_.b("            Load");_.b("\n" + i);_.b("        </button>");_.b("\n" + i);_.b("        <button class=\"button button_after js-saved-delete\"");_.b("\n" + i);_.b("              data-num=\"");_.b(_.v(_.f("index",c,p,0)));_.b("\"");_.b("\n" + i);_.b("              tabindex=\"");_.b(_.v(_.f("tabIndexDelete",c,p,0)));_.b("\">");_.b("\n" + i);_.b("            Delete");_.b("\n" + i);_.b("        </button>");_.b("\n" + i);_.b("    </div>");_.b("\n" + i);_.b("</div>");return _.fl();;});
    var savedListCreateItems = function() {
        var content = [];
        savedData.all.forEach(function(data, index) {
            if (index === 0) {
                return;
            }
            var templateVars = {
                'index': index,
                'tabIndexLoad': index + 3000 + 1,
                'tabIndexDelete': index + 3000 + 2
            };

            var result = calculate({
                'type': 'all',
                'current': false,
                'savedData': data
            });

            ['units', 'dark'].forEach(function(type) {
                if (result[type]) {
                    var items = [];
                    result[type].objects.forEach(function(objectResult) {
                        if (objectResult.quantity > 0) {
                            items.push({
                                'name': common.convertToTitle(objectResult.name),
                                'quantity': objectResult.quantity,
                                'minBarrackLevel': objectResult.minBarrackLevel
                            });
                        }
                    });

                    if (items.length) {
                        var productionTime;
                        if (result[type].fillSuccess) {
                            productionTime = Math.max.apply(null, result[type].barracksQueue.map(function(barrack) {
                                return barrack.time;
                            }));
                            productionTime = common.getFormattedTime(productionTime);
                        }

                        templateVars[type] = {
                            'items': items.sort(function(a, b) {
                                return a.minBarrackLevel > b.minBarrackLevel;
                            }),
                            'cost': common.numberFormat(result[type].totalCost),
                            'time': productionTime
                        };
                    }
                }

                var togetherSpace = result.units.totalSpace + result.dark.totalSpace;
                if (togetherSpace > 0) {
                    templateVars.hasCapacity = {
                        'totalCapacity': togetherSpace,
                        'armyCamps': result.armyCampsSpace
                    };
                }
            });

            if (result.spells) {
                var spells = [];

                result.spells.objects.forEach(function(objectResult) {
                    if (objectResult.quantity > 0) {
                        spells.push({
                            'name': common.convertToTitle(objectResult.name),
                            'quantity': objectResult.quantity
                        });
                    }
                });

                if (spells.length) {
                    templateVars.hasSpells = {
                        'spells': spells,
                        'spellsCost': common.numberFormat(result.spells.totalCost),
                        'spellsCapacity': result.spells.totalSpace,
                        'spellsFactoryLevel': result.spells.levelValue,
                        'spellsTime': common.getFormattedTime(result.spells.totalTime, true)
                    };
                }
            }

            content.push(savedListItemTemplate.render(templateVars));
        });

        var savedListContent = dom.id('saved-list-content');
        savedListContent.innerHTML = content.join('');

        dom.find('.js-saved-load', savedListContent).listen(['universalClick'], loadSaved);

        var deleteSaved = function(e) {
            events.trigger('goal', {
                'id': 'DELETE_SAVED'
            }, true);
            savedData.all.splice(e.currentTarget.getAttribute('data-num'), 1);
            savedData.save();
            savedListCreateItems();
        };

        dom.find('.js-saved-delete', savedListContent).listen(['universalClick'], deleteSaved);
    };

    var alreadySavedMessage = common.infoMessage('already-saved', true);
    var savedCalculationAnchor = dom.id('saved-anchor');

    var save = function(params) {
        var showMessage = true;
        if (params && params.showMessage === false) {
            showMessage = false;
        }
        alreadySavedMessage.hide();

        if (showMessage) {
            events.trigger('goal', {
                'id': 'SAVE_COMPOSITION'
            }, true);
        }

        var sourceData = savedData.storage.load(true);
        if (sourceData[0]) {
            var currentJSON = JSON.stringify(sourceData[0]);
            var sdIndex = 0;
            var sdLength = sourceData.length;
            while (++sdIndex < sdLength) {
                var savedJSON = JSON.stringify(sourceData[sdIndex]);
                if (currentJSON === savedJSON) {
                    if (showMessage) {
                        alreadySavedMessage.show();
                    }
                    return;
                }
            }

            var dataToSave = common.objectCopy(savedData.current.getAll());
            savedData.all.push(new common.Dict(dataToSave));
            savedData.save();
            savedListCreateItems();
        }
    };

    events.listen('save', save);

    var saveHandler = function(e) {
        if (e.currentTarget.getAttribute('data-scroll') === 'yes') {
            events.trigger('scrollTo', savedCalculationAnchor);
        }

        save();
    };

    dom.find('.js-save-composition').listen(['universalClick'], saveHandler);

    savedListCreateItems();

    var savedCount = savedData.all.length;
    events.trigger('goal', {
        'id': 'SAVED_COMPOSITIONS',
        'params': {
            'count': 'sc' + (savedCount ? savedCount - 1 : 0)
        }
    }, true);

});
part(['savedData', 'events', 'dom', 'common', 'converter'],
     function(savedData, events, dom, common, converter) {

    'use strict';

    var urlParam;
    var oldUrlParam;

    if (location.search.indexOf('?l=') !== -1) {
        urlParam = true;
        oldUrlParam = true;
    } else if (location.search.indexOf('?s=') !== -1) {
        urlParam = true;
    }

    if (urlParam) {
        var urlData = location.search.substr(3);
        urlData = decodeURIComponent(urlData);
        var goalParams = {};
        goalParams[oldUrlParam ? 'l' : 's'] = urlData;
        events.trigger('goal', {
            'id': 'SHARE',
            'params': goalParams
        }, true);
        urlData = urlData.replace(/[a-z]/g, ',');
        urlData = urlData.replace(/,(?=,)/g, ',0');
        if (urlData[0] === ',') {
            urlData = '0' + urlData;
        }
        urlData = '[' + urlData + ']';
        try {
            urlData = JSON.parse(urlData);
        } catch (ignore) {
            urlData = false;
        }

        history.replaceState({}, '', location.protocol + '//' + location.host + location.pathname);

        if (urlData) {
            if (oldUrlParam) {
                converter.oldConvert3to4(urlData);
            }

            urlData = savedData.dataArrayToObject(urlData);

            events.trigger('save', {'showMessage': false}, true);
            savedData.current = new common.Dict(urlData);

            var viewSharedMessage = common.infoMessage('view-shared');
            viewSharedMessage.show();

            events.listen('loaded', function() {
                viewSharedMessage.hide();
            });
        }
    }

    var shareTwitter = dom.id('share-twitter');
    var shareFacebook = dom.id('share-facebook');
    var permalink = dom.id('share-permalink');
    dom.selectOnFocus(permalink);
    var makePermalink = function() {
        var url = 'http://mkln.ru/clash-of-clans/?s=';
        var data = common.objectCopy(savedData.current.getAll());
        data.settingsMode = 1;
        data = savedData.dataObjectToArray(data);
        data = JSON.stringify(data);
        data = data.replace(/\b(?:null|0)\b/g, '');
        data = data.substr(1, data.length - 2);
        data = data.replace(/,+$/, '');

        // 97 - a, 122 - z
        var charCode = 97;
        data = data.replace(/,/g, function() {
            var letter = String.fromCharCode(charCode);
            if (charCode === 122) {
                charCode = 97;
            } else {
                charCode++;
            }
            return letter;
        });
        permalink.value = url + data;

        var shareUrl = encodeURIComponent(url + data);
        shareTwitter.setAttribute(
            'href',
            'https://twitter.com/share?url=' + shareUrl + '&via=ClashCalc&hashtags=ClashOfClans'
        );
        shareFacebook.setAttribute(
            'href',
            'https://www.facebook.com/sharer/sharer.php?u=' + shareUrl
        );
    };

    var text = dom.id('share-text');
    dom.selectOnFocus(text);

    var superscriptNumbers = {
        '1': '¹',
        '2': '²',
        '3': '³',
        '4': '⁴',
        '5': '⁵',
        '6': '⁶',
        '7': '⁷',
        '8': '⁸',
        '9': '⁹'
    };

    var currencies = {
        'units': 'Elixir',
        'dark': 'Dark Elixir',
        'spells': 'Elixir'
    };

    var makeShareText = function(result) {
        var data = savedData.current.getAll();
        var output = [];
        var prices = [];

        ['units', 'dark', 'spells'].forEach(function(type) {
            if (result[type]) {
                result[type].objects.forEach(function(objectResult) {
                    if (objectResult.summaryCost > 0) {
                        output.push(
                            common.convertToTitle(objectResult.name) +
                            superscriptNumbers[objectResult.level] +
                            ' ×' +
                            objectResult.summaryCost
                        );
                    }
                });
                prices.push(result[type].totalCost + ' ' + currencies[type]);
            }
        });

        if (output.length) {
            text.value = output.join(', ') + ' — ' + prices.join(', ');
            return true;
        }
        return false;
    };

    var $shareObjects = dom.find('.js-share');
    var placeShareContent = function(result) {
        var display = '';
        if (makeShareText(result)) {
            makePermalink();
        } else {
            display = 'none';
        }
        $shareObjects.iterate(function(el) {
            el.style.display = display;
        });
    };

    events.listen('calculateDone', placeShareContent);

});

part(['savedData', 'types', 'events', 'dom'], function(savedData, types, events, dom) {
    'use strict';

    /**
     * LEVELS
     */

    var updateSavedData = function(el) {
        savedData.current.set(el.getAttribute('id'), el.selectedIndex);
    };

    var updateEl = function(el, index) {
        el.options[index].selected = true;
    };

    var notifyChange = function(el) {
        events.trigger('elChange', el, true);
    };

    events.listen('updateFromSaved', function() {
        types.iterateTree(function(type, name) {
            var levelId = name + '-level';
            var levelEl = dom.id(levelId);
            updateEl(levelEl, savedData.current.get(levelId, levelEl.selectedIndex));
            updateSavedData(levelEl);
            notifyChange(levelEl);
        });
    });

    events.listen('updateSetting', function(params) {
        types.iterateTree(function(type, name, properties) {
            var levelEl = dom.id(name + '-level');

            updateEl(levelEl, params.helper(params.th, properties[4]) - 1);
            updateSavedData(levelEl);
            notifyChange(levelEl);
        });
    });

    dom.listen(document.body, ['change'], function(e) {
        if (e.target.getAttribute('data-component') === 'level') {
            updateSavedData(e.target);
            notifyChange(e.target);

            events.trigger('calculate', {
                'type': e.target.getAttribute('data-type')
            });
        }
    });


    /**
     * QUANTITY / SUBTRACT
     */

    var valueChangeHandler = function(params) {
        var component = params.el.getAttribute('data-component');
        if (['subtract', 'quantity'].indexOf(component) !== -1) {
            var value = parseInt(params.el.value, 10) || 0;
            if (value < 0) {
                value = 0;
            }
            params.el.value = value || '';

            if (component === 'quantity') {
                savedData.current.set(params.el.getAttribute('id'), value);
            }

            if (params.calculate) {
                events.trigger('calculate', {
                    'type': params.el.getAttribute('data-type')
                });
            }
        }
    };

    dom.listen(document.body, ['input'], function(e) {
        valueChangeHandler({
            'el': e.target,
            'calculate': true
        });
    });

    events.listen('valueChange', valueChangeHandler);

    events.listen('updateFromSaved', function() {
        types.iterateTree(function(type, name) {
            dom.id(name).value = savedData.current.get(name) || '';
        });
    });


    /**
     * INIT
     */

    events.trigger('updateFromSaved');

    events.trigger('calculate', {
        'type': 'all',
        'computeAll': true
    }, true);

});

part(['events', 'dom'], function(events, dom) {

    'use strict';

    dom.find('.js-setting').iterate(function(el) {
        var placeholderEl = document.createElement('span');
        placeholderEl.className = 'text-middle setting-mode-not-part';

        dom.insertBefore(el, placeholderEl);

        el.classList.add('setting-mode-part');
    });

    events.listen('elChange', function(el) {
        el.nextSibling.textContent = el.options[el.selectedIndex].textContent;
    });

    var toggleModeEl = dom.id('settings-toggle-mode');
    var toggleSettings = function() {
        dom.toggleClass(document.documentElement, 'setting-mode-disabled', !toggleModeEl.checked);
        dom.toggleClass(document.documentElement, 'setting-mode-enabled', toggleModeEl.checked);

        localStorage.setItem('settingsMode', (toggleModeEl.checked ? 'on' : 'off'));
    };

    dom.listen(toggleModeEl, ['change'], function() {
        toggleSettings();
        events.trigger('goal', {'id': 'SETTINGS_SWITCH'}, true);
    });

    var settingsModeValue = localStorage.getItem('settingsMode');
    if (settingsModeValue !== 'off') {
        settingsModeValue = 'on';
    }
    toggleModeEl.checked = (settingsModeValue === 'on');
    toggleSettings();

    events.trigger('goal', {
        'id': 'SETTINGS_INIT',
        'params': {
            'mode': settingsModeValue
        }
    }, true);

    var getSettingValue = function(selectedTh, allTh) {
        while (!allTh.hasOwnProperty(selectedTh) && selectedTh > 0) {
            selectedTh--;
        }
        return allTh[selectedTh];
    };

    var setLevels = function(th) {
        events.trigger('goal', {
            'id': 'SETTINGS_TH',
            'params': {
                'level': 'th' + th
            }
        }, true);

        events.trigger('updateSetting', {
            'th': th,
            'helper': getSettingValue
        });

        events.trigger('calculate', {
            'type': 'all',
            'computeAll': true
        });
    };

    dom.find('.js-settings-level').listen(['universalClick'], function(e) {
        setLevels(parseInt(e.currentTarget.textContent, 10));
    });

});

part(['events', 'dom'], function(events, dom) {

    'use strict';

    var spinnerAction = function(targetElement, type) {
        var current = parseInt(targetElement.value, 10);
        if (type === '+') {
            if (isNaN(current)) {
                targetElement.value = 1;
            } else {
                targetElement.value = current + 1;
            }
        } else {
            if (isNaN(current) || current < 2) {
                targetElement.value = '';
            } else {
                targetElement.value = current - 1;
            }
        }
        events.trigger('valueChange', {
            'el': targetElement,
            'calculate': true
        });
    };

    var currentSpinner = {
        'target': null,
        'click': false,
        'firstTimeout': null,
        'secondTimeout': null,
        'x': 0,
        'y': 0
    };

    var spinnerEventStart = function(target) {
        currentSpinner.target = target;
        currentSpinner.click = true;
        currentSpinner.firstTimeout = setTimeout(function() {
            currentSpinner.click = false;
            (function fakeInterval() {
                currentSpinner.secondTimeout = setTimeout(function() {
                    spinnerAction(currentSpinner.target.spinnerTarget, currentSpinner.target.textContent);
                    fakeInterval();
                }, 100);
            }());
        }, 500);
    };

    var spinnerEventMoveStop = function(diffX, diffY) {
        if (diffX > 10 || diffY > 10) {
            currentSpinner.target = null;
            currentSpinner.click = false;
            clearTimeout(currentSpinner.firstTimeout);
            clearTimeout(currentSpinner.secondTimeout);
        }
    };

    var spinnerEventStop = function() {
        if (currentSpinner.target) {
            if (currentSpinner.click) {
                spinnerAction(currentSpinner.target.spinnerTarget, currentSpinner.target.textContent);
            }
            currentSpinner.target = null;
            clearTimeout(currentSpinner.firstTimeout);
            clearTimeout(currentSpinner.secondTimeout);
        }
    };

    var touchSupported = ('ontouchstart' in window);

    if (!window.mkIsMobile || !touchSupported) {
        window.addEventListener('mousemove', function(e) {
            if (currentSpinner.target) {
                var diffX = Math.abs(e.screenX - currentSpinner.x);
                var diffY = Math.abs(e.screenY - currentSpinner.y);
                spinnerEventMoveStop(diffX, diffY);
            }
        }, false);

        window.addEventListener('mouseup', function() {
            spinnerEventStop();
        }, false);
    }

    var spinnerEvents = function(el) {

        if (touchSupported) {
            var preventTimeStamp = 0;
            el.addEventListener('touchstart', function(e) {
                e.stopPropagation();

                if (e.timeStamp - preventTimeStamp < 500) {
                    e.preventDefault();
                }
                preventTimeStamp = e.timeStamp;

                currentSpinner.x = e.touches[0].screenX;
                currentSpinner.y = e.touches[0].screenY;

                spinnerEventStart(e.currentTarget);
            }, false);

            el.addEventListener('touchmove', function(e) {
                e.stopPropagation();

                if (currentSpinner.target) {
                    var diffX = Math.abs(e.touches[0].screenX - currentSpinner.x) / 2;
                    var diffY = Math.abs(e.touches[0].screenY - currentSpinner.y) / 2;
                    spinnerEventMoveStop(diffX, diffY);
                }
            }, false);

            el.addEventListener('touchcancel', function(e) {
                e.stopPropagation();
                spinnerEventStop();
            }, false);

            el.addEventListener('touchend', function(e) {
                e.stopPropagation();
                spinnerEventStop();
            }, false);
        }

        if (!window.mkIsMobile || !touchSupported) {
            el.addEventListener('mousedown', function(e) {
                e.stopPropagation();

                currentSpinner.x = e.screenX;
                currentSpinner.y = e.screenY;
                spinnerEventStart(e.currentTarget);
            }, false);
        }

    };

    var setSpinner = function(type, el) {
        var container = document.createElement('button');
        container.className = 'button button_spinner';
        container.textContent = (type === 'plus' ? '+' : '−');
        container.spinnerTarget = el;

        spinnerEvents(container);

        dom.insertBefore(el, container);
    };

    var spinnerKeyboard = function(e) {
        var code = e.keyCode || e.which;
        if (code === 38) {
            spinnerAction(e.currentTarget, '+');
            e.preventDefault();
        } else if (code === 40) {
            spinnerAction(e.currentTarget, '-');
            e.preventDefault();
        }
    };

    dom.find('.js-number').iterate(function(el) {
        dom.selectOnFocus(el);
        setSpinner('minus', el);
        setSpinner('plus', el);

        dom.listen(el, ['keydown'], spinnerKeyboard);
    });

});
part(['events', 'dom'], function(events, dom) {

    'use strict';

    var resetColumn = function(e) {
        var resetType = e.currentTarget.getAttribute('data-reset-type');
        var scope = e.currentTarget.getAttribute('data-scope');

        dom.find('input[data-component="' + scope + '"][data-type="' + resetType + '"]').iterate(function(el) {
            el.value = '';
            events.trigger('valueChange', {
                'el': el,
                'calculate': false
            });
        });

        events.trigger('calculate', {
            'type': resetType
        });

        events.trigger('goal', {
            'id': 'RESET'
        }, true);
    };

    dom.find('.js-reset').listen(['universalClick'], resetColumn);

});

part(['events', 'dom'], function(events, dom) {

    'use strict';

    dom.find('.js-goal').listen(['universalAndMiddleClick'], function(e) {
        events.trigger('goal', {
            'id': e.currentTarget.getAttribute('data-goal')
        }, true);
    });

    var cache = [];

    window.yandexMetrikaLoadCallback = function(yandexMetrika) {
        events.listen('goal', function(data) {
            if (cache.indexOf(data.id) !== -1) {
                return;
            }
            cache.push(data.id);

            var target = data.id;
            var params = data.params || null;

            yandexMetrika.reachGoal(target, params);
        });
    };

});

</script>

<script>!function(a,e,n,t){(e[n]=e[n]||[]).push(function(){try{e.yaCounter19642528=new Ya.Metrika({id:19642528,trackLinks:!0,accurateTrackBounce:!0}),window.yandexMetrikaLoadCallback&&window.yandexMetrikaLoadCallback(e.yaCounter19642528)}catch(a){}});var c=a.getElementsByTagName(t)[0],r=a.createElement(t);r.async=!0,r.src="//mc.yandex.ru/metrika/watch.js",c.parentNode.insertBefore(r,c)}(document,window,"yandex_metrika_callbacks","script");</script>
<noscript><div><img src="//mc.yandex.ru/watch/19642528" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script>var _gaq=[["_setAccount","UA-37991363-1"],["_trackPageview"]];!function(e,a){var t=e.createElement(a),c=e.getElementsByTagName(a)[0];t.async=!0,t.src="//www.google-analytics.com/ga.js",c.parentNode.insertBefore(t,c)}(document,"script");</script>


</body>
</html>
