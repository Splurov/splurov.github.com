<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta property="fb:admins" content="splurov"/>
    <title>$coc_title</title>
    <link rel="stylesheet" type="text/css" href="../css/design.css"/>
    <link rel="stylesheet" type="text/css" href="css/calculator.css"/>
    <script src="js/favicon.js"></script>
    <link rel="icon" href="/clash-of-clans/i/favicon.png"/>
    $ga_code
</head>
<body>

<h1>$coc_title</h1>

<div class="intro">
    <p>Helps to plan the composition of your army and calculate the cost of the attack in order to remain in plus, after the battle.</p>

    <p>All entered data will be saved in your browser and pre-filled in next time you visit this page.</p>
</div>

<table class="units units_common">
    <tr>
        <td>
            <label for="barracks-levels-1">Barracks Levels</label>
        </td>
        <td>
            <select id="barracks-levels-1" class="field">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-2" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-3" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
            <select id="barracks-levels-4" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected="selected">10</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>
            <label for="army-camps">Army Camps Capacity</label>
        </td>
        <td>
            <input class="js-number field" value="220" id="army-camps" size="4"/>
        </td>
    </tr>

    <tr>
        <td>
            <label for="spell-factory-level">Spell Factory Level</label>
        </td>
        <td>
            <select id="spell-factory-level" class="field">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected="selected">4</option>
            </select>
        </td>
    </tr>
</table>

<table id="units" class="units">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th><span class="cost-elixir">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="units-quantity"></span></th>
            <th><span class="cost-elixir">Total</span></th>
            <th colspan="8">Barracks <span class="limit-exceeded units-quantity" style="display: none;" id="barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td colspan="2" id="barrack-header-1"></td>
            <td colspan="2" id="barrack-header-2"></td>
            <td colspan="2" id="barrack-header-3"></td>
            <td colspan="2" id="barrack-header-4"></td>
        </tr>
    </thead>
    <tbody id="units-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td id="units-space" class="result"></td>
            <td id="units-cost" class="number result"></td>
            <td id="units-time-barrack-1" colspan="2" class="number"></td>
            <td id="units-time-barrack-2" colspan="2" class="number"></td>
            <td id="units-time-barrack-3" colspan="2" class="number"></td>
            <td id="units-time-barrack-4" colspan="2" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="spells" class="units">
    <thead>
        <tr>
            <th>Spell</th>
            <th>Level</th>
            <th><span class="cost-gold">Cost</span></th>
            <th>Quantity <span class="units-quantity" title="Free Capacity" id="spells-quantity"></span></th>
            <th><span class="cost-gold">Total</span></th>
            <th>Time</th>
        </tr>
    </thead>
    <tbody id="spells-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"></td>
            <td id="spells-space" class="result"></td>
            <td id="spells-cost" class="number result"></td>
            <td id="spells-time" class="number result"></td>
        </tr>
    </tfoot>
</table>

<p>
    <span id="save" class="like-button like-button_lonely">Save Calculation</span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<script type="text/x-hogan-template" id="hogan-item-row-template">
    <tr id="{{rowId}}">
        <td>
            <label for="{{id}}">{{title}}</label>
        </td>
        <td>
            <select id="{{levelId}}" class="field">
                {{#levelContent}}
                    <option value="{{value}}">{{text}}</option>
                {{/levelContent}}
            </select>
        </td>
        <td id="{{costId}}" class="number">
        </td>
        <td>
            {{#spells}}
                <select id="{{id}}" class="field">
                    {{#options}}
                        <option value="{{value}}">{{text}}</option>
                    {{/options}}
                </select>
            {{/spells}}
            {{^spells}}
                <input class="js-number field" id="{{id}}" size="4"/>
            {{/spells}}
        </td>
        <td id="{{summaryId}}" class="number">
        </td>
        {{#barracksTimes}}
            <td id="{{barrackQuantityId}}" class="number"></td>
            <td id="{{barrackTimeId}}" class="number"></td>
        {{/barracksTimes}}
        {{^barracksTimes}}
            <td></td>
        {{/barracksTimes}}
    </tr>
</script>

<script type="text/x-hogan-template" id="hogan-saved-list-item-template">
    <div class="saved-list__item" id="saved-list-item-{{index}}">
        {{#hasUnits}}
            <div class="saved-list__item-title"><span class="cost-elixir-small">{{totalCost}}</span>Units</div>
            <table class="saved-list__table">
                {{#units}}
                    <tr>
                        <td class="number">{{quantity}}</td>
                        <td>{{name}}</td>
                        <td class="saved-list__level">{{level}}</td>
                    </tr>
                {{/units}}
            </table>
            <div class="saved-list__item-result">
                {{totalCapacity}}/{{armyCamps}}
            </div>
        {{/hasUnits}}

        {{#hasSpells}}
            <div class="saved-list__item-title saved-list__item-title_next"><span class="cost-gold-small">{{spellsCost}}</span>Spells</div>
            <table class="saved-list__table">
                {{#spells}}
                    <tr>
                        <td class="number">{{quantity}}</td>
                        <td>{{name}}</td>
                        <td class="saved-list__level">{{level}}</td>
                    </tr>
                {{/spells}}
            </table>
            <div class="saved-list__item-result">
                {{spellsCapacity}}/{{spellsFactoryLevel}}
            </div>
        {{/hasSpells}}

        <div class="saved-list__actions">
            <span class="like-button like-button_lonely js-saved-load" data-num="{{index}}" title="Current calculation will be lost">Load</span>
            <span class="like-button like-button_lonely js-saved-delete" data-num="{{index}}">Delete</span>
        </div>
    </div>
</script>

<script src="js/hogan-2.0.0.min.js" data-compress="no"></script>
<script src="js/calculator.js"></script>

<!-- Yandex.Metrika counter -->
<script src="../js/ya-metrika.js"></script>
$ya_metrika_noscript
<!-- /Yandex.Metrika counter -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<h2>Comments</h2>
<p>Feel free to post bugs and feature suggestions.</p>

<div class="fb-comments" data-href="http://mkln.ru/clash-of-clans/" data-width="470" data-num-posts="10"></div>

<h2>Changelog</h2>
<table class="changelog">
    <tr>
        <td>2.0.1</td>
        <td>2 March, 2013</td>
        <td>
            Fixed a bug in which the units were distributed in barracks without accounting maximum barracks queue;<br/>
            Fixed bug with negative number of units.<br/>
        </td>
    </tr>
    <tr>
        <td>2.0</td>
        <td>28 February, 2013</td>
        <td>
            Added distribution of troops between barracks for optimal training speed;<br/>
            The previous values of the maximum level and number of barracks, unfortunately, have not saved;<br/>
            Production Time removed from saved calculations list;<br/>
            Simplified tables layouts.
        </td>
    </tr>
    <tr>
        <td>1.5</td>
        <td>26 February, 2013</td>
        <td>
            Reduced indents and font sizes;<br/>
            The list of saved calculations is always shown;<br/>
            Redesigned saved calculations layout.<br/>
        </td>
    </tr>
    <tr>
        <td>1.4</td>
        <td>17 February, 2013</td>
        <td>
            Added saving of calculations.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.2</td>
        <td>10 February, 2013</td>
        <td>
            Added description of the calculator;<br/>
            Default values changed to maximum allowed in game.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3.1</td>
        <td>9 February, 2013</td>
        <td>
            Added auto-select of text in fields for simplify edit in iOS;<br/>
            Fixed NaN in results and null in fields bug.<br/>
        </td>
    </tr>
    <tr>
        <td>1.3</td>
        <td>8 February, 2013</td>
        <td>
            The title is replaced by the more similar to the contents of the page;<br/>
            Added description for auto-save feature;<br/>
            Added army camps capacity — allows to show free capacity;<br/>
            Added maximum barracks level — allows show/hide unavailable units;<br/>
            Added spells calculation.<br/>
        </td>
    </tr>
    <tr>
        <td>1.2</td>
        <td>6 February, 2013</td>
        <td>
            Added plus/minus buttons;<br/>
            Fixed IE 9+ support;<br/>
            Changed favicon to app store game icon;<br/>
            Added elixir icon to costs;<br/>
            Added intermediate results of the calculations to the units table.<br/>
        </td>
    </tr>
    <tr>
        <td>1.1</td>
        <td>5 February, 2013</td>
        <td>
            Added sixth level for Barbarian, Archer, Giant and Balloon;<br/>
            Fixed Healer 1st level cost;<br/>
            Number of barracks field replaced by the select.<br/>
        </td>
    </tr>
    <tr>
        <td>1.0</td>
        <td>4 February, 2013</td>
        <td>Initial release.</td>
    </tr>
</table>

<h2>To-do</h2>
<div class="todo">
    <p>Production time in saved calculations.</p>
    <p>(?) Gem costs.</p>
    <p>(?) Clan Castle troops.</p>
</div>

<div class="footer">
    Developed by <a href="/en/">Mikhail Kalashnik</a>
</div>

</body>
</html>
