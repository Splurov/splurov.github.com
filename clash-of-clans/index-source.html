<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=900"/>
    {{#web_only}}
    <title>{{coc_title}}</title>
    <meta name="description" content="{{coc_description}}"/>
    {{/web_only}}
    <link rel="stylesheet" type="text/css" href="../css/design.css"/>
    <link rel="stylesheet" type="text/css" href="css/calculator.css"/>
    {{#web_only}}
    <script src="js/favicon.js"></script>
    <link rel="icon" href="/clash-of-clans/i/favicon-v2.png"/>
    <link rel="apple-touch-icon-precomposed" href="/clash-of-clans/i/app-icons/57x57.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/clash-of-clans/i/app-icons/72x72.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/clash-of-clans/i/app-icons/114x114.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/clash-of-clans/i/app-icons/144x144.png"/>
    <meta name="apple-mobile-web-app-title" content="{{coc_title_web_clip}}"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta property="fb:admins" content="splurov"/>
    {{/web_only}}
</head>
<body>

{{#web_only}}
<h1>{{coc_title}}</h1>

<div class="fixed-content">
    <p>{{coc_description}}</p>

    <p>All entered data will be saved in your browser and pre-filled in next time you visit this page.</p>

    <p>Please note this calculator is only available at http://mkln.ru/clash-of-clans/. If you've seen it on other sites or in the iTunes App Store or anywhere else — is the result of the actions of fraudsters and thieves that have nothing to do with me and use my work without my permission, violating copyright.</p>
</div>
{{/web_only}}

{{^web_only}}
<style>
    .app-version-updated {
        display: none;
    }
    #app_version.updated + .app-version-updated {
        position: absolute;
        top: 30px;
        left: -12px;
        border: 2px solid #900;
        border-radius: 10px;
        padding: 10px;
        display: block;
        background: #ffeeee;
        font-weight: bold;
        z-index: 100;
    }
</style>
<p style="position: relative;">Last Update: <span id="app_version" class="updated"></span> <span id="app-updated" class="app-version-updated">Version updated!</span></p>
<script>
    document.getElementById('app-updated').ontouchend = function(e) {
        e.preventDefault();
        e.stopPropagation();
        document.getElementById('app_version').className = '';
    };
</script>
{{/web_only}}

<table class="fixed-content">
    <tr>
        <td>
            <table class="data data_common">
                <tr>
                    <td>
                        <label for="barracks-levels-1"><a href="http://clashofclans.wikia.com/wiki/Barracks" class="wikia-link js-link" target="_blank">Barracks</a> Levels</label>
                    </td>
                    <td>
                        <select id="barracks-levels-1" tabindex="1">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10" selected="selected">10</option>
                        </select>
                        <select id="barracks-levels-2" tabindex="5">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10" selected="selected">10</option>
                        </select>
                        <select id="barracks-levels-3" tabindex="10">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10" selected="selected">10</option>
                        </select>
                        <select id="barracks-levels-4" tabindex="15">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10" selected="selected">10</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="dark-barracks-levels-1"><a href="http://clashofclans.wikia.com/wiki/Dark_Barracks" class="wikia-link js-link" target="_blank">Dark Barracks</a> Levels</label>
                    </td>
                    <td>
                        <select id="dark-barracks-levels-1" tabindex="20">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4" selected="selected">4</option>
                        </select>
                        <select id="dark-barracks-levels-2" tabindex="25">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4" selected="selected">4</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="army-camps"><a href="http://clashofclans.wikia.com/wiki/Army_Camp" class="wikia-link js-link" target="_blank">Army Camps</a> Capacity</label>
                    </td>
                    <td>
                        <input type="number" data-object-type="all" step="5" min="20" max="220" class="js-number" data-multiplier="5" value="220" id="army-camps" size="3" tabindex="30"/>
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="spell-factory-level"><a href="http://clashofclans.wikia.com/wiki/Spell_Factory" class="wikia-link js-link" target="_blank">Spell Factory</a> Level</label>
                    </td>
                    <td>
                        <select id="spell-factory-level" tabindex="35">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4" selected="selected">4</option>
                        </select>
                    </td>
                </tr>
            </table>
        </td>
        <td class="right-column">
            <div class="list-content list-content_small">
                {{#firstChangelog}}
                    <h3>What's New in Version {{version}}</h3>
                    {{#ch_title}}
                    <p>{{ch_title}}</p>
                    {{/ch_title}}
                    <ul>
                        {{#changes}}
                        <li>{{& change}}.</li>
                        {{/changes}}
                    </ul>
                {{/firstChangelog}}
                <span id="view-changelog" class="button button_lonely">Version History</span>
            </div>
        </td>
    </tr>
</table>

<table id="units" class="data">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th>Quantity <span class="data-secondary" title="Free Capacity" id="units-quantity"></span></th>
            <th><span class="cost-elixir">Total</span></th>
            <th>Subtract</th>
            <th colspan="4">Barracks <span class="limit-exceeded data-secondary" style="display: none;" id="units-barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="2"></td>
            <td><span class="button js-reset" data-reset-type="units" data-scope="quantity">Reset</span></td>
            <td></td>
            <td><span class="button js-reset" data-reset-type="units" data-scope="subtract">Reset</span></td>
            <td id="units-barrack-header-1"></td>
            <td id="units-barrack-header-2"></td>
            <td id="units-barrack-header-3"></td>
            <td id="units-barrack-header-4"></td>
        </tr>
    </thead>
    <tbody id="units-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2"></td>
            <td id="units-space" class="result"></td>
            <td id="units-cost" class="number result"></td>
            <td id="units-subtracted-cost" class="data-secondary"></td>
            <td id="units-time-barrack-1" class="number"></td>
            <td id="units-time-barrack-2" class="number"></td>
            <td id="units-time-barrack-3" class="number"></td>
            <td id="units-time-barrack-4" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="dark" class="data">
    <thead>
        <tr>
            <th>Unit</th>
            <th>Level</th>
            <th>Quantity <span class="data-secondary" title="Free Capacity" id="dark-quantity"></span></th>
            <th><span class="cost-dark-elixir">Total</span></th>
            <th>Subtract</th>
            <th colspan="2">Dark Barracks <span class="limit-exceeded data-secondary" style="display: none;" id="dark-barracks-exceeded">(too many units)</span></th>
        </tr>
        <tr>
            <td colspan="2"></td>
            <td><span class="button js-reset" data-reset-type="dark" data-scope="quantity">Reset</span></td>
            <td></td>
            <td><span class="button js-reset" data-reset-type="dark" data-scope="subtract">Reset</span></td>
            <td id="dark-barrack-header-1"></td>
            <td id="dark-barrack-header-2"></td>
        </tr>
    </thead>
    <tbody id="dark-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2"></td>
            <td id="dark-space" class="result"></td>
            <td id="dark-cost" class="number result"></td>
            <td id="dark-subtracted-cost" class="data-secondary"></td>
            <td id="dark-time-barrack-1" class="number"></td>
            <td id="dark-time-barrack-2" class="number"></td>
        </tr>
    </tfoot>
</table>

<table id="spells" class="data">
    <thead>
        <tr>
            <th>Spell</th>
            <th>Level</th>
            <th>Quantity <span class="data-secondary" title="Free Capacity" id="spells-quantity"></span></th>
            <th><span class="cost-gold">Total</span></th>
        </tr>
    </thead>
    <tbody id="spells-body">
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2"></td>
            <td class="result">
                <span id="spells-space"></span>
                —
                <span id="spells-time"></span>
            </td>
            <td id="spells-cost" class="number result"></td>
        </tr>
    </tfoot>
</table>

<p>
    <span id="save" class="button button_lonely" tabindex="2000">Save Calculation</span>
</p>

<div id="saved-list" class="saved-list">
    <div id="saved-list-content" class="saved-list__content">
    </div>
</div>

<script src="js/hogan-2.0.0.min.js" data-compress="no"></script>

<script type="text/x-build-hogan" src="mustache/item_row.mustache"></script>
<script type="text/x-build-hogan" src="mustache/saved_list_item.mustache"></script>

<script src="js/calculator.js"></script>

<div id="changelog-overlay" class="changelog-overlay hidden">
    <div class="changelog-close">
        <span id="changelog-close" class="button">
            <span class="changelog-close__all">Close</span>
            <span class="changelog-close__iphone">Back</span>
        </span>
    </div>
    <div id="changelog-popup" class="changelog-popup">
        <div class="changelog-content">
            <h2>Version History</h2>
            <div class="list-content">
                {{#changelog}}
                <h3>
                    {{version}}<br/>
                    <span class="list-content__date">{{date}}</span>
                </h3>
                {{#ch_title}}
                <p>{{ch_title}}</p>
                {{/ch_title}}
                <ul>
                    {{#changes}}
                    <li>{{& change}}.</li>
                    {{/changes}}
                </ul>
                {{/changelog}}
            </div>
        </div>
    </div>
</div>
<script src="js/view-changelog.js"></script>

{{#web_only}}
<!-- Yandex.Metrika counter -->
<script src="../js/ya-metrika.js"></script>
{{& ya_metrika_noscript}}
<!-- /Yandex.Metrika counter -->

<script src="../js/ga.js"></script>

<div id="fb-root"></div>
<script src="js/facebook.js"></script>

<h2>Comments</h2>
<p>Feel free to post bugs and feature suggestions.</p>
<p>You can also contact me directly via <a href="mailto:splurov@gmail.com">email</a> or leave a message in the <a href="http://forum.supercell.net/showthread.php/17238-Troops-and-Spells-Cost-Calculator">thread</a> on a Supercell forums.</p>

<div class="fb-comments" data-href="http://mkln.ru/clash-of-clans/" data-width="470" data-num-posts="5"></div>

<h2>To-do</h2>
<div class="list-content list-content_small fixed-content">
    <ul>
        <li>Possibility to specify a title for the saved calculation.</li>
        <li>Possibility to make a unique link to the calculation.</li>
        <li>The distribution of units in the case when the barracks can produce less than accommodating the army camps.</li>
        <li>Production time in saved calculations.</li>
        <li>Saving data between browsers.</li>
        <li>“Gem-boosted” barracks time (from <a href="http://forum.supercell.net/showthread.php/17238-Troops-and-Spells-Cost-Calculator?p=357652&viewfull=1#post357652">forums</a> and comments).</li>
        <li>Gem costs.</li>
        <li>(?) Clan Castle troops.</li>
    </ul>
</div>

<div class="footer">
    <p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a></p>
    <p>&copy; 2013 <a href="/en/">Mikhail Kalashnik</a></p>
</div>
<script>if(navigator.userAgent.search(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)!==-1){document.getElementsByTagName('body')[0].innerHTML='';}</script>
{{/web_only}}

</body>
</html>
